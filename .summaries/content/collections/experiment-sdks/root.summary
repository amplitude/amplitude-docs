# Amplitude Experiment SDK Suite

Amplitude Experiment is a comprehensive feature flagging and experimentation platform that provides client-side and server-side SDKs across multiple programming languages and platforms. The platform enables A/B testing, feature rollouts, and dynamic configuration management through both remote and local evaluation modes.

## Product Architecture and Evaluation Modes

The Experiment platform operates through two primary evaluation modes:

**Remote Evaluation**: SDKs fetch flag configurations and user assignments from Amplitude's servers via API calls. Client-side SDKs use the `fetch()` method while server-side SDKs implement `fetchV2()` or similar methods. This mode ensures real-time flag updates but requires network connectivity.

**Local Evaluation**: SDKs download flag configurations locally and perform evaluation client-side using methods like `start()`, `evaluate()`, or `evaluateV2()`. This provides faster response times and offline capability, with periodic syncing of flag configurations through polling or streaming updates.

The **Evaluation Proxy** serves as a bridge component, enabling local evaluation on unsupported platforms through a Docker-based service that handles assignment event tracking with 24-hour deduplication and cohort syncing.

## SDK Portfolio and Platform Coverage

### Client-Side SDKs
- **JavaScript SDK** (`@amplitude/experiment-js-client`): Browser-based evaluation with npm/yarn installation
- **React Native SDK** (`experiment-react-native-client`): Mobile app support requiring `@react-native-async-storage/async-storage`
- **Android SDK** (`experiment-android-client`): Native Android implementation via Maven Central
- **iOS SDK**: Native iOS implementation via CocoaPods (`AmplitudeExperiment`) or Swift Package Manager

### Server-Side SDKs
- **Node.js SDK** (`@amplitude/experiment-node-server`): JavaScript runtime server evaluation
- **Python SDK** (`amplitude-experiment`): Python 3.6+ compatible server evaluation
- **Go SDK** (`github.com/amplitude/experiment-go-server`): Go-based server implementation
- **JVM SDK**: Java/Kotlin server support with Maven/Gradle installation
- **PHP SDK**: PHP 7.4+ server-side evaluation
- **Ruby SDK** (`amplitude-experiment` gem): Ruby server implementation

## Core Nomenclature and Concepts

**Deployment Key**: Authentication credential that identifies the experiment environment and enables SDK initialization. Distinct from Analytics API keys.

**ExperimentUser**: User object containing identification and properties for flag evaluation, supporting user_id, device_id, user_properties, and group_properties for account-level bucketing.

**Variants**: Flag evaluation results containing the assigned treatment value and optional payload data (JSONObject/dictionary).

**Flag Configurations**: Server-side definitions of experiment rules, targeting criteria, and variant distributions that SDKs download for local evaluation.

**Exposure Tracking**: Automatic or manual recording of when users are exposed to experiment variants, essential for statistical analysis. Implemented through `ExposureTrackingProvider` interfaces.

**Cohort Targeting**: Advanced targeting based on user cohorts synced from Amplitude Analytics, configured via `CohortSyncConfig` with API keys and sync intervals.

**Bootstrapping**: Pre-loading initial variants or flag configurations to reduce initial load times, using `initialVariants` or flag configuration bootstrapping.

## Integration Ecosystem

### Analytics Integration
SDKs integrate natively with **Amplitude Analytics** through methods like `initializeWithAmplitudeAnalytics()`, enabling automatic user context sharing and exposure event tracking. Third-party analytics platforms supported include **Segment** and **mParticle**.

### Device ID Synchronization
**AmplitudeCookie** utilities enable client-server device ID synchronization, parsing Amplitude's browser cookies to maintain consistent user identification across client and server evaluations.

### Provider Interfaces
- **ExperimentUserProvider**: Dynamic user context provision for automatic user property updates
- **ExposureTrackingProvider**: Custom exposure event handling and routing
- **AssignmentTrackingProvider**: Server-side assignment event tracking customization

## Configuration and Deployment Options

### Server Zones
SDKs support **ServerZone** configuration for data residency compliance:
- `ServerZone.US` / `USServerZone`: Default US data center
- `ServerZone.EU` / `EUServerZone`: European data center for GDPR compliance

### Performance Configuration
- **fetchTimeoutMillis**: Network request timeout settings
- **fetchRetries**: Retry logic for failed requests
- **flagConfigPollingInterval**: Local evaluation refresh frequency
- **streamUpdates**: Real-time flag configuration streaming
- **pollOnStart**: Automatic polling initiation
- **fetchOnStart**: Immediate variant fetching on initialization

### Advanced Features
- **Account-level bucketing**: Group-based experiment assignment using group properties
- **Automatic exposure tracking**: Built-in exposure event generation
- **Fallback variants**: Default values when evaluation fails
- **Instance naming**: Multi-instance SDK management
- **Assignment deduplication**: Preventing duplicate assignment events

## API Endpoints and Methods

### Core Evaluation Methods
- Client-side: `fetch()`, `start()`, `variant(flagKey)`
- Server-side: `fetchV2()`, `evaluateV2()`, `fetch_v2()`, `evaluate_v2()`

### Management Operations
- `clear()`: Variant cache clearing
- `all()`: Retrieve all variants
- `exposure()`: Manual exposure tracking
- `refreshFlagConfigs()`: Force configuration refresh
- `cacheReady()`: Async storage readiness checking

### Initialization Patterns
- Standalone: Direct SDK initialization with deployment keys
- Unified SDK: Integration with Amplitude Analytics SDK
- Third-party: Integration with external analytics platforms

The Experiment SDK suite provides comprehensive feature flagging capabilities across the entire development stack, from client-side web and mobile applications to server-side microservices, with robust configuration management, analytics integration, and deployment flexibility.