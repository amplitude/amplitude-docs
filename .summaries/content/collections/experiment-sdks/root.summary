# Amplitude Experiment: Feature Flag and Experimentation Platform

## Overview

Amplitude Experiment is a comprehensive feature flag and experimentation platform that enables developers to implement feature flags, run A/B tests, and manage experiments across various platforms. The platform provides both client-side and server-side implementations with flexible evaluation options, allowing teams to safely deploy features, test variations, and make data-driven decisions.

Key features include feature flag management, remote and local evaluation options, automatic exposure tracking, cohort targeting, and native integration with Amplitude Analytics. The platform supports multiple programming languages and platforms through dedicated SDKs.

## Product Relationships and Architecture

Amplitude Experiment consists of several interconnected components:

1. **SDK Clients**: Platform-specific libraries that integrate with applications, available for both client-side (JavaScript, React Native, iOS, Android) and server-side (Node.js, JVM, Python, Ruby, Go, PHP) environments.

2. **Evaluation Methods**:
   - **Remote Evaluation**: Server-dependent evaluation where the SDK makes API calls to Amplitude servers. Suitable for client-side applications and uses client-side deployment keys.
   - **Local Evaluation**: Offline evaluation where flag configurations are downloaded to the client. Suitable for server-side applications or performance-critical scenarios and uses server-side deployment keys.

3. **Evaluation Proxy**: A service that enables local evaluation within your infrastructure, particularly useful for platforms without native SDKs or for enhancing evaluation with large cohort targeting.

4. **Flag Configuration**: Centralized management system for feature flags and experiments.

5. **Analytics Integration**: Connection to Amplitude Analytics or third-party analytics providers for tracking and analysis.

## Key Nomenclature and Definitions

- **Variant**: A specific version or configuration of a feature flag.
- **ExperimentUser**: Object representing a user with properties for targeting and evaluation.
- **Deployment Key**: Authentication key for accessing Experiment services, available in server-side or client-side versions.
- **Exposure**: Event recorded when a user is exposed to a feature flag.
- **Assignment**: The specific variant a user is assigned to for a feature flag.
- **Bootstrapping**: Process of pre-loading flag configurations.
- **Cohort Targeting**: Targeting users based on predefined segments.
- **Flag Configuration**: Settings that define how a feature flag behaves.
- **Flag Streaming**: Real-time updates to flag configurations.
- **User Provider**: Component that supplies user information for evaluation.
- **Account-level Bucketing**: System ensuring consistent user experiences across devices.

## Product Ecosystem Integration

Amplitude Experiment integrates with the broader Amplitude product ecosystem in several ways:

1. **Amplitude Analytics Integration**: Native integration for automatic exposure tracking, user property synchronization, and experiment results analysis.

2. **Cohort Definition and Targeting**: Leverages user segments defined in Amplitude for targeted feature flag deployment.

3. **Cross-platform Consistency**: Account-level bucketing ensures users receive consistent experiences across different devices and platforms.

4. **Third-party Analytics Support**: While natively integrated with Amplitude Analytics, the platform also supports integration with other analytics providers.

## API Endpoints and Methods

### Common SDK Methods
Most SDKs implement these core methods:

- **initialize**: Set up the client with configuration options
- **fetch/fetchV2**: Retrieve flag variants for a user
- **evaluate/evaluateV2**: Evaluate flag variants locally
- **variant**: Get a specific flag variant for a user
- **exposure/track**: Record exposure events
- **setUser**: Update the current user for evaluation

### Evaluation Proxy API
- `GET /v1/vardata`: Fetch variant data for a user
- `POST /v1/track`: Track assignment events

### Configuration Options
Common configuration options across SDKs include:

- **Server Zone**: US or EU data residency options
- **Debug Mode**: Enhanced logging for development
- **Timeout**: Network request timeout settings
- **Polling Interval**: Frequency of flag configuration updates
- **Bootstrap**: Initial flag configuration data
- **User Provider**: Custom user data provider implementation
- **Assignment Tracking Provider**: Custom implementation for tracking assignments

The Evaluation Proxy can be deployed using Docker or Kubernetes and supports configuration via YAML or environment variables, with Redis recommended for persistent storage.