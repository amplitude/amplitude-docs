# Amplitude Experiment: Feature Flag and Experimentation Platform

## Overview

Amplitude Experiment is a feature flag and experimentation platform that enables developers to implement controlled feature rollouts, A/B tests, and manage experiments across multiple platforms. The platform supports both client-side and server-side implementations through a comprehensive suite of SDKs for various programming languages and frameworks.

Key features include:
- Remote and local evaluation of feature flags
- User targeting and segmentation
- Cohort-based targeting
- Automatic exposure tracking
- Integration with Amplitude Analytics
- EU data residency support
- Account-level bucketing for B2B applications
- Flag streaming for real-time updates

Primary use cases include feature flag management, A/B testing, personalization based on user attributes, feature targeting to specific segments, and safely deploying new features with kill switches.

## Product Relationships and Architecture

Amplitude Experiment consists of several interconnected components:

1. **Client-side SDKs**: JavaScript, iOS, Android, and React Native implementations for client applications.

2. **Server-side SDKs**: Node.js, Python, Ruby, Go, JVM (Java/Kotlin), and PHP implementations for server environments.

3. **Evaluation Proxy**: A service enabling local evaluation within your infrastructure, particularly useful for platforms without native SDKs.

4. **Amplitude Analytics Integration**: Tight integration with Amplitude Analytics for tracking user behavior and experiment results.

The platform supports two evaluation methods:
- **Remote Evaluation**: Flags evaluated on Amplitude's servers, requiring network requests for each evaluation.
- **Local Evaluation**: Flag configurations downloaded to the client/server for local evaluation, providing better performance and offline capabilities.

## Key Nomenclature and Definitions

- **Variant**: A specific version or treatment in an experiment that a user can be assigned to.
- **ExperimentUser**: Object representing a user with properties used for targeting and bucketing.
- **ExperimentConfig/ExperimentClient**: Main client object used to initialize and interact with the SDK.
- **Exposure/Assignment**: When a user is shown a specific variant of a feature flag.
- **Deployment Key**: Authentication key for the SDK to access Amplitude's services.
- **Flag Configuration**: Complete set of rules defining how users are assigned to variants.
- **Bootstrapping**: Process of initializing the SDK with pre-fetched flag configurations.
- **User Provider**: Mechanism to supply user information to the SDK for evaluation.
- **Cohort Targeting**: Ability to target users based on membership in predefined cohorts.
- **Assignment Tracking**: Recording which variant a user was assigned to for analytics purposes.

## Integration with Amplitude Ecosystem

Amplitude Experiment integrates with other Amplitude products:

1. **Amplitude Analytics**: Automatically tracks exposures as events, enabling analysis of experiment results.
2. **Amplitude Cohorts**: Targets users based on cohorts defined in Amplitude.
3. **Amplitude Data**: Uses user properties and behaviors tracked in Amplitude for targeting.

The platform also supports third-party analytics providers through custom integration points in the SDKs.

## API Endpoints and SDK Methods

Common SDK methods across implementations:

**Initialization**:
```
initializeRemote(apiKey, config)  // For remote evaluation
initializeLocal(apiKey, config)   // For local evaluation
```

**Variant Fetching**:
```
fetch(user)   // Fetches variants for a user
fetchAll()    // Fetches all variants
```

**Variant Access**:
```
variant(flagKey, defaultValue)  // Gets a specific variant
all()                           // Gets all variants for the current user
```

**Exposure Tracking**:
```
exposure(flagKey, variant)  // Tracks an exposure event
```

**Evaluation Proxy REST API endpoints**:
- `/v1/vardata` - For fetching flag configurations
- `/sdk/v2/evaluate` - For evaluating users against flags

**Common Configuration Options**:
- `serverUrl` - Custom server URL
- `serverZone` - "US" or "EU" for data residency
- `fetchTimeoutMillis` - Timeout for network requests
- `retryBackoff` - Retry strategy for failed requests
- `flagConfigPollingIntervalMillis` - Interval for refreshing flag configurations

## SDK-Specific Features

- **JavaScript SDK**: Supports server-side rendering and automatic exposure tracking
- **iOS/Android SDKs**: Native mobile implementations with AsyncStorage for persistence
- **React Native SDK**: Cross-platform mobile support with AsyncStorage integration
- **JVM SDK**: Supports both Java and Kotlin with flag streaming capabilities
- **Node.js/Python/Ruby/Go/PHP SDKs**: Server-side implementations with cohort targeting
- **Evaluation Proxy**: Supports platforms without native SDKs and enhances evaluation with large cohort targeting

Each SDK provides language-specific implementations while maintaining consistent behavior across platforms.