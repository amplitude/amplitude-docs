# Amplitude Experiment SDK Suite

Amplitude Experiment is a comprehensive feature flagging and experimentation platform that provides client-side and server-side SDKs across multiple programming languages and platforms. The platform enables organizations to implement feature flags, conduct A/B tests, and manage feature rollouts with sophisticated targeting capabilities including cohort-based segmentation.

## Product Architecture and Evaluation Modes

The Experiment platform operates through two primary evaluation modes:

**Remote Evaluation** fetches flag configurations and variants from Amplitude's servers in real-time via API calls. This mode ensures the most up-to-date configurations but requires network connectivity for each evaluation.

**Local Evaluation** downloads flag configurations to the client and performs evaluations locally, offering improved performance and offline capability. Local evaluation clients automatically sync flag configurations through polling or streaming updates and can integrate cohort data for advanced targeting.

The **Evaluation Proxy** serves as a bridge service for platforms without native SDK support, providing local evaluation capabilities through a Docker-deployed service that handles assignment tracking and cohort synchronization.

## SDK Portfolio and Platform Coverage

### Client-Side SDKs
- **JavaScript SDK** (`@amplitude/experiment-js-client`) - Web applications with SSR support
- **React Native SDK** (`@amplitude/experiment-react-native-client`) - Cross-platform mobile with AsyncStorage dependency
- **Android SDK** (`experiment-android-client`) - Native Android via Maven Central
- **iOS SDK** - Native iOS via CocoaPods/Swift Package Manager

### Server-Side SDKs
- **Node.js SDK** (`@amplitude/experiment-node-server`) - JavaScript server environments
- **JVM SDK** - Java/Kotlin applications with Maven/Gradle integration
- **Python SDK** (`amplitude-experiment`) - Python 3.6+ server applications
- **PHP SDK** - PHP 7.4+ server implementations
- **Ruby SDK** (`amplitude-experiment` gem) - Ruby 2.0+ server applications
- **Go SDK** (`github.com/amplitude/experiment-go-server`) - Go server applications

## Core Concepts and Nomenclature

**Deployment Key** - Authentication credential that identifies the experiment environment and determines available flag configurations.

**Flag Key** - Unique identifier for individual feature flags within an experiment deployment.

**Variants** - The different values or configurations that a flag can return, representing different experimental conditions or feature states.

**ExperimentUser** - User context object containing user properties, device information, and group memberships used for flag evaluation and targeting.

**Exposure Tracking** - Automatic or manual tracking of when users are exposed to specific flag variants, essential for experiment analysis.

**Bootstrapping** - Pre-loading flag configurations and variants to reduce initial load times and provide immediate flag access.

**Cohort Targeting** - Advanced segmentation capability that evaluates flags based on user membership in predefined cohorts synced from Amplitude Analytics.

## Integration Patterns and Analytics Connectivity

### Amplitude Analytics Integration
Most SDKs provide `initializeWithAmplitudeAnalytics()` methods that automatically:
- Share user context between Experiment and Analytics
- Handle exposure event tracking
- Synchronize device IDs via AmplitudeCookie parsing
- Enable seamless user journey analysis

### Third-Party Analytics Integration
SDKs support custom analytics providers through:
- **ExposureTrackingProvider** interfaces for custom exposure event handling
- **ExperimentUserProvider** interfaces for dynamic user context
- Direct integrations with Segment, mParticle, and other analytics platforms

## Configuration and Deployment Options

### Data Residency
All SDKs support **ServerZone** configuration for EU data residency compliance, with options for `ServerZone.US` and `ServerZone.EU` endpoints.

### Performance Optimization
- **fetchOnStart/pollOnStart** - Automatic flag fetching during SDK initialization
- **Flag Config Polling** - Configurable intervals for local evaluation updates (e.g., `flagConfigPollingIntervalMillis`)
- **Stream Updates** - Real-time flag configuration updates for local evaluation
- **Assignment Deduplication** - 24-hour deduplication windows for assignment event tracking

### Advanced Targeting
- **Account-Level Bucketing** - Group-based experimentation using `group_properties`
- **Cohort Sync Configuration** - Integration with Amplitude cohorts for sophisticated user targeting
- **Bootstrap Configuration** - Pre-loaded flag states for immediate availability

## API Patterns and Method Signatures

### Common SDK Methods
- `fetch()` / `fetchV2()` - Remote evaluation variant retrieval
- `start()` - Local evaluation client initialization
- `variant(flagKey)` - Individual flag variant access
- `evaluate()` / `evaluateV2()` - Local evaluation of user context
- `exposure()` - Manual exposure event tracking
- `clear()` - Variant cache clearing

### Configuration Objects
- `RemoteEvaluationConfig` / `LocalEvaluationConfig` - SDK-specific configuration
- `CohortSyncConfig` - Cohort targeting configuration with API keys
- `AssignmentConfig` - Assignment tracking configuration
- `ExperimentConfig` - Client-side SDK configuration builder

## Deployment Infrastructure

The Evaluation Proxy (`amplitudeinc/evaluation-proxy`) enables deployment as stateless Docker containers with:
- Kubernetes Helm chart support (`evaluation-proxy-helm`)
- Redis backend for persistent storage
- Load balancer compatibility
- YAML or environment variable configuration
- Port 3546 default service endpoint

This comprehensive SDK suite enables organizations to implement sophisticated feature flagging and experimentation across their entire technology stack while maintaining consistent APIs, configuration patterns, and integration capabilities.