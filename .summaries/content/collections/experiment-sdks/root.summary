# Amplitude Experiment SDK Suite

Amplitude Experiment is a comprehensive feature flagging and experimentation platform that provides client-side and server-side SDKs across multiple programming languages and platforms. The platform enables developers to implement feature flags, conduct A/B tests, and manage feature rollouts through both remote and local evaluation methods.

## Product Architecture and Evaluation Methods

The Experiment SDK ecosystem supports two primary evaluation approaches:

**Remote Evaluation**: SDKs fetch variant assignments from Amplitude's servers via API calls, suitable for client-side implementations where flag configurations don't need to be embedded in the application.

**Local Evaluation**: SDKs download flag configurations and evaluate variants locally, providing faster performance and reduced network dependency. This approach includes automatic flag configuration polling, real-time streaming updates, and cohort synchronization for advanced targeting.

The **Evaluation Proxy** serves as a bridge component, enabling local evaluation capabilities on unsupported platforms through a Docker-based service that handles assignment event tracking with 24-hour deduplication and hourly cohort syncing.

## SDK Portfolio and Platform Coverage

### Client-Side SDKs
- **JavaScript SDK** (`@amplitude/experiment-js-client`): Browser-based implementation with SSR support
- **React Native SDK** (`@amplitude/experiment-react-native-client`): Cross-platform mobile development with async storage dependency
- **Android SDK** (`experiment-android-client`): Native Android implementation via Maven Central
- **iOS SDK**: Native iOS implementation via CocoaPods/Swift Package Manager

### Server-Side SDKs
- **Node.js SDK** (`@amplitude/experiment-node-server`): Server-side JavaScript implementation
- **JVM SDK**: Java/Kotlin support for enterprise server environments
- **Python SDK** (`amplitude-experiment`): Python 3.6+ compatibility
- **Ruby SDK** (`amplitude-experiment`): Ruby 2.0+ with cross-architecture support
- **PHP SDK**: PHP 7.4+ server-side implementation
- **Go SDK** (`github.com/amplitude/experiment-go-server`): High-performance Go implementation

## Key Nomenclature and Concepts

**Deployment Key**: Authentication credential that identifies the experiment environment and determines available flag configurations.

**ExperimentUser**: User context object containing user ID, device ID, user properties, and group properties for variant assignment and targeting.

**Variants**: The different experiences or feature states that users can be assigned to, accessed via `variant()` methods with fallback support.

**Flag Key**: Unique identifier for individual feature flags within an experiment configuration.

**Exposure Tracking**: Automatic or manual tracking of when users are exposed to variants, essential for experiment analysis and statistical validity.

**Cohort Targeting**: Advanced targeting capability that syncs user cohorts from Amplitude Analytics for sophisticated audience segmentation.

**Bootstrapping**: Pre-loading initial variants or flag configurations to reduce initial load times and improve user experience.

## Integration Patterns and Analytics Providers

The SDK suite provides seamless integration with multiple analytics platforms:

- **Amplitude Analytics**: Native integration via `initializeWithAmplitudeAnalytics()` methods
- **Segment**: Third-party analytics integration through exposure tracking providers
- **mParticle**: Supported through custom exposure tracking implementations

**ExposureTrackingProvider** and **UserProvider** interfaces enable custom analytics integrations and dynamic user context management.

## Configuration and Deployment Features

### Advanced Configuration Options
- **Automatic Exposure Tracking**: Eliminates manual exposure tracking implementation
- **Flag Configuration Polling**: Configurable intervals for flag updates (`flagConfigPollingIntervalMillis`)
- **Stream Updates**: Real-time flag configuration updates for immediate rollouts
- **Server Zone Configuration**: EU data residency support via `ServerZone.EU`
- **Assignment Configuration**: Automatic assignment event tracking with deduplication

### Performance and Reliability Features
- **Fetch Timeouts and Retries**: Configurable network resilience (`fetchTimeoutMillis`, `fetchRetries`)
- **Caching Mechanisms**: Local variant caching with `cacheReady()` status indicators
- **Fallback Variants**: Graceful degradation when flag evaluation fails
- **Account-Level Bucketing**: Group-based experiment assignment for B2B use cases

## API Methods and Core Operations

### Primary SDK Methods
- **Initialization**: `initialize()`, `initializeWithAmplitudeAnalytics()`
- **Remote Evaluation**: `fetch()`, `fetchV2()`, `fetch_async()`
- **Local Evaluation**: `start()`, `evaluate()`, `evaluateV2()`
- **Variant Access**: `variant(flagKey)`, `variant.value`, `variant.payload`
- **Lifecycle Management**: `start()`, `stop()`, `clear()`

### Configuration Management
- **Flag Refresh**: `refreshFlagConfigs()` for manual configuration updates
- **Bootstrap Loading**: Initial variant and flag configuration pre-loading
- **Cohort Sync**: `CohortSyncConfig` for audience targeting synchronization

## Ecosystem Integration and Data Flow

The Experiment platform integrates deeply with the broader Amplitude ecosystem, leveraging Amplitude Analytics for user identification, cohort management, and assignment tracking. **AmplitudeCookie** utilities enable device ID synchronization across web and mobile platforms, ensuring consistent user experiences.

The **Evaluation Proxy** extends the platform's reach by providing local evaluation capabilities as a stateless, horizontally scalable service deployable via Docker or Kubernetes Helm charts, making it suitable for microservices architectures and unsupported runtime environments.