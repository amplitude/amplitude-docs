# Amplitude Experiment SDK Suite

Amplitude Experiment is a comprehensive feature flagging and experimentation platform that provides client-side and server-side SDKs across multiple programming languages and platforms. The platform enables organizations to implement feature flags, conduct A/B tests, and manage feature rollouts with sophisticated targeting capabilities including cohort-based segmentation.

## Product Architecture and Evaluation Modes

The Experiment platform operates through two primary evaluation modes:

**Remote Evaluation**: Variants are fetched from Amplitude's servers via API calls, with the evaluation logic handled server-side. This mode uses methods like `fetch()`, `fetchV2()`, or `fetch_async()` depending on the SDK.

**Local Evaluation**: Flag configurations are downloaded and cached locally, with evaluation performed client-side. This mode uses methods like `start()`, `evaluate()`, or `evaluateV2()` and supports real-time updates through flag configuration polling and streaming.

The **Evaluation Proxy** serves as a bridge component, enabling local evaluation capabilities on platforms without native SDK support while providing automatic assignment event tracking with 24-hour deduplication and hourly cohort synchronization.

## SDK Portfolio and Platform Coverage

### Client-Side SDKs
- **JavaScript SDK** (`@amplitude/experiment-js-client`): Browser-based implementation with SSR support
- **React Native SDK** (`@amplitude/experiment-react-native-client`): Cross-platform mobile with async storage dependency
- **Android SDK** (`experiment-android-client`): Native Android implementation via Maven Central
- **iOS SDK**: Native iOS implementation via CocoaPods/Swift Package Manager

### Server-Side SDKs
- **Node.js SDK** (`@amplitude/experiment-node-server`): JavaScript runtime server implementation
- **JVM SDK**: Java/Kotlin server-side implementation with Maven/Gradle support
- **Python SDK** (`amplitude-experiment`): Python 3.6+ compatible server implementation
- **Ruby SDK** (`amplitude-experiment`): Ruby 2.0+ compatible with multi-architecture support
- **Go SDK** (`github.com/amplitude/experiment-go-server`): Go implementation for server-side evaluation
- **PHP SDK**: PHP 7.4+ server-side implementation with PSR logger interface

## Core Concepts and Nomenclature

**Deployment Key**: Authentication credential that identifies the experiment environment and enables SDK initialization.

**Flag Key**: Unique identifier for individual feature flags within experiments.

**Variants**: The different versions or values that a feature flag can return, accessed through methods like `variant()` or direct value retrieval.

**ExperimentUser**: User object containing identification and properties for targeting, built using platform-specific builders or constructors.

**Exposure Tracking**: Automatic or manual tracking of when users are exposed to experiment variants, essential for accurate experiment analysis.

**Cohort Targeting**: Advanced segmentation capability that allows targeting based on user cohorts defined in Amplitude Analytics.

**Bootstrapping**: Pre-loading initial flag configurations to reduce latency, implemented through `initialVariants` or similar configuration options.

## Integration Ecosystem

### Analytics Integration
The SDKs provide seamless integration with Amplitude Analytics through methods like `initializeWithAmplitudeAnalytics()`, enabling automatic user context sharing and exposure event tracking. Third-party analytics platforms like Segment are also supported through custom provider interfaces.

### Provider Interfaces
- **ExperimentUserProvider/ExperimentUserProvider**: Supplies user context for evaluation
- **ExposureTrackingProvider**: Handles custom exposure event tracking
- **AssignmentTrackingProvider**: Manages assignment event delivery

### Configuration Management
All SDKs support extensive configuration through builder patterns or configuration objects:
- **Server Zones**: Support for EU data residency through `ServerZone.EU` configuration
- **Polling Intervals**: Configurable flag configuration refresh rates via `flagConfigPollingIntervalMillis`
- **Timeout/Retry Settings**: Network resilience through `fetchTimeoutMillis` and retry configurations
- **Streaming Updates**: Real-time flag updates through `streamUpdates` capabilities

## API Endpoints and Key Methods

### Common SDK Methods
- **Initialization**: `initialize()`, `initializeRemote()`, `initializeLocal()`
- **Remote Evaluation**: `fetch()`, `fetchV2()`, `fetch_async()`
- **Local Evaluation**: `start()`, `evaluate()`, `evaluateV2()`
- **Variant Access**: `variant()`, direct value access
- **Cache Management**: `clear()` for variant cache clearing

### Evaluation Proxy Endpoints
The Evaluation Proxy operates on port 3546 and provides REST API endpoints that mirror the remote Evaluation API, enabling local evaluation through HTTP requests.

## Advanced Features

**Cohort Synchronization**: Server-side SDKs support automatic cohort syncing through `CohortSyncConfig`, enabling sophisticated user targeting based on behavioral segments.

**Assignment Tracking**: Automatic tracking of user assignments to experiment variants through `AssignmentConfig` with deduplication capabilities.

**Account-Level Bucketing**: Support for group-based experiments through `group_properties` and account-level analysis.

**Cookie Integration**: Amplitude cookie parsing utilities (`AmplitudeCookie`) for device ID synchronization across web and server-side implementations.

The Experiment SDK suite provides a unified approach to feature flagging across all major platforms while maintaining platform-specific optimizations and integrations, supported by robust infrastructure components like the Evaluation Proxy for extended platform coverage.