## Amplitude Experiment SDK Suite

Amplitude Experiment is a comprehensive feature flagging and experimentation platform that provides SDKs across multiple programming languages and platforms for both client-side and server-side implementations. The platform enables A/B testing, feature rollouts, and dynamic configuration management through a unified evaluation system.

## Product Architecture and Relationships

The Experiment SDK ecosystem is built around two primary evaluation modes:

**Remote Evaluation**: Client applications fetch pre-computed variant assignments from Amplitude's servers via API calls. This approach is typically used for client-side implementations where evaluation logic remains server-controlled.

**Local Evaluation**: Applications download flag configurations and perform evaluation logic locally. This mode supports real-time flag streaming, cohort targeting, and reduced latency through client-side processing.

The SDKs are categorized into three main deployment contexts:
- **Client-side SDKs**: JavaScript, React Native, iOS, Android - designed for user-facing applications
- **Server-side SDKs**: Node.js, Python, Ruby, PHP, Go, JVM - built for backend services and APIs  
- **Infrastructure Components**: Evaluation Proxy - enables local evaluation for unsupported platforms

## Key Nomenclature and Definitions

**Deployment Key**: Authentication credential that identifies a specific project environment and determines which flag configurations are accessible.

**Variants**: The different experiences or values that users can receive from a feature flag, containing key-value payload data.

**Flag Configurations**: Server-managed rules that define targeting criteria, allocation percentages, and variant assignments for feature flags.

**Exposure Tracking**: Automatic or manual event logging that records when users are exposed to specific variants, enabling accurate experiment analysis.

**Cohort Targeting**: Advanced segmentation capability that allows flags to target users based on behavioral cohorts defined in Amplitude Analytics.

**Bootstrapping**: Pre-loading initial variant assignments or flag configurations to reduce latency and enable offline functionality.

**Assignment Events**: Analytics events automatically generated when users are bucketed into experiment variants, with built-in deduplication.

## Integration Ecosystem

The Experiment platform integrates deeply with Amplitude's broader analytics ecosystem:

**Amplitude Analytics Integration**: Native integration enables automatic user context sharing, device ID management through AmplitudeCookie parsing, and seamless exposure event tracking without additional instrumentation.

**Third-party Analytics Support**: SDKs provide interfaces for Segment, mParticle, and custom analytics providers through ExposureTrackingProvider and UserProvider interfaces.

**Data Residency**: All SDKs support EU data center routing through ServerZone configuration for GDPR compliance.

**Evaluation Proxy**: Docker-based service (amplitudeinc/evaluation-proxy) that provides local evaluation capabilities for platforms without native SDK support, featuring Redis persistence and Kubernetes deployment options.

## Technical Implementation Patterns

**Client-side SDKs** follow consistent patterns:
- `initializeWithAmplitudeAnalytics()` for native integration
- `fetch()` for remote evaluation 
- `start()` for local evaluation with flag streaming
- `variant(flagKey)` for accessing assignments with automatic exposure tracking

**Server-side SDKs** implement:
- `fetchV2()` / `evaluateV2()` methods for variant retrieval
- Flag configuration polling with configurable intervals (flagConfigPollingIntervalMillis)
- Cohort sync capabilities through CohortSyncConfig
- Assignment tracking via AssignmentConfig with analytics API integration

**Common Configuration Options**:
- `fetchTimeoutMillis` and retry mechanisms
- `automaticExposureTracking` toggle
- `initialVariants` for bootstrapping
- `streamUpdates` for real-time flag configuration updates
- `pollOnStart` / `fetchOnStart` initialization behaviors

## API Endpoints and Integration Points

While specific API endpoints aren't detailed in the SDK documentation, the platform operates through:
- Flag configuration polling endpoints with configurable intervals
- Variant fetching APIs with timeout and retry logic
- Real-time streaming connections for flag updates
- Cohort sync endpoints with hourly refresh cycles
- Assignment event tracking APIs with 24-hour deduplication

The Evaluation Proxy exposes HTTP evaluation endpoints on port 3546 and supports stateless load balancer deployment for high-availability scenarios.