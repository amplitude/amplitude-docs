# Amplitude Experiment: Feature Flag and Experimentation Platform

## Product Overview

Amplitude Experiment is a comprehensive feature flag and experimentation platform that enables developers to implement feature flags, conduct A/B tests, and manage experiments across various platforms and environments. The platform supports both client-side and server-side implementations through a suite of SDKs for multiple programming languages and frameworks.

Key features of Amplitude Experiment include:

- **Feature Flag Management**: Control feature rollouts and experiments with configurable flags
- **Dual Evaluation Methods**: 
  - Remote evaluation for client-side applications
  - Local evaluation for server-side applications with performance-critical needs
- **Exposure Tracking**: Automatic tracking of feature flag exposures for analytics
- **Cohort Targeting**: Target specific user segments with features or experiments
- **Integration with Analytics**: Seamless integration with Amplitude Analytics and third-party providers
- **Account-level Bucketing**: Consistent user experiences across platforms

## Product Relationships and Architecture

Amplitude Experiment consists of several interconnected components:

1. **SDK Ecosystem**: Language-specific SDKs for client and server implementations
   - Client-side: JavaScript, React Native, iOS (Swift), Android
   - Server-side: Node.js, JVM (Java/Kotlin), Python, Ruby, PHP, Go

2. **Evaluation Proxy**: A service that enables local evaluation within your infrastructure, particularly useful for platforms without native SDKs or for enhancing evaluation with large cohort targeting.

3. **Integration Layer**: Connects with Amplitude Analytics or third-party analytics providers for tracking exposures and experiment results.

The platform follows a consistent pattern across SDKs:
- Initialize a client with configuration options
- Fetch or evaluate variants for users
- Access flag values in application code
- Track exposures automatically or manually

## Key Nomenclature and Definitions

- **Feature Flag**: A toggle that enables or disables features in an application
- **Variant**: A specific version or configuration of a feature flag
- **Remote Evaluation**: Server-side determination of which variant a user should receive, with results delivered to the client
- **Local Evaluation**: Client-side or server-side determination of variants using downloaded flag configurations
- **ExperimentUser**: Object containing user properties used for targeting and bucketing
- **ExperimentConfig**: Configuration options for the Experiment client
- **Deployment Key**: API key used to authenticate with Amplitude Experiment services
- **Bootstrapping**: Pre-loading flag configurations for faster initial evaluation
- **Exposure**: Event recorded when a user encounters a feature flag
- **Cohort Targeting**: Targeting specific user segments based on properties or behaviors
- **Flag Streaming**: Real-time updates to flag configurations without requiring a new fetch
- **Assignment Tracking**: Recording which variant a user was assigned for analytics purposes

## Integration with Amplitude Ecosystem

Amplitude Experiment integrates with the broader Amplitude product ecosystem:

1. **Amplitude Analytics**: Automatic exposure tracking when integrated with Amplitude Analytics SDKs
2. **Amplitude Cohorts**: Targeting experiment variants to specific user segments defined in Amplitude
3. **Amplitude Dashboard**: Analyzing experiment results and feature flag performance

The platform supports EU data residency requirements through server zone configuration options in the SDKs.

## API Endpoints and Implementation Details

### Common SDK Methods

Most SDKs implement these core methods with language-specific variations:

- **Initialization**:
  ```
  initialize(apiKey, config)
  ```

- **Remote Evaluation**:
  ```
  fetch(user)
  variant(flagKey, defaultValue)
  ```

- **Local Evaluation**:
  ```
  fetchEvaluationConfigs()
  evaluate(user, flagKey, defaultValue)
  ```

- **Exposure Tracking**:
  ```
  exposure(flagKey, variant)
  ```

### Evaluation Proxy API

The Evaluation Proxy exposes endpoints for:
- `/v1/evaluate` - Evaluate a user against all flags
- `/v1/evaluate/:flagKey` - Evaluate a user against a specific flag

### Configuration Options

Common configuration parameters across SDKs:
- `serverUrl`: Custom server endpoint
- `serverZone`: Region selection (US or EU)
- `fetchTimeoutMillis`: Timeout for network requests
- `retryBackoff`: Retry configuration for failed requests
- `debug`: Enable debug logging

## Deployment Options

- **Client SDKs**: Integrated directly into applications
- **Server SDKs**: Deployed as part of server applications
- **Evaluation Proxy**: Deployed via Docker or Kubernetes with Redis recommended for persistent storage

The Evaluation Proxy can be configured via YAML configuration files or environment variables, making it suitable for various deployment environments.