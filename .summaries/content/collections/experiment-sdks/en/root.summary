# Amplitude Experiment: Feature Flag and Experimentation Platform

## Product Overview

Amplitude Experiment is a comprehensive feature flag and experimentation platform that enables developers to implement feature flags, run A/B tests, and manage experiments across various platforms and environments. The platform supports both client-side and server-side implementations through a suite of SDKs for multiple programming languages and frameworks.

Key features of Amplitude Experiment include:
- Remote and local evaluation of feature flags
- User targeting and segmentation
- Cohort targeting for advanced user segmentation
- Automatic exposure tracking
- Integration with Amplitude Analytics
- Support for EU data residency
- Account-level bucketing for B2B applications
- Flag streaming for real-time updates

Primary use cases include:
- Feature flag management for controlled rollouts
- A/B testing and experimentation
- Personalization based on user attributes
- Feature targeting to specific user segments
- Safely deploying new features with kill switches

## Product Relationships and Architecture

Amplitude Experiment consists of several interconnected components:

1. **Client-side SDKs**: JavaScript, iOS, Android, and React Native SDKs for implementing feature flags in client applications.

2. **Server-side SDKs**: Node.js, Python, Ruby, Go, JVM (Java/Kotlin), and PHP SDKs for server-side implementation.

3. **Evaluation Proxy**: A service that enables local evaluation within your infrastructure, particularly useful for platforms without native SDKs.

4. **Amplitude Analytics Integration**: Tight integration with Amplitude Analytics for tracking user behavior and experiment results.

The platform supports two primary evaluation methods:

- **Remote Evaluation**: Flags are evaluated on Amplitude's servers, which is simpler to implement but requires a network request for each evaluation.
- **Local Evaluation**: Flag configurations are downloaded to the client/server, and evaluations happen locally, providing better performance and offline capabilities.

## Key Nomenclature and Definitions

- **Variant**: A specific version or treatment in an experiment that a user can be assigned to.
- **ExperimentUser**: An object representing a user with properties used for targeting and bucketing.
- **ExperimentConfig/ExperimentClient**: The main client object used to initialize and interact with the SDK.
- **Exposure/Assignment**: When a user is shown a specific variant of a feature flag.
- **Deployment Key**: A key used to authenticate the SDK with Amplitude's services.
- **Flag Configuration**: The complete set of rules that define how users are assigned to variants.
- **Bootstrapping**: The process of initializing the SDK with pre-fetched flag configurations.
- **User Provider**: A mechanism to supply user information to the SDK for evaluation.
- **Cohort Targeting**: The ability to target users based on membership in predefined cohorts.
- **Assignment Tracking**: Recording which variant a user was assigned to for analytics purposes.

## Integration with Amplitude Ecosystem

Amplitude Experiment integrates closely with other Amplitude products:

1. **Amplitude Analytics**: Experiment can automatically track exposures as events in Amplitude Analytics, enabling analysis of experiment results.

2. **Amplitude Cohorts**: Experiment can target users based on cohorts defined in Amplitude.

3. **Amplitude Data**: User properties and behaviors tracked in Amplitude can be used for targeting in Experiment.

The platform also supports third-party analytics providers through custom integration points in the SDKs.

## API Endpoints and SDK Methods

Common SDK methods across implementations include:

- **Initialization**:
  - `initializeRemote(apiKey, config)` - For remote evaluation
  - `initializeLocal(apiKey, config)` - For local evaluation

- **Variant Fetching**:
  - `fetch(user)` - Fetches variants for a user
  - `fetchAll()` - Fetches all variants

- **Variant Access**:
  - `variant(flagKey, defaultValue)` - Gets a specific variant
  - `all()` - Gets all variants for the current user

- **Exposure Tracking**:
  - `exposure(flagKey, variant)` - Tracks an exposure event

The Evaluation Proxy provides REST API endpoints:
- `/v1/vardata` - For fetching flag configurations
- `/sdk/v2/evaluate` - For evaluating users against flags

Configuration options common across SDKs include:
- `serverUrl` - Custom server URL
- `serverZone` - "US" or "EU" for data residency
- `fetchTimeoutMillis` - Timeout for network requests
- `retryBackoff` - Retry strategy for failed requests
- `flagConfigPollingIntervalMillis` - Interval for refreshing flag configurations

## SDK-Specific Features

- **JavaScript SDK**: Supports server-side rendering and automatic exposure tracking.
- **iOS/Android SDKs**: Provide native mobile implementations with AsyncStorage for persistence.
- **React Native SDK**: Offers cross-platform mobile support with AsyncStorage integration.
- **JVM SDK**: Supports both Java and Kotlin with flag streaming capabilities.
- **Node.js/Python/Ruby/Go/PHP SDKs**: Server-side implementations with cohort targeting and assignment tracking.
- **Evaluation Proxy**: Supports platforms without native SDKs and enhances evaluation with large cohort targeting.

Each SDK provides language-specific implementations of the core functionality while maintaining consistent behavior across platforms.