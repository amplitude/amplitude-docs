# Amplitude Experiment SDK Suite

## Product Overview

Amplitude Experiment is a feature flagging and experimentation platform that enables developers to implement feature flags, run A/B tests, and manage experiments across various platforms. The product provides SDKs for multiple programming languages and platforms, supporting both client-side and server-side implementations with two primary evaluation methods:

1. **Remote Evaluation**: Server-side evaluation where the Amplitude servers determine which variant a user should receive
2. **Local Evaluation**: Client-side evaluation where the SDK determines the variant based on downloaded flag configurations

Key features include:
- Feature flag management
- User targeting and segmentation
- Cohort targeting
- Automatic exposure tracking
- Integration with Amplitude Analytics
- Support for third-party analytics providers
- Account-level bucketing
- Flag configuration streaming and polling
- EU data residency compliance

## Product Relationships and Architecture

The Experiment SDK ecosystem consists of:

### Client-Side SDKs:
- **JavaScript**: Web applications
- **React Native**: Cross-platform mobile applications
- **iOS**: Native iOS applications (Swift)
- **Android**: Native Android applications

### Server-Side SDKs:
- **Node.js**: JavaScript server environments
- **JVM**: Java and Kotlin applications
- **Python**: Python applications
- **Ruby**: Ruby applications
- **PHP**: PHP applications
- **Go**: Go applications

### Supporting Infrastructure:
- **Experiment Evaluation Proxy**: A service that enables local evaluation within your infrastructure, particularly useful for platforms without native SDKs

The SDKs work in conjunction with the Amplitude Analytics platform, though they can also operate independently or integrate with third-party analytics providers. The client-side SDKs typically support both remote and local evaluation, while server-side SDKs are optimized for local evaluation with flag configuration polling and streaming capabilities.

## Key Nomenclature and Definitions

- **Variant**: A specific version or configuration of a feature flag
- **ExperimentUser**: Object representing a user with properties used for targeting
- **ExperimentConfig/ExperimentClient**: Configuration and client objects used to initialize the SDK
- **Deployment Key**: API key used to authenticate with Amplitude Experiment
- **Remote Evaluation**: Server-side determination of flag variants
- **Local Evaluation**: Client-side determination of flag variants using downloaded flag configurations
- **Exposure Tracking**: Recording when a user is exposed to a specific variant
- **Assignment Tracking**: Recording which variant a user is assigned to
- **Bootstrapping**: Pre-loading flag configurations for faster initial evaluation
- **Cohort Targeting**: Targeting users based on predefined cohorts
- **Flag Streaming**: Real-time updates to flag configurations
- **Flag Configuration Polling**: Periodic fetching of updated flag configurations
- **Account-level Bucketing**: Consistent variant assignment across multiple applications

## Product Ecosystem Integration

Amplitude Experiment integrates with the broader Amplitude product ecosystem:

1. **Amplitude Analytics**: Automatic integration for tracking exposures and analyzing experiment results
2. **Amplitude Cohorts**: Used for targeting specific user segments in experiments
3. **Amplitude Data**: Leverages user properties and behaviors for targeting

The SDKs can be used in various deployment scenarios:
- Client applications (web, mobile)
- Server applications
- Microservices
- Serverless functions
- Edge computing environments

For environments without a native SDK, the Evaluation Proxy provides a REST API that can be accessed from any platform.

## API Endpoints and Usage

### Common SDK Methods

Most SDKs implement these core methods:
- `initialize(apiKey, config)`: Initialize the client
- `fetch(user)`: Fetch variants for a user
- `variant(key, user, fallback)`: Get a specific variant for a user
- `all(user)`: Get all variants for a user
- `exposure(key, user)`: Track exposure to a variant

### Evaluation Proxy API

The Evaluation Proxy exposes these endpoints:
- `POST /v1/vardata`: Fetch flag configurations
- `GET /v1/flags`: Get all flag configurations
- `POST /v1/evaluate`: Evaluate flags for a user

### Configuration Options

Common configuration parameters across SDKs:
- `serverUrl`: API endpoint (supports EU data residency)
- `fetchTimeoutMillis`: Timeout for fetch requests
- `fetchRetries`: Number of retry attempts
- `fetchRetryBackoffMinMillis`/`fetchRetryBackoffMaxMillis`: Retry backoff timing
- `flagConfigPollingIntervalMillis`: Interval for polling flag configurations
- `automaticExposureTracking`: Enable/disable automatic exposure tracking

The SDKs provide a consistent developer experience across platforms while accommodating platform-specific requirements and best practices.