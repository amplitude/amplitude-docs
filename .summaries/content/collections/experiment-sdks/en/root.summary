## Amplitude Experiment SDK Suite

Amplitude Experiment is a comprehensive feature flagging and experimentation platform that provides SDKs across multiple programming languages and platforms for both client-side and server-side implementations. The platform enables A/B testing, feature rollouts, and dynamic configuration management through a unified experimentation framework.

## Product Architecture and Relationships

The Experiment SDK ecosystem consists of three primary evaluation modes:

**Remote Evaluation**: SDKs fetch pre-computed variant assignments from Amplitude's servers via API calls. This approach is typically used for client-side implementations where flag logic evaluation happens server-side, reducing client complexity and ensuring consistent bucketing.

**Local Evaluation**: SDKs download flag configurations and perform evaluation logic locally. This server-side approach offers lower latency and reduced API dependency, with automatic flag config polling/streaming and cohort synchronization capabilities.

**Evaluation Proxy**: A Docker-based service that enables local evaluation on unsupported platforms, providing assignment event deduplication and cohort targeting capabilities.

The SDKs are categorized into client-side implementations (Android, iOS, JavaScript, React Native) and server-side implementations (Go, JVM, Node.js, PHP, Python, Ruby), with the Evaluation Proxy serving as a bridge solution.

## Key Nomenclature and Definitions

**Deployment Key**: Authentication credential used to initialize SDK clients and associate them with specific Amplitude projects and environments.

**Variants**: The different experiences or configurations returned by feature flags, containing key-value payload data that applications use to modify behavior.

**ExperimentUser**: User context object containing identifiers (user_id, device_id), properties (user_properties, group_properties), and group memberships used for flag evaluation and bucketing.

**Flag Configurations**: Server-side definitions of feature flags including targeting rules, allocation percentages, and variant definitions that determine user bucketing.

**Exposure Tracking**: Automatic or manual event logging when users are exposed to flag variants, enabling experiment analysis and statistical significance calculations.

**Cohort Targeting**: Advanced targeting capability that allows flags to target users based on behavioral cohorts defined in Amplitude Analytics, with periodic synchronization.

**Bootstrapping**: Initialization technique using `initialVariants` or `initialFlags` to provide immediate flag values before remote fetching completes, often used for server-side rendering scenarios.

## Broader Product Ecosystem Integration

Amplitude Experiment integrates deeply with the Amplitude Analytics ecosystem through several mechanisms:

**Amplitude Analytics SDK Integration**: Client-side SDKs offer `initializeWithAmplitudeAnalytics()` methods that automatically share user context and device IDs between analytics and experimentation, ensuring consistent user identification.

**Third-Party Analytics Support**: SDKs provide integration interfaces for Segment, mParticle, and other analytics platforms through `ExposureTrackingProvider` interfaces, enabling experiment data collection in existing analytics stacks.

**Amplitude Cookie Integration**: Server-side SDKs include `AmplitudeCookie` utilities for parsing device IDs from Amplitude Analytics cookies, maintaining user identity consistency across client and server implementations.

**Account-Level Analysis**: Support for group-level bucketing with account-level analysis, enabling B2B experimentation scenarios where decisions are made at organization levels.

## API Endpoints and Key Methods

**Client-Side SDKs** (Android, iOS, JavaScript, React Native):
- `fetch()`: Remote evaluation method that retrieves pre-computed variants
- `start()`: Local evaluation initialization with flag config download
- `variant(flagKey)`: Access variant for specific flag with automatic exposure tracking
- `exposure(flagKey, variant)`: Manual exposure event tracking
- `clear()`: Clear cached variants and reset client state

**Server-Side SDKs** (Go, JVM, Node.js, PHP, Python, Ruby):
- `fetch()` / `fetchV2()`: Remote evaluation variant retrieval
- `evaluate()` / `evaluateV2()`: Local evaluation with flag configs
- `start()`: Initialize local evaluation client with config polling
- `refreshFlagConfigs()`: Manual flag configuration refresh

**Evaluation Proxy**:
- Docker deployment: `amplitudeinc/evaluation-proxy`
- HTTP endpoints on port 3546 for evaluation requests
- Redis integration for persistent storage and deduplication

## Configuration and Deployment Options

**Server Zones**: Support for EU data residency through `ServerZone.EU` configuration, with separate `serverUrl` and `cohortServerUrl` endpoints.

**Polling and Streaming**: Configurable flag config updates via `flagConfigPollingIntervalMillis` or real-time `streamUpdates` for immediate flag changes.

**Timeout and Retry**: Comprehensive timeout (`fetchTimeoutMillis`) and retry (`fetchRetries`) configuration for robust network handling.

**Cohort Sync**: Advanced targeting through `CohortSyncConfig` with `maxCohortSize` limits and hourly synchronization intervals.

**Assignment Tracking**: Automatic experiment exposure logging through `AssignmentConfig` with 24-hour deduplication and configurable tracking providers.

The SDK suite provides comprehensive language coverage with consistent APIs, enabling organizations to implement experimentation across their entire technology stack while maintaining unified user experiences and reliable data collection.