## Amplitude iOS SDK Product Suite

The Amplitude iOS SDK ecosystem consists of multiple interconnected SDKs and tools designed to provide comprehensive analytics, experimentation, and user behavior tracking for iOS applications. The suite includes both legacy and modern implementations, with a clear migration path and unified approach to mobile analytics.

## Product Relationships and Architecture

### Core SDK Evolution
The product suite represents an evolution from the legacy **Amplitude-iOS SDK** (maintenance mode) to the modern **Amplitude-Swift SDK**, with the **Unified SDK** serving as the comprehensive wrapper solution. The migration path is clearly defined, moving from the older instance-based pattern to a modern plugin architecture.

### SDK Hierarchy
- **Amplitude-Swift SDK**: The foundational modern analytics SDK with plugin architecture
- **Unified SDK (Beta)**: Wrapper combining Analytics, Experiment, and Session Replay SDKs
- **Ampli Wrapper**: Code generation layer providing strongly-typed event tracking
- **Legacy iOS SDK**: Maintenance-mode predecessor with middleware architecture

### Integration Patterns
All SDKs support multiple installation methods (CocoaPods, Swift Package Manager, Carthage) and provide both Swift and Objective-C compatibility, though with varying levels of feature support across platforms (iOS, macOS, tvOS, watchOS, visionOS).

## Key Nomenclature and Definitions

### Core Concepts
- **Plugin Architecture**: Modern extensible system replacing middleware, supporting enrichment and destination plugins
- **Autocapture**: Automated tracking of sessions, app lifecycles, screen views, network requests, and user interactions
- **Tracking Plan**: Schema definition used by Ampli to generate strongly-typed event methods
- **Instance Pattern**: Legacy SDK approach using singleton instances, replaced by direct initialization

### Configuration Objects
- **Configuration**: Main SDK setup object with properties like `apiKey`, `flushQueueSize`, `minTimeBetweenSessionsMillis`
- **AutocaptureOptions**: Controls automatic event collection including sessions, screen views, element interactions
- **TrackingOptions**: Privacy controls for disabling collection of IP addresses, city data, carrier information
- **LoadOptions**: Ampli-specific configuration for wrapper initialization

### Event and User Management
- **BaseEvent**: Foundation event structure in modern SDK
- **AMPIdentify/Identify**: User property management with operations like `set`, `setOnce`, `add`, `remove`
- **Revenue**: Specialized event type for transaction tracking
- **Group Operations**: Multi-tenant user organization with `setGroup`, `groupIdentify`

### Privacy and Compliance
- **COPPA Control**: Children's privacy compliance features
- **Apple Privacy Manifest**: iOS privacy declaration requirements
- **IDFA/IDFV**: Device identifier management with privacy considerations
- **SSL Pinning**: Enhanced security for data transmission

## Broader Product Ecosystem Integration

### Amplitude Platform Integration
The iOS SDKs integrate with the broader Amplitude ecosystem through:
- **HTTP v2 API**: Modern endpoint for event ingestion with improved performance
- **EU Data Residency**: Regional data storage compliance via `setServerZone`
- **Remote Configuration**: Dynamic SDK behavior modification without app updates
- **Tracking Plans**: Schema management integration with Ampli code generation

### Cross-Product Synchronization
The Unified SDK demonstrates the ecosystem's maturation by automatically synchronizing:
- User and device identities across Analytics, Experiment, and Session Replay
- Configuration settings and privacy controls
- Session management and user properties caching

### Development Workflow Integration
- **Ampli CLI**: Command-line tool for pulling tracking plans and generating typed code (`ampli pull`, `ampli status`)
- **NPM Package**: `@amplitude/ampli` for development workflow integration
- **Migration Tools**: `migrateLegacyData` function for seamless SDK transitions

## API Endpoints and Command Line Interface

### CLI Commands
- `ampli pull`: Downloads tracking plan and generates strongly-typed wrapper code
- `ampli status`: Verifies implementation against tracking plan requirements

### Key API Methods
**Core Tracking Methods:**
- `track()`: Event logging with properties and options
- `identify()`: User property management
- `setUserId()`, `setDeviceId()`: Identity management
- `flush()`: Force event upload
- `setGroup()`: Multi-tenant user assignment

**Advanced Features:**
- `logRevenueV2()`: Revenue event tracking
- `setOptOut()`: Privacy compliance controls
- `regenerateDeviceId()`: Identity reset functionality

**Unified SDK Specific:**
- `amplitude.experiment.fetch()`: Feature flag retrieval
- `amplitude.experiment.variant()`: Experiment variation access
- `amplitude.sessionReplay.startRecording()`: Session capture initiation

### Configuration APIs
The SDKs expose extensive configuration through initialization objects, supporting runtime behavior modification, privacy controls, and performance tuning through properties like `eventUploadThreshold`, `eventUploadPeriodSeconds`, and various autocapture settings.