## Amplitude iOS SDK Product Suite

The Amplitude iOS SDK ecosystem consists of multiple interconnected SDKs and tools designed to provide comprehensive analytics, experimentation, and user behavior tracking capabilities for iOS applications. The suite includes both legacy and modern implementations, with a clear migration path and unified development experience.

## Product Architecture and Relationships

### Core SDK Components

**iOS Swift SDK (AmplitudeSwift)** serves as the modern, actively developed analytics foundation built with Swift-first architecture. It replaces the legacy **iOS SDK (Amplitude-iOS)** which is now in maintenance mode. The Swift SDK introduces a plugin-based architecture that enables modular functionality and extensibility.

**Ampli Wrapper** provides a code-generation layer that sits on top of the iOS Swift SDK, creating strongly-typed event tracking methods from Amplitude tracking plans. This ensures type safety and reduces implementation errors by generating Swift and Objective-C interfaces directly from your analytics schema.

**Unified SDK (AmplitudeUnified)** acts as a comprehensive wrapper that combines Analytics SDK (AmplitudeSwift), Experiment SDK, and Session Replay SDK under a single interface with unified identity management and simplified configuration.

### Integration Patterns

All SDKs support multiple installation methods including CocoaPods, Swift Package Manager, and Carthage. The architecture follows a consistent pattern of configuration objects, plugin systems, and event-driven APIs across the suite.

## Key Nomenclature and Definitions

### Core Concepts

- **Tracking Plans**: Schema definitions that specify event structures and properties, used by Ampli to generate type-safe code
- **Plugins**: Modular components in the Swift SDK architecture that handle enrichment, destination, or utility functions (PluginType)
- **Autocapture**: Automated tracking of user interactions including sessions, app lifecycles, screen views, element interactions, and network requests
- **Middleware**: Legacy architecture pattern in the maintenance SDK, replaced by plugins in the Swift SDK

### Configuration Elements

- **Configuration Objects**: Centralized settings including API keys, instanceName, storageProvider, logLevel, flushIntervalMillis
- **TrackingOptions**: COPPA-compliant controls for disabling specific data collection (IDFA, carrier, location)
- **DefaultTracking**: Automated collection settings for sessions, appLifecycles, screenViews, deepLinks

### Event Management

- **track()**: Primary event logging method (replaces legacy logEvent)
- **identify()**: User property management using AMPIdentify class patterns
- **Revenue Tracking**: Specialized event type using AMPRevenue class for purchase analytics
- **Group Analytics**: Multi-entity tracking with setGroup, groupIdentify, and groupType parameters

## Product Ecosystem Integration

### Data Pipeline Architecture

The SDKs integrate with Amplitude's broader analytics platform through HTTP v2 API (Swift SDK) and HTTP v1 API (legacy SDK). Events flow through configurable flush mechanisms with batch processing capabilities controlled by eventUploadThreshold and eventUploadPeriodSeconds parameters.

### Identity Management

Unified identity management spans user identification (setUserId), device tracking (setDeviceId, IDFV, UUID), and session management (minTimeBetweenSessionsMillis, sessionId). The system supports cross-platform identity resolution and user property synchronization.

### Privacy and Compliance

Apple privacy manifest integration (NSPrivacyTracking, NSPrivacyCollectedDataTypes) ensures App Store compliance. COPPA controls and TrackingOptions provide granular privacy management. EU data residency support through setServerZone configuration enables regional compliance.

## API Interfaces and Implementation

### CLI Operations
```
ampli pull [--path ./ampli]
ampli status
```

### Core SDK Methods
```swift
// Configuration and initialization
Amplitude(configuration: Configuration(apiKey: "API_KEY"))

// Event tracking
amplitude.track(eventType: "SongPlayed", eventProperties: [...])
amplitude.identify(identify: Identify())
amplitude.revenue(revenue: Revenue())

// Group analytics
amplitude.setGroup(groupType: "team", groupName: "engineering")
amplitude.groupIdentify(groupType: "team", groupName: "engineering", identify: Identify())

// Session management
amplitude.flush()
amplitude.sessionReplay.startRecording()
amplitude.sessionReplay.stopRecording()

// Experimentation
amplitude.experiment.fetch()
amplitude.experiment.variant("flag-key")
amplitude.experiment.exposure("flag-key")
```

### Migration Utilities
The migration system includes `migrateLegacyData` configuration for seamless transition from maintenance SDK to Swift SDK, with automated data transfer and API compatibility layers.

### Platform Support
Comprehensive iOS ecosystem support including tvOS, watchOS, iOS extensions, App Clips, with UIKit and SwiftUI integration patterns for modern iOS development workflows.