# Amplitude Android SDK Product Suite

The Amplitude Android SDK ecosystem is a comprehensive analytics platform for Android applications, featuring multiple SDKs and tools designed for event tracking, user analytics, and behavioral measurement. The suite includes a legacy maintenance SDK, a modern Kotlin-based SDK, and code generation tools for type-safe event tracking.

## Product Relationships and Architecture

### Core SDKs
The ecosystem centers around two primary SDKs operating in parallel:

**Legacy Android SDK** (`com.amplitude:android-sdk`) - The original maintenance-mode SDK supporting Java and Kotlin applications with traditional event logging patterns using `logEvent()` methods and JSONObject-based event properties. This SDK remains available for existing implementations but receives only critical updates.

**Android-Kotlin SDK** (`com.amplitude:analytics-android`) - The modern, actively developed SDK built specifically for Kotlin with enhanced features including plugin architecture, autocapture capabilities, and improved API design using `track()` methods. This represents the current development focus and recommended implementation path.

### Code Generation Layer
**Ampli Wrapper** - A sophisticated code generation tool that creates strongly typed APIs on top of either SDK. Ampli generates client code from Amplitude Data tracking plans, providing compile-time schema enforcement, IDE autocompletion, and runtime validation of event properties and user properties.

### Migration Infrastructure
The ecosystem includes comprehensive migration tooling to facilitate transitions from the legacy SDK to the Kotlin SDK, featuring automatic data migration via `migrateLegacyData` configuration, API mapping documentation, and compatibility layers to minimize implementation changes.

## Key Nomenclature and Definitions

### Event Tracking Methods
- **track()** - Primary method for logging events in the Kotlin SDK, accepting event names and property objects
- **logEvent()** - Legacy method for event logging in the maintenance SDK using JSONObject parameters
- **identify()** - Method for setting user properties and user identification, supporting both individual properties and batch updates
- **groupIdentify()** - Method for setting group-level properties and managing group-based analytics
- **revenue()** - Specialized tracking for revenue events with Google Play Store receipt verification

### Configuration Management
- **flushQueueSize/flushIntervalMillis** - Batch processing controls determining when events are transmitted to Amplitude servers
- **TrackingOptions** - Configuration object for granularly disabling specific automatic data collection (ADID, location, etc.)
- **LoadOptions/LoadClientOptions** - Ampli-specific configuration objects for SDK initialization and runtime behavior
- **EventOptions** - Per-event configuration including destination routing, user/device ID overrides, and insertion timestamps

### Architecture Components
- **Plugin System** - Extensible architecture supporting enrichment plugins (data transformation) and destination plugins (event routing)
- **DestinationPlugin** - Plugins that route events to specific endpoints or external systems
- **MiddlewarePayload** - Data structure containing event information passed through the plugin processing pipeline
- **Autocapture** - Automatic tracking capabilities including sessions, app lifecycles, screen views, and user interactions

### Identity and Device Management
- **deviceId** - Unique device identifier with support for App Set ID, custom UUIDs, or Amplitude-generated IDs
- **ADID** - Advertising ID tracking with privacy controls and opt-out mechanisms
- **sessionTimeoutMillis** - Configuration determining session boundary detection and automatic session management
- **groupType/groupName** - Group-based analytics organization for account-level or organizational tracking

## Broader Product Ecosystem Integration

### Amplitude Platform Components
**Amplitude Data** - The centralized tracking plan management system that defines event schemas, property types, and validation rules used by Ampli for code generation and runtime validation.

**Amplitude HTTP v2 API** - The backend ingestion endpoint receiving events from both SDKs, supporting batch uploads, real-time processing, and EU data residency through server zone configuration.

**Amplitude Analytics Dashboard** - The web-based analytics platform where tracked events are processed, analyzed, and visualized for business intelligence and user behavior analysis.

### External Integrations
**Google Play Store Integration** - Revenue verification system validating in-app purchase events through `logRevenueV2` methods, supporting receipt validation and fraud prevention.

**Network Infrastructure** - Integration with OkHTTP for network requests, offline mode support with automatic retry mechanisms, network state monitoring, and SSL certificate pinning through `PinnedAmplitudeClient`.

**Android Platform Services** - Deep integration with Android lifecycle management, foreground/background detection, network connectivity monitoring, and system-level event capture.

## API Endpoints and CLI Commands

### Ampli CLI Commands
- `ampli pull` - Downloads the latest tracking plan from Amplitude Data and generates strongly-typed client code
- `ampli status` - Validates local implementation against the remote tracking plan schema, identifying missing or modified events
- `ampli install` - Sets up Ampli configuration and dependencies for a project
- `ampli check` - Performs static analysis of tracking implementation for compliance with tracking plans

### SDK Configuration Methods
- `setServerZone(ServerZone.EU)` - Configure EU data residency for GDPR compliance
- `enableForegroundTracking()` - Enable automatic session management and app lifecycle tracking
- `enableCoppaControl()` - Enable COPPA compliance mode with restricted data collection
- `enableLocationListening()` - Enable automatic location tracking with GPS coordinates
- `setOffline(boolean)` - Control offline mode behavior and event queuing
- `setUseDynamicConfig()` - Enable dynamic configuration updates from Amplitude servers

### Event Tracking APIs
- `amplitude.track("Event Name", properties)` - Modern SDK event tracking
- `amplitude.logEvent("Event Name", properties)` - Legacy SDK event tracking  
- `amplitude.identify(identify)` - User property management
- `amplitude.setGroup("groupType", "groupName")` - Group assignment
- `amplitude.revenue(revenue)` - Revenue event tracking with verification

### Package Dependencies and Integration
- **Legacy Package**: `com.amplitude:android-sdk` distributed via Maven Central
- **Modern Package**: `com.amplitude:analytics-android` distributed via Maven Central
- **Network Dependency**: OkHTTP library required for network operations and SSL handling
- **Manifest Integration**: AndroidManifest.xml permissions for network access, location services, and device state
- **Build Configuration**: ProGuard/R8 rules for code obfuscation compatibility and reflection preservation

The ecosystem supports advanced implementation patterns including Jetpack Compose element tracking, custom plugin development, comprehensive privacy controls through COPPA compliance, granular tracking options, and enterprise-grade features like SSL pinning and custom server endpoints.