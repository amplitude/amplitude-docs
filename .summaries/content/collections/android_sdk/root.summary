# Amplitude Android SDK

## Product Overview

Amplitude's Android SDK provides analytics tracking solutions for Android applications through two main variants:

1. **Android-Kotlin SDK** (`com.amplitude:analytics-android`) - The current, actively developed SDK with modern features and a plugin-based architecture.
2. **Android SDK** (`com.amplitude:android-sdk`) - The legacy SDK in maintenance mode, not actively developed.

Amplitude also offers the **Ampli Wrapper** for both SDKs, generating type-safe code based on tracking plans defined in Amplitude Data.

## Key Features

- **Event Tracking**: Record user actions and behaviors
- **User Identification**: Associate events with specific users
- **Session Management**: Track user engagement sessions
- **Revenue Tracking**: Monitor in-app purchases
- **Group Analytics**: Analyze user behavior within organizational groups
- **Offline Mode**: Queue events when offline for later transmission
- **Autocapture**: Automatically track element interactions, screen views, app lifecycle events, and deep links
- **Plugin Architecture**: Extend functionality through custom plugins
- **EU Data Residency**: Option to route data to EU servers
- **COPPA Compliance**: Controls for children's privacy protection
- **Device ID Management**: Options for device identification

## Product Relationships and Architecture

### SDK Hierarchy

The **Android-Kotlin SDK** is the recommended implementation that:
- Supports both Kotlin and Java
- Features a plugin-based architecture for extensibility
- Provides enhanced autocapture capabilities
- Offers improved configuration options

The **Android SDK (Legacy)** is a maintenance-only implementation that:
- Remains functional but receives no new features
- Is compatible with both Java and Kotlin
- Is being phased out in favor of the Android-Kotlin SDK

The **Ampli Wrapper** serves as a code generation layer that:
- Works with both SDK variants
- Provides a type-safe API based on tracking plans
- Enforces event schemas to prevent instrumentation errors

### Integration with Amplitude Ecosystem

The Android SDK integrates with:
- **Amplitude Data** for tracking plan management
- **Amplitude HTTP V2 API** for event transmission
- Amplitude's analytics dashboard for visualization and analysis

## Key Nomenclature and Definitions

- **Tracking Plan**: Schema defining expected events and their properties
- **Event**: User action or occurrence being tracked (e.g., button click, page view)
- **User Properties**: Attributes associated with a user (e.g., name, email)
- **Device ID**: Unique identifier for a device
- **User ID**: Custom identifier for a user, typically from your authentication system
- **Session**: Period of continuous user engagement with the app
- **Group**: Organization or collection of users (e.g., company, team)
- **Plugin**: Modular component extending SDK functionality
- **Middleware**: Components that intercept and modify events before processing
- **Flush**: Process of sending queued events to Amplitude servers

## API and Implementation Details

### Android-Kotlin SDK

**Initialization:**
```kotlin
val amplitude = Amplitude(
    Configuration(
        apiKey = "YOUR-API-KEY",
        context = applicationContext
    )
)
```

**Key Methods:**
- `track(event)`: Record an event
- `identify(identify)`: Set or update user properties
- `setUserId(userId)`: Identify a user
- `flush()`: Send queued events immediately
- `groupIdentify(groupType, groupName, identify)`: Set group properties
- `setGroup(groupType, groupName)`: Associate user with a group

### Ampli Wrapper

**Initialization:**
```kotlin
ampli.load(Ampli.LoadOptions()
    .client(amplitude)
)
```

**Key Methods:**
- `ampli.identify(userId, identifyObj)`: Identify users with strongly-typed properties
- `ampli.track(EventObj)`: Track strongly-typed events
- `ampli.flush()`: Send events immediately
- `ampli.groupIdentify()`: Set group properties with type safety

### CLI Commands for Ampli

- `ampli pull`: Pull the latest tracking plan
- `ampli status`: Check tracking plan implementation status

## Migration Path

When migrating from the legacy Android SDK to the Android-Kotlin SDK:

1. Update dependencies from `com.amplitude:android-sdk` to `com.amplitude:analytics-android`
2. Replace initialization code with the new Configuration object
3. Update method calls:
   - `logEvent()` → `track()`
   - `uploadEvents()` → `flush()`
   - `setUserProperties()` → `identify()`
4. Adapt to the new plugin architecture for custom functionality
5. Review storage provider implementation for data migration

The Android-Kotlin SDK maintains backward compatibility for most core functionality while providing a more modern, extensible architecture.