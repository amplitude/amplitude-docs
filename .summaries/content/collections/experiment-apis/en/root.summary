# Amplitude Experiment API Suite

## Product Overview

Amplitude Experiment is a feature experimentation and feature flag management platform that enables teams to test new features, control feature rollouts, and make data-driven decisions. The platform provides a comprehensive set of APIs for managing experiments, feature flags, deployments, and related configurations programmatically.

### Key Features

1. **Remote Evaluation** - Retrieve variant assignments for users via REST API
2. **Feature Flag Management** - Create and manage feature flags with variants and targeting rules
3. **Experiment Management** - Design and deploy A/B tests with precise user targeting
4. **Deployment Configuration** - Manage client and server deployments across environments
5. **Mutex Groups** - Control experiment traffic allocation and prevent users from participating in multiple experiments simultaneously
6. **Holdout Groups** - Exclude specific user segments from experiments
7. **Version History** - Track changes to experiments and flags over time

## Product Relationships and Architecture

The Amplitude Experiment ecosystem consists of several interconnected components:

1. **Experiment Management API** - Core API for creating and managing all experiment resources
   - Flag Endpoints - Manage feature flags
   - Experiment Endpoints - Manage A/B tests
   - Deployment Endpoints - Manage environments
   - Mutex Group Endpoints - Manage experiment traffic allocation
   - Holdout Group Endpoints - Manage experiment exclusions
   - Version Endpoints - Track configuration history

2. **Experiment Evaluation API** - Runtime API for determining which variant a user should receive
   - Provides variant assignments based on user context
   - Supports CDN caching for performance optimization
   - Tracks assignment events by default

3. **Deployment Types**
   - Client-side deployments - For web and mobile applications
   - Server-side deployments - For backend services

## Key Nomenclature and Definitions

- **Flag**: A feature toggle that can be turned on/off or have multiple variants
- **Experiment**: A controlled test comparing different variants of a feature
- **Variant**: A specific version or implementation of a feature being tested
- **Deployment**: An environment where flags and experiments are evaluated (e.g., production, staging)
- **Deployment Key**: Unique identifier for a deployment used in API calls
- **Mutex Group**: A mechanism to ensure users are only included in one experiment at a time
- **Holdout Group**: A segment of users excluded from specific experiments
- **Bucketing**: The process of assigning users to variants based on configuration
- **Bucketing Key**: The user property used to determine variant assignment
- **Evaluation Mode**: Determines how variants are assigned (local or remote)
- **Individual Inclusion/Exclusion**: Explicit targeting of specific users for variant assignment
- **Targeting Segments**: Rules that determine which users are eligible for an experiment
- **Rollout Percentage**: The portion of eligible users who receive a variant

## Integration with Broader Amplitude Ecosystem

Amplitude Experiment integrates with the broader Amplitude Analytics platform, allowing:

1. Analysis of experiment results using Amplitude Analytics
2. User targeting based on behavioral data collected in Amplitude
3. Consistent user identification across experimentation and analytics
4. Data-driven decision making based on experiment outcomes

## API Endpoints and Usage

### Experiment Evaluation API

```
GET /api/2/variantAssignments
```

Parameters:
- `flag_keys` - List of flag keys to evaluate
- `user_id` - User identifier
- `device_id` - Device identifier
- `user_properties` - Additional user context
- `context` - Environment context

Headers:
- `Authorization: Api-Key {deployment_key}`
- `X-Amp-Exp-Track: false` (optional, to disable tracking)

### Experiment Management API

Base URL: `https://management-api.experiment.amplitude.com`

Regional endpoints:
- EU: `https://management-api.eu.experiment.amplitude.com`

Authentication:
- `Authorization: Bearer {management_api_key}`

Key endpoints:

**Flag Management:**
```
GET /flags
POST /flags
PATCH /flags/{id}
```

**Experiment Management:**
```
GET /experiments
POST /experiments
PATCH /experiments/{id}
```

**Deployment Management:**
```
GET /deployments
POST /deployments
PATCH /deployments/{id}
```

**Mutex Group Management:**
```
GET /mutexes
POST /mutexes
PATCH /mutexes/{id}
```

**Holdout Group Management:**
```
GET /holdouts
POST /holdouts
PATCH /holdouts/{id}
```

**Version History:**
```
GET /versions
```

All list endpoints support pagination through cursor-based pagination with `cursor` and `limit` parameters.

Rate limits apply to the Management API, with specific limits not detailed in the documentation.