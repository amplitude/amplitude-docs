# Amplitude Experiment API Suite

## Product Overview

Amplitude Experiment is a feature experimentation and feature flag management platform that allows developers and product teams to test variations, control feature rollouts, and make data-driven decisions. The platform provides a comprehensive set of APIs for managing experiments, feature flags, deployments, and related configurations programmatically.

Key features of Amplitude Experiment include:
- Remote evaluation of variant assignments
- Feature flag management
- A/B testing and experimentation
- Holdout groups for control populations
- Mutex groups for traffic allocation
- Versioning and change tracking
- User targeting and segmentation
- CDN-cacheable evaluation endpoints

## Product Architecture and Relationships

The Amplitude Experiment API suite consists of two primary API categories:

1. **Experiment Evaluation API**: A REST API for retrieving variant assignments for users in real-time, enabling client and server applications to determine which variant a user should see.

2. **Experiment Management API**: A comprehensive set of REST endpoints for creating and managing various components of the experimentation system:
   - Experiments
   - Feature Flags
   - Deployments
   - Mutex Groups
   - Holdout Groups
   - Versions

These components relate to each other in the following ways:

- **Experiments and Flags** can be assigned to **Deployments**, which represent different environments (e.g., development, staging, production)
- **Mutex Groups** control traffic allocation between multiple experiments, ensuring users aren't in multiple conflicting experiments
- **Holdout Groups** allow for control populations to be excluded from experiments
- All changes to configurations are tracked through **Versions**
- Both experiments and flags can have **Variants** with specific payloads and rollout percentages
- User targeting is managed through **Individual Inclusions/Exclusions** and **Targeting Segments**

## Key Nomenclature and Definitions

- **Deployment**: An environment where experiments or flags can be deployed, with a unique deployment key
- **Experiment**: A test comparing different variants of a feature to measure their impact
- **Feature Flag**: A toggle that enables or disables features or serves different variants
- **Variant**: A specific version or implementation of a feature being tested
- **Mutex Group**: A mechanism to ensure users are only included in one experiment from a set of experiments
- **Holdout Group**: A control group of users excluded from specific experiments
- **Bucketing**: The process of consistently assigning users to variants based on user properties
- **Bucketing Key**: The property used to determine variant assignment (e.g., user_id, device_id)
- **Evaluation Mode**: Determines how variant assignment decisions are made (local vs. remote)
- **Targeting Segment**: A defined group of users who meet specific criteria for inclusion in an experiment
- **Individual Inclusion/Exclusion**: Explicit lists of users to include or exclude from an experiment
- **Slot**: A portion of traffic allocated within a mutex group for a specific experiment

## Product Ecosystem Integration

Amplitude Experiment integrates with the broader Amplitude product ecosystem in several ways:

1. Experiment results can be analyzed using Amplitude Analytics
2. User properties and segments from Amplitude can be used for experiment targeting
3. The platform supports both client-side and server-side implementation patterns
4. Regional deployments align with Amplitude's global infrastructure

The API design supports both direct integration with application code and integration with CI/CD pipelines for automated feature flag and experiment management.

## API Endpoints and Usage

### Experiment Evaluation API
- `GET /api/2/variantAssignments`: Retrieves variant assignments for users
  - Required parameters: `deployment_key`, `flag_keys`, and user identifiers
  - Optional header: `X-Amp-Exp-Track: false` to disable assignment tracking

### Experiment Management API

#### Authentication
- All management API requests require an Authorization header with a management API key
- Example: `Authorization: Bearer {management-api-key}`

#### Regional Endpoints
- US: `https://management-api.experiment.amplitude.com`
- EU: `https://management-api.experiment.eu.amplitude.com`

#### Experiment Endpoints
- `GET /experiments`: List experiments
- `POST /experiments`: Create a new experiment
- `GET /experiments/{id}`: Get experiment details
- `PATCH /experiments/{id}`: Edit an experiment
- Additional endpoints for managing variants, deployments, and user inclusions

#### Flag Endpoints
- `GET /flags`: List flags
- `POST /flags`: Create a new flag
- `GET /flags/{id}`: Get flag details
- `PATCH /flags/{id}`: Edit a flag
- Additional endpoints for managing variants, deployments, and user inclusions

#### Deployment Endpoints
- `GET /deployments`: List deployments
- `POST /deployments`: Create a new deployment
- `PATCH /deployments/{id}`: Edit a deployment

#### Mutex Group Endpoints
- `GET /mutexes`: List mutex groups
- `POST /mutexes`: Create a new mutex group
- `PATCH /mutexes/{id}`: Edit a mutex group
- Additional endpoints for managing slots within mutex groups

#### Holdout Group Endpoints
- `GET /holdouts`: List holdout groups
- `POST /holdouts`: Create a new holdout group
- `PATCH /holdouts/{id}`: Edit a holdout group

#### Version Endpoints
- `GET /versions`: Retrieve version history for experiments and flags

All API endpoints support pagination through cursor-based pagination parameters and return standardized HTTP status codes to indicate success or failure.