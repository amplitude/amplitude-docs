# Amplitude Experiment API Suite

## Product Overview

Amplitude Experiment is a feature experimentation and feature flag management platform that enables developers and product teams to test variations, control feature rollouts, and make data-driven decisions. The platform provides comprehensive APIs for programmatically managing experiments, feature flags, deployments, and related configurations.

Key features include:
- Remote evaluation of variant assignments
- Feature flag management
- A/B testing and experimentation
- Holdout groups for control populations
- Mutex groups for traffic allocation
- Versioning and change tracking
- User targeting and segmentation
- CDN-cacheable evaluation endpoints

## Product Relationships and Architecture

The Amplitude Experiment API suite consists of two primary API categories:

1. **Experiment Evaluation API**: A REST API for retrieving variant assignments for users in real-time, enabling applications to determine which variant a user should see.

2. **Experiment Management API**: A comprehensive set of REST endpoints for creating and managing:
   - Experiments
   - Feature Flags
   - Deployments
   - Mutex Groups
   - Holdout Groups
   - Versions

These components relate to each other in the following ways:
- Experiments and flags are assigned to deployments (environments like dev, staging, production)
- Mutex groups control traffic allocation between multiple experiments
- Holdout groups exclude control populations from experiments
- All configuration changes are tracked through versions
- Experiments and flags can have variants with specific payloads and rollout percentages
- User targeting is managed through individual inclusions/exclusions and targeting segments

## Key Nomenclature and Definitions

- **Deployment**: An environment where experiments or flags can be deployed, with a unique deployment key
- **Experiment**: A test comparing different variants of a feature to measure impact
- **Feature Flag**: A toggle that enables/disables features or serves different variants
- **Variant**: A specific version or implementation of a feature being tested
- **Mutex Group**: Ensures users are only included in one experiment from a set of experiments
- **Holdout Group**: A control group of users excluded from specific experiments
- **Bucketing**: The process of consistently assigning users to variants based on user properties
- **Bucketing Key**: The property used to determine variant assignment (e.g., user_id, device_id)
- **Evaluation Mode**: Determines how variant assignment decisions are made (local vs. remote)
- **Targeting Segment**: A defined group of users meeting specific criteria for experiment inclusion
- **Individual Inclusion/Exclusion**: Explicit lists of users to include or exclude
- **Slot**: A portion of traffic allocated within a mutex group for a specific experiment

## Product Ecosystem Integration

Amplitude Experiment integrates with the broader Amplitude ecosystem:
1. Experiment results can be analyzed using Amplitude Analytics
2. User properties and segments from Amplitude can be used for experiment targeting
3. Supports both client-side and server-side implementation patterns
4. Regional deployments align with Amplitude's global infrastructure

The API design supports both direct integration with application code and integration with CI/CD pipelines for automated feature flag and experiment management.

## API Endpoints and Usage

### Experiment Evaluation API
- `GET /api/2/variantAssignments`: Retrieves variant assignments for users
  - Required parameters: `deployment_key`, `flag_keys`, and user identifiers
  - Optional header: `X-Amp-Exp-Track: false` to disable assignment tracking

### Experiment Management API

#### Authentication
- All management API requests require an Authorization header: `Authorization: Bearer {management-api-key}`

#### Regional Endpoints
- US: `https://management-api.experiment.amplitude.com`
- EU: `https://management-api.experiment.eu.amplitude.com`

#### Experiment Endpoints
- `GET /experiments`: List experiments
- `POST /experiments`: Create a new experiment
- `GET /experiments/{id}`: Get experiment details
- `PATCH /experiments/{id}`: Edit an experiment

#### Flag Endpoints
- `GET /flags`: List flags
- `POST /flags`: Create a new flag
- `GET /flags/{id}`: Get flag details
- `PATCH /flags/{id}`: Edit a flag

#### Deployment Endpoints
- `GET /deployments`: List deployments
- `POST /deployments`: Create a new deployment
- `PATCH /deployments/{id}`: Edit a deployment

#### Mutex Group Endpoints
- `GET /mutexes`: List mutex groups
- `POST /mutexes`: Create a new mutex group
- `PATCH /mutexes/{id}`: Edit a mutex group

#### Holdout Group Endpoints
- `GET /holdouts`: List holdout groups
- `POST /holdouts`: Create a new holdout group
- `PATCH /holdouts/{id}`: Edit a holdout group

#### Version Endpoints
- `GET /versions`: Retrieve version history for experiments and flags

All API endpoints support cursor-based pagination and return standardized HTTP status codes.