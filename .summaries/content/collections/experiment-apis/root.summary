## Amplitude Experiment Platform

Amplitude Experiment is a comprehensive feature flagging and A/B testing platform that enables organizations to manage experiments, feature flags, and traffic allocation through both evaluation and management APIs. The platform supports both remote and local evaluation modes, allowing teams to control feature rollouts, conduct experiments, and manage user targeting at scale.

## Product Architecture and Feature Relationships

The Amplitude Experiment platform consists of two primary API layers that work together to provide complete experimentation capabilities:

**Evaluation API** serves as the runtime engine, providing real-time variant assignments through the `/v1/vardata` endpoint for remote evaluation and flag configuration downloads via `/v1/flags` for local evaluation. This API uses deployment key authentication and supports regional deployments.

**Management API** provides comprehensive administrative control over the experimentation infrastructure through six core endpoint categories:
- **Flags and Experiments**: Full CRUD operations for feature flags and A/B tests with variant management, user inclusions, and deployment assignments
- **Deployments**: Environment management for assigning experiments and flags to different deployment contexts (client/server types)
- **Mutex Groups**: Traffic allocation management ensuring experiments don't interfere with each other through slot-based assignment
- **Holdout Groups**: Control group management for measuring overall experiment impact
- **Versions**: Historical tracking and configuration management for experiments and flags
- **User Management**: Bulk operations for user inclusions and exclusions

## Key Nomenclature and Definitions

**Deployment**: Environment contexts where experiments and flags are assigned, supporting both client-side and server-side evaluation types with soft delete archiving capabilities.

**Variants**: Different versions of features or experiments that users can be assigned to, with configurable payloads and rollout weights.

**Bucketing Configuration**: The mechanism for user assignment including bucketing keys (amplitude_id, device_id, user_id), salts for randomization, and percentage-based traffic allocation.

**Evaluation Modes**: 
- *Remote*: Real-time API calls for variant assignment
- *Local*: Downloaded flag configurations for client-side evaluation

**Mutex Groups**: Traffic management system using slot-based allocation to prevent experiment overlap and ensure clean traffic splitting.

**Holdout Groups**: Control populations excluded from experiments to measure overall experimentation impact, with configurable holdout percentages.

**Target Segments**: User targeting criteria and conditions that determine experiment and flag eligibility.

**Sticky Bucketing**: Ensures users remain in consistent experiment variants across sessions.

## Broader Product Ecosystem Integration

Amplitude Experiment integrates deeply with the broader Amplitude analytics ecosystem through automatic event tracking. The platform generates `[Experiment] Assignment` events when users are assigned to variants, enabling comprehensive experiment analysis within Amplitude Analytics. The `X-Amp-Exp-Track` header controls this automatic event generation.

The platform supports multi-region deployments with dedicated endpoints (`api.lab.amplitude.com` for US, `api.lab.eu.amplitude.com` for EU) ensuring data residency compliance. Authentication is handled through deployment keys for evaluation and management API keys for administrative operations.

## API Specifications and Technical Implementation

**Evaluation Endpoints**:
- `GET /v1/vardata`: Retrieves variant assignments with user context parameters (user_id, device_id, context)
- `GET /v1/flags`: Downloads flag configurations for local evaluation with flag_keys filtering

**Management Endpoints** (all under `experiment.amplitude.com`):
- `/api/1/flags/*`: Complete flag lifecycle management
- `/api/1/experiments/*`: A/B test and multi-arm bandit experiment operations  
- `/api/1/deployments/*`: Environment and deployment context management
- `/api/1/holdouts/*`: Control group configuration and management
- `/api/1/mutexs/*`: Traffic allocation and mutex group operations
- `/api/1/versions`: Historical configuration tracking

The platform implements cursor-based pagination with `nextCursor` parameters, enforces rate limiting (100 requests/second, 100k daily), and provides comprehensive HTTP status code responses for proper error handling and integration patterns.