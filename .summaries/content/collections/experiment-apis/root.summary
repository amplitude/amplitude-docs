# Amplitude Experiment

Amplitude Experiment is a comprehensive experimentation and feature flagging platform that enables product teams to test hypotheses, safely roll out features, and make data-driven decisions. The platform combines feature flag management with robust experimentation capabilities through a set of evaluation and management APIs.

## Key Features

- **Feature Flags**: Control feature visibility and behavior in production environments
- **Experiments**: Run controlled tests comparing feature variants to determine optimal performance
- **Dual Evaluation Models**: Support for both remote (server-side) and local (client-side) evaluation
- **Targeting and Segmentation**: Include or exclude specific users or segments in experiments
- **Mutex Groups**: Ensure users are only assigned to one experiment within a group
- **Holdout Groups**: Exclude users from experiments to measure overall experimentation impact
- **Versioning**: Track changes to experiments and flags over time

## Product Architecture

Amplitude Experiment is structured around two primary layers:

### Evaluation Layer
- **Remote Evaluation API**: Server-side variant assignment service
- **Flags API**: Delivers flag configurations for client-side evaluation

### Management Layer
- **Experiment Management API**: Controls creation and configuration of:
  - Flags
  - Experiments
  - Deployments
  - Mutex Groups
  - Holdout Groups
  - Versions

### Deployment Types
- **Client-side**: For web and mobile applications
- **Server-side**: For back-end services and applications

## Key Terminology

- **Variant**: A specific version of a feature being tested
- **Deployment Key**: Authentication credential for evaluation APIs
- **Management API Key**: Authentication credential for management APIs
- **Bucketing**: Process of consistently assigning users to experiment variants
- **Bucketing Key**: Identifier used to determine variant assignment
- **Bucketing Salt**: Value ensuring random distribution of users across variants
- **Evaluation Mode**: Method for assigning variants (e.g., key-based)
- **Rollout Percentage**: Controls percentage of users included in an experiment
- **User Context**: User information used for variant assignment
- **Slot**: Traffic allocation portion within a mutex group
- **Targeting Segments**: Criteria for including specific user segments

## Ecosystem Integration

Amplitude Experiment integrates with the broader Amplitude analytics ecosystem:
- Connects with Amplitude Analytics for tracking experiment results
- Offers regional deployment options (US and EU) for compliance requirements
- Provides API-first architecture for integration with development workflows
- Supports both client and server-side implementation patterns

## API Reference

### Evaluation APIs

#### Remote Evaluation API
- `POST /v1/variantAssignments`: Get variant assignments for users
  - Headers: `Authorization: Api-Key <deployment_key>`
  - Optional: `X-Amp-Exp-Track` to control assignment tracking

#### Flags API
- `GET /v1/flags`: Download flag configurations for local evaluation
  - Headers: `Authorization: Api-Key <deployment_key>`

### Management APIs

All Management API endpoints require:
- Header: `Authorization: Bearer <management_api_key>`

#### Experiment Endpoints
- `GET /experiments`: List experiments
- `POST /experiments`: Create experiment
- `PATCH /experiments/{experimentKey}`: Edit experiment
- `GET /experiments/{experimentKey}/variants`: List variants
- `POST /experiments/{experimentKey}/variants`: Create variant
- `PATCH /experiments/{experimentKey}/variants/{variantKey}`: Edit variant
- `GET /experiments/{experimentKey}/deployments`: List deployments
- `POST /experiments/{experimentKey}/deployments`: Add deployment
- `DELETE /experiments/{experimentKey}/deployments/{deploymentKey}`: Remove deployment
- `GET /experiments/{experimentKey}/inclusions`: List user inclusions
- `POST /experiments/{experimentKey}/inclusions`: Add user inclusion
- `DELETE /experiments/{experimentKey}/inclusions/{userId}`: Remove user inclusion

#### Flag Endpoints
- Similar structure to experiment endpoints, with `/flags` as the base path

#### Deployment Endpoints
- `GET /deployments`: List deployments
- `POST /deployments`: Create deployment
- `PATCH /deployments/{deploymentKey}`: Edit deployment

#### Mutex Group Endpoints
- `GET /mutexes`: List mutex groups
- `POST /mutexes`: Create mutex group
- `PATCH /mutexes/{mutexKey}`: Edit mutex group

#### Holdout Group Endpoints
- `GET /holdouts`: List holdout groups
- `POST /holdouts`: Create holdout group
- `PATCH /holdouts/{holdoutKey}`: Edit holdout group

#### Version Endpoints
- `GET /versions`: Retrieve version history

Regional API endpoints are available at:
- US: `https://api.experiment.amplitude.com`
- EU: `https://api.eu.experiment.amplitude.com`