# Amplitude Experiment API Suite

## Product Overview

Amplitude Experiment is a feature experimentation and feature flag management platform that enables teams to test new features, control feature rollouts, and make data-driven decisions. The platform provides a comprehensive set of APIs for managing experiments, feature flags, deployments, and related configurations programmatically.

The platform supports both client-side and server-side implementations, allowing teams to conduct experiments and manage feature flags across web applications, mobile apps, and backend services.

## Product Relationships and Architecture

The Amplitude Experiment ecosystem consists of two primary API components:

1. **Experiment Management API**: This core API handles the creation and management of all experiment resources including:
   - Feature flags
   - A/B test experiments
   - Deployments across environments
   - Mutex groups for traffic allocation
   - Holdout groups for experiment exclusions
   - Version history tracking

2. **Experiment Evaluation API**: This runtime API determines which variant a user should receive based on:
   - User context and properties
   - Flag configurations
   - Targeting rules
   - Bucketing algorithms

These APIs work together to provide a complete feature experimentation workflow:
- The Management API configures experiments and flags
- The Evaluation API delivers the appropriate variants to users at runtime
- Results can be analyzed through integration with Amplitude Analytics

## Key Nomenclature and Definitions

- **Flag**: A feature toggle that controls access to functionality, which can be binary (on/off) or have multiple variants.
- **Experiment**: A controlled test comparing different variants of a feature to measure impact.
- **Variant**: A specific version or implementation of a feature being tested.
- **Deployment**: An environment configuration (e.g., production, staging) where flags and experiments are evaluated.
- **Deployment Key**: A unique identifier used to authenticate API calls for a specific deployment.
- **Mutex Group**: A mechanism ensuring users are only included in one experiment at a time from a group of related experiments.
- **Holdout Group**: A segment of users excluded from specific experiments to measure overall program impact.
- **Bucketing**: The process of deterministically assigning users to variants based on configuration.
- **Bucketing Key**: The user property used to determine variant assignment, ensuring consistency.
- **Evaluation Mode**: Determines how variants are assigned:
  - Local evaluation: Performed client-side
  - Remote evaluation: Performed server-side via API
- **Targeting Segments**: Rules that determine which users are eligible for an experiment.
- **Rollout Percentage**: The portion of eligible users who receive a variant, used for gradual rollouts.

## Integration with Broader Amplitude Ecosystem

Amplitude Experiment integrates with the broader Amplitude product ecosystem in several ways:

1. **Amplitude Analytics Integration**: Experiment results can be analyzed using Amplitude Analytics to measure impact on key metrics.
2. **User Targeting**: Experiments can target users based on behavioral data collected in Amplitude.
3. **Consistent User Identification**: The platform uses the same user identification system as other Amplitude products.
4. **Data-Driven Decision Making**: The combined solution enables teams to make decisions based on quantitative experiment outcomes.

## API Endpoints and Usage

### Experiment Evaluation API

```
GET /api/2/variantAssignments
```

This endpoint retrieves variant assignments for users with the following parameters:
- `flag_keys`: List of flag keys to evaluate
- `user_id`: User identifier
- `device_id`: Device identifier
- `user_properties`: Additional user context
- `context`: Environment context

Required headers:
- `Authorization: Api-Key {deployment_key}`
- `X-Amp-Exp-Track: false` (optional, to disable tracking)

### Experiment Management API

Base URL: `https://management-api.experiment.amplitude.com`
EU Regional endpoint: `https://management-api.eu.experiment.amplitude.com`

Authentication: `Authorization: Bearer {management_api_key}`

Key endpoints include:

**Flag Management:**
```
GET /flags
POST /flags
PATCH /flags/{id}
```

**Experiment Management:**
```
GET /experiments
POST /experiments
PATCH /experiments/{id}
```

**Deployment Management:**
```
GET /deployments
POST /deployments
PATCH /deployments/{id}
```

**Mutex Group Management:**
```
GET /mutexes
POST /mutexes
PATCH /mutexes/{id}
```

**Holdout Group Management:**
```
GET /holdouts
POST /holdouts
PATCH /holdouts/{id}
```

**Version History:**
```
GET /versions
```

All list endpoints support cursor-based pagination using `cursor` and `limit` parameters. Rate limits apply to the Management API, though specific limits are not detailed in the documentation.