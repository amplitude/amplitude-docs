## Amplitude Analytics Flutter SDK

The Amplitude Analytics Flutter SDK is a comprehensive analytics solution that enables Flutter applications to track user events, behaviors, and properties across multiple platforms including iOS, Android, and web. The SDK has evolved through multiple versions, with version 4 representing the current generation using HTTP V2 API, while version 3 remains in maintenance mode as a wrapper around native platform SDKs.

## Product Relationships and Architecture

The Flutter SDK ecosystem consists of two distinct architectural approaches:

**Flutter SDK v4** operates as a native Flutter implementation utilizing the HTTP V2 API directly, providing improved performance and consistency across platforms. It requires modern development environments (Kotlin 1.9.22, Gradle 8.2) and integrates with Browser SDK 2 for web implementations.

**Flutter SDK v3** functions as a wrapper around native Android, iOS, and JavaScript SDKs, maintaining backward compatibility while being in maintenance mode. This version provides cross-platform analytics through platform-specific native implementations.

The migration path from v3 to v4 involves significant architectural changes, moving from wrapper-based implementations to direct HTTP API integration, requiring updates to dependency management, API method calls, and configuration approaches.

## Key Nomenclature and Definitions

**Core Tracking Concepts:**
- `BaseEvent`: The fundamental event structure used in v4 for all tracking operations
- `track()`: Primary event logging method in v4 (replaces `logEvent()` from v3)
- `flush()`: Method to immediately send queued events (replaces `uploadEvents()`)
- `Identify`: Class for managing user property operations across both versions

**Configuration Elements:**
- `Configuration`: Immutable configuration object in v4 replacing setter-based configuration
- `DefaultTrackingOptions`: Controls automatic tracking of sessions, app lifecycles, and deep links
- `ServerZone`: Manages data residency requirements (EU vs US)
- `minIdLength`: Minimum identifier length requirement for HTTP V2 API
- `flushQueueSize` and `flushIntervalMillis`: Batch processing controls

**User Management:**
- `userId`: User identifier for cross-session tracking
- `deviceId`: Device-specific identifier with validation requirements
- `sessionId`: Session tracking with -1 indicating out-of-session events
- `groupIdentify`: Method for managing user group properties

## Broader Product Ecosystem Integration

The Flutter SDK integrates into Amplitude's broader analytics ecosystem through several key touchpoints:

**Platform Integration:** The SDK connects with Amplitude's HTTP V2 API infrastructure, enabling real-time event processing and analytics. For web implementations, it integrates with Browser SDK 2, ensuring consistent tracking across Flutter web applications.

**Data Residency:** Through ServerZone configuration, the SDK supports Amplitude's global data residency requirements, allowing organizations to comply with regional data protection regulations by routing data to EU or US servers.

**Cross-Platform Consistency:** The v4 architecture provides unified tracking behavior across iOS, Android, and web platforms, eliminating platform-specific discrepancies that existed in the wrapper-based v3 approach.

## Technical Implementation Details

**Installation and Setup:**
- Package management through `pubspec.yaml` with `amplitude_flutter` dependency
- iOS/macOS integration via CocoaPods with minimum iOS 13.0 requirement
- Web integration requiring Browser SDK 2 snippet implementation

**Key API Methods:**
- `Amplitude.track(BaseEvent)`: Primary event tracking
- `Amplitude.identify(Identify)`: User property management  
- `Amplitude.revenue(Revenue)`: Revenue event tracking
- `Amplitude.flush()`: Force event upload
- `Amplitude.setUserId(String)`: User identification
- `Amplitude.setDeviceId(String)`: Device identification

**Configuration Options:**
- Batch processing controls via `useBatch`, `flushQueueSize`, and `flushIntervalMillis`
- Automatic tracking configuration through `DefaultTrackingOptions`
- Privacy controls including COPPA compliance and advertising ID management
- Dynamic configuration support for runtime adjustments

The SDK supports comprehensive event tracking including custom events, user properties, revenue tracking, and automatic collection of sessions, app lifecycle events, and deep link interactions, making it a complete solution for Flutter application analytics.