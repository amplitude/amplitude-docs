# Amplitude Flutter SDK Product Overview

The Amplitude Flutter SDK is a cross-platform analytics solution that enables developers to track user behavior and events in Flutter applications across iOS, Android, macOS, and web platforms. The SDK provides comprehensive event tracking capabilities, user property management, revenue tracking, and session handling.

## Product Versions and Status

- **Flutter SDK 4.0**: The current recommended version for new implementations, featuring simplified interfaces and improved functionality.
- **Flutter SDK 3.0**: In maintenance mode, still supported but not actively developed.

## Key Features

1. **Cross-Platform Support**: Works on iOS, Android, macOS, and web platforms
2. **Event Tracking**: Track user interactions and custom events
3. **User Property Management**: Set, update, and manage user properties
4. **Revenue Tracking**: Track revenue-related events
5. **Session Management**: Configure and track user sessions
6. **User Grouping**: Associate users with specific groups
7. **Batch Processing**: Configure event batching for efficient network usage
8. **EU Data Residency**: Support for EU data storage requirements
9. **Default Event Tracking**: Automatic tracking of common events
10. **Dynamic Configuration**: Runtime configuration options

## Product Relationships and Architecture

The Flutter SDK serves as a wrapper around platform-specific SDKs:
- iOS SDK
- Android SDK
- Browser SDK (for web support)

This architecture allows the Flutter SDK to provide a unified API while leveraging platform-specific capabilities. The SDK 4.0 version wraps the latest versions of these underlying SDKs.

## Key Nomenclature and Definitions

- **BaseEvent**: The fundamental event object in SDK 4.0 that represents user actions
- **DefaultTrackingOptions**: Configuration for automatic event tracking
- **identify()**: API for setting user properties
- **track()**: API for sending events to Amplitude
- **setGroup()**: API for associating users with groups
- **groupIdentify()**: API for setting group properties
- **Revenue**: Object for tracking revenue-related events
- **flush()**: Method to immediately send events to Amplitude servers
- **minIdLength**: Configuration parameter for minimum user/device ID length

## Integration and Usage

### Installation

```yaml
dependencies:
  amplitude_flutter: ^4.0.0
```

### Initialization

SDK 4.0:
```dart
import 'package:amplitude_flutter/amplitude.dart';

final amplitude = Amplitude.getInstance();
amplitude.init('API_KEY', 
  Configuration(
    defaultTracking: DefaultTrackingOptions(
      sessions: true,
      appLifecycles: true,
      deepLinks: true
    )
  )
);
```

### Event Tracking

```dart
// Basic event tracking
amplitude.track(BaseEvent('Button Clicked'));

// Event with properties
amplitude.track(BaseEvent('Product Purchased', 
  eventProperties: {'price': 10.99, 'product_id': '123'}
));
```

### User Properties

```dart
// Set user properties
amplitude.identify(Identify()
  .set('email', 'user@example.com')
  .set('plan_type', 'premium'));

// Increment properties
amplitude.identify(Identify()
  .add('login_count', 1));
```

### Revenue Tracking

```dart
amplitude.revenue(Revenue()
  .setProductId('product_id')
  .setPrice(3.99)
  .setQuantity(3));
```

## Platform-Specific Considerations

- **iOS**: Requires iOS 13.0 or higher in SDK 4.0
- **Android**: Supports Android API level requirements of the underlying Android SDK
- **Web**: Requires additional configuration for proper initialization

## Migration from 3.0 to 4.0

Key changes when migrating from SDK 3.0 to 4.0:
1. Updated initialization pattern using Configuration object
2. New BaseEvent class for event tracking
3. Default event tracking capabilities
4. Simplified interfaces for tracking and identification
5. Updated minimum platform requirements (iOS 13+)
6. Changes to batch processing configuration
7. New flush() method for immediate event sending

## API Endpoints and Methods

### Core Methods
- `getInstance()`: Get SDK instance
- `init(String apiKey, Configuration config)`: Initialize the SDK
- `track(BaseEvent event)`: Track an event
- `identify(Identify identify)`: Set user properties
- `setUserId(String userId)`: Set user ID
- `setDeviceId(String deviceId)`: Set device ID
- `logEvent(String eventType, Map<String, dynamic> eventProperties)`: Legacy method for tracking events
- `uploadEvents()`: Force upload of events
- `flush()`: Immediately send events to Amplitude

### Configuration Options
- `flushQueueSize`: Number of events to batch before sending
- `flushIntervalMillis`: Time between event uploads
- `minIdLength`: Minimum length for user/device IDs
- `serverZone`: Server location (US or EU)
- `useBatch`: Enable/disable batch processing
- `trackingSessionEvents`: Enable/disable session tracking