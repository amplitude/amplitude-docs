## Amplitude Analytics Flutter SDK

The Amplitude Analytics Flutter SDK is a comprehensive analytics solution that enables Flutter applications to track user events, behaviors, and properties across iOS, Android, and web platforms. The SDK has evolved through two major architectural generations: version 4 represents the current implementation using HTTP V2 API for direct server communication, while version 3 remains in maintenance mode as a wrapper around native platform SDKs.

## Product Relationships and Architecture

The Flutter SDK ecosystem operates through two distinct architectural approaches that serve different use cases and migration strategies:

**Flutter SDK v4** functions as a native Flutter implementation that communicates directly with Amplitude's HTTP V2 API infrastructure. This architecture provides improved performance, consistency across platforms, and eliminates platform-specific discrepancies. It requires modern development environments including Kotlin 1.9.22 and Gradle 8.2, and integrates seamlessly with Browser SDK 2 for web implementations.

**Flutter SDK v3** operates as a wrapper layer around native Android, iOS, and JavaScript SDKs, maintaining backward compatibility while being in maintenance mode. This version provides cross-platform analytics through platform-specific native implementations but lacks the performance optimizations of the newer architecture.

The migration path from v3 to v4 represents a fundamental shift from wrapper-based implementations to direct HTTP API integration, requiring updates to dependency management, API method calls, and configuration approaches.

## Key Nomenclature and Definitions

**Core Tracking Architecture:**
- `BaseEvent`: The fundamental event structure in v4 that serves as the foundation for all tracking operations
- `track()`: Primary event logging method in v4 that replaces the legacy `logEvent()` method from v3
- `flush()`: Method for immediately sending queued events to servers, replacing the previous `uploadEvents()` method
- `Identify`: Class responsible for managing user property operations across both SDK versions

**Configuration Management:**
- `Configuration`: Immutable configuration object in v4 that replaces the setter-based configuration approach
- `DefaultTrackingOptions`: Controls automatic tracking capabilities including sessions, app lifecycles, and deep link interactions
- `ServerZone`: Manages data residency requirements, supporting both EU and US server routing
- `minIdLength`: Minimum identifier length requirement enforced by the HTTP V2 API
- `flushQueueSize` and `flushIntervalMillis`: Batch processing controls that optimize network usage and performance

**User and Session Management:**
- `userId`: User identifier that enables cross-session tracking and user journey analysis
- `deviceId`: Device-specific identifier with validation requirements for consistent device tracking
- `sessionId`: Session tracking identifier where -1 indicates out-of-session events
- `groupIdentify`: Method for managing user group properties and organizational hierarchies

## Broader Product Ecosystem Integration

The Flutter SDK serves as a critical component within Amplitude's comprehensive analytics ecosystem, providing multiple integration points:

**Infrastructure Integration:** The SDK connects directly with Amplitude's HTTP V2 API infrastructure, enabling real-time event processing, analytics computation, and data pipeline integration. For web implementations, it maintains compatibility with Browser SDK 2, ensuring consistent tracking behavior across Flutter web applications.

**Data Residency and Compliance:** Through ServerZone configuration, the SDK supports Amplitude's global data residency framework, enabling organizations to comply with regional data protection regulations including GDPR by routing data to appropriate EU or US server infrastructure.

**Cross-Platform Consistency:** The v4 architecture eliminates platform-specific tracking discrepancies that existed in wrapper-based approaches, providing unified tracking behavior across iOS, Android, and web platforms while maintaining feature parity.

## Technical Implementation and API Surface

**Installation and Dependency Management:**
- Package integration through `pubspec.yaml` with `amplitude_flutter` dependency specification
- iOS/macOS integration via CocoaPods with minimum iOS 13.0 requirement
- Web platform integration requiring Browser SDK 2 snippet implementation for proper initialization

**Primary API Methods:**
- `Amplitude.track(BaseEvent)`: Core event tracking method for custom and predefined events
- `Amplitude.identify(Identify)`: User property management and user profile updates
- `Amplitude.revenue(Revenue)`: Specialized revenue event tracking with monetary value handling
- `Amplitude.flush()`: Force immediate upload of queued events to bypass batching
- `Amplitude.setUserId(String)`: User identification for cross-session tracking
- `Amplitude.setDeviceId(String)`: Device identification with validation requirements

**Advanced Configuration Options:**
- Batch processing optimization through `useBatch`, `flushQueueSize`, and `flushIntervalMillis` parameters
- Automatic tracking configuration via `DefaultTrackingOptions` for sessions, app lifecycle events, and deep link handling
- Privacy and compliance controls including COPPA compliance settings and advertising ID management
- Dynamic configuration support enabling runtime adjustments without application restarts

The SDK provides comprehensive event tracking capabilities including custom event logging, user property management, revenue tracking, and automatic collection of sessions, app lifecycle events, and deep link interactions, establishing it as a complete analytics solution for Flutter application development across all supported platforms.