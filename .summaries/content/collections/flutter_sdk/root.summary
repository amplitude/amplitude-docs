# Amplitude Analytics Flutter SDK

The Amplitude Analytics Flutter SDK is a comprehensive cross-platform analytics solution that enables Flutter applications to track user events, behaviors, and revenue across iOS, Android, web, and macOS platforms. The SDK provides robust event tracking, user identification, session management, and revenue analytics capabilities through Amplitude's analytics platform.

## Product Architecture and Version Evolution

The SDK has evolved through two major architectural paradigms:

**Flutter SDK 3.x (Legacy - Maintenance Mode)** operates as a cross-platform wrapper around native Android, iOS, and JavaScript SDKs, utilizing Dart-based implementation with platform-specific bridges and supporting traditional analytics patterns with mutable configuration.

**Flutter SDK 4.x (Current)** represents a modern implementation built on Amplitude's HTTP V2 API, featuring immutable configuration architecture, enhanced type safety through the BaseEvent system, and improved performance and reliability characteristics.

## Core Feature Set and Capabilities

### Event Tracking Architecture
The SDK implements a sophisticated event tracking system centered around `amplitude.track()` (v4) or `logEvent()` (v3) as primary tracking methods. The v4 architecture introduces the BaseEvent system, providing structured event typing with consistent event handling. The platform supports custom properties for arbitrary event attributes and user characteristics, while implementing automatic batch processing with configurable flush intervals through `flushQueueSize` and `flushIntervalMillis` parameters.

### User Management and Identification
User management encompasses comprehensive identification capabilities through `setUserId()` and `identify()` operations for user tracking, `setDeviceId()` with regeneration capabilities for device management, and dynamic user attribute management through Identify operations. The system supports user groups via `setGroup()` and `groupIdentify()` methods for cohort analytics and segmentation.

### Revenue Analytics and Monetization
Revenue tracking is implemented through dedicated `revenue()` (v4) or `logRevenue()` (v3) methods, supporting comprehensive transaction management for purchase tracking and monetization analytics across all supported platforms.

### Session Management Framework
The SDK provides automatic session lifecycle management with customizable session timeout and tracking options. It supports out-of-session events for background event tracking using `sessionId: -1`, enabling comprehensive user journey analytics.

## Technical Implementation and Platform Support

### Platform Requirements and Compatibility
- **iOS**: Minimum iOS 13.0 (v4) with CocoaPods integration
- **Android**: Kotlin 1.9.22+, Gradle 8.2+, including deep link tracking support
- **Web**: Browser SDK 2 integration with JavaScript interoperability
- **macOS**: Native support through CocoaPods integration

### Configuration Management System
Version 4 introduces immutable Configuration objects replacing traditional setter methods, supporting EU data residency through `ServerZone.eu` configuration, performance tuning via flush controls, and comprehensive tracking options through `DefaultTrackingOptions` for session and lifecycle management.

## Key API Methods and Endpoints

### Primary Tracking APIs (v4)
```dart
amplitude.track()           // Primary event tracking
amplitude.identify()        // User identification and attributes
amplitude.revenue()         // Revenue and transaction tracking
amplitude.flush()          // Manual event upload trigger
amplitude.reset()          // User session reset
```

### Legacy API Methods (v3)
```dart
logEvent()                 // Event tracking (legacy)
logRevenue()              // Revenue tracking (legacy)
uploadEvents()            // Manual upload (legacy)
```

## Key Nomenclature and Definitions

**BaseEvent**: Structured event system in v4 providing consistent event typing and validation
**ServerZone**: Geographic data residency configuration (e.g., `ServerZone.eu` for European data centers)
**Identify Operations**: User attribute management operations for dynamic property updates
**Flush Controls**: Performance optimization parameters controlling event batching and upload timing
**Out-of-Session Events**: Background events tracked with `sessionId: -1` for comprehensive analytics
**DefaultTrackingOptions**: Configuration object managing automatic session and lifecycle tracking

## Integration Within Broader Product Ecosystem

### Package Distribution and Management
The SDK is distributed through pub.dev as the `amplitude_flutter` package, with version-specific requirements managed through `pubspec.yaml` and platform-specific native SDK integration.

### Cross-Platform Integration
Browser integration utilizes `dart:js_interop` for web platforms with compatibility for `amplitude-8.12.0-min.gz.js`, ensuring unified API consistency across mobile and web implementations while maintaining platform-specific optimizations.

### Privacy and Compliance Framework
The SDK implements comprehensive privacy controls including COPPA support for children's privacy compliance, user opt-out mechanisms, iOS IDFA management, and EU server zone support for GDPR compliance requirements.

## Migration and Ecosystem Positioning

The SDK provides comprehensive migration guidance from v3 to v4, addressing breaking API changes, configuration refactoring to immutable patterns, dependency updates, and feature deprecations including removal of legacy methods like `clearUserProperties()` and `regenerateDeviceId()`.

The Flutter SDK integrates seamlessly with Amplitude's broader analytics ecosystem, providing consistent cross-platform tracking capabilities while maintaining platform-specific optimizations and native performance characteristics. This positioning enables developers to implement comprehensive analytics solutions across Flutter applications while leveraging Amplitude's full analytics platform capabilities.