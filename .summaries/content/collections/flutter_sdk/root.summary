# Amplitude Flutter SDK

## Overview
The Amplitude Flutter SDK is a cross-platform analytics solution for tracking user behavior in Flutter applications across iOS, Android, macOS, and web platforms. It provides developers with tools to monitor user interactions, manage user properties, track revenue, and handle user sessions.

## Key Features
- **Cross-platform compatibility** with iOS, Android, macOS, and web
- **Event tracking** for user actions with customizable properties
- **User identification and management** via user IDs and properties
- **Revenue tracking** for monitoring in-app purchases
- **Session management** with configurable timeout settings
- **User grouping** for organizational segmentation
- **Batch event processing** for efficient data transmission
- **EU data residency** options for compliance with regional regulations
- **COPPA compliance** controls

## Product Relationships
The Flutter SDK exists in two main versions:

1. **Flutter SDK 4.0 (Current)** - The latest version that wraps native iOS, Android, and Browser SDKs, offering improved functionality and updated APIs
2. **Flutter SDK 3.0 (Maintenance Mode)** - Previous version still supported but not actively developed; migration to 4.0 is recommended

The SDK serves as a wrapper around platform-specific SDKs, ensuring consistent behavior while leveraging native capabilities of each platform.

## Key Nomenclature and Definitions
- **BaseEvent**: Fundamental event object in SDK 4.0 containing event properties
- **Configuration object**: Used for SDK initialization with specific settings
- **track() API**: Method for sending events to Amplitude
- **identify() API**: Method for setting or modifying user properties
- **DefaultTrackingOptions**: Controls automatic event tracking
- **minIdLength**: Minimum required length for user and device IDs
- **flush()**: Method to immediately send events to Amplitude servers
- **Device ID**: Auto-generated unique identifier for a device
- **User ID**: Custom identifier for a user, typically set after login
- **Event properties**: Key-value pairs providing context for events
- **User properties**: Persistent attributes associated with a user
- **Revenue**: Tracking system for in-app purchases and monetary transactions

## Product Ecosystem Integration
The Flutter SDK integrates with the broader Amplitude Analytics ecosystem, allowing data from Flutter applications to be analyzed alongside data from other platforms. It ensures consistent analytics capabilities across different platforms while maintaining platform-specific optimizations.

## API and Implementation

### Installation
```yaml
dependencies:
  amplitude_flutter: ^4.0.0
```

### Initialization
```dart
import 'package:amplitude_flutter/amplitude.dart';

final amplitude = Amplitude.getInstance();
await amplitude.init('API_KEY');
```

### Configuration
```dart
final config = Configuration(
  apiKey: 'API_KEY',
  userId: 'user@example.com',
  euServerZone: false,
  serverZone: ServerZone.US,
  flushQueueSize: 30,
  flushIntervalMillis: 30000,
  useBatch: true,
  serverUrl: 'https://api.amplitude.com',
  minIdLength: 5
);

await amplitude.init('API_KEY', configuration: config);
```

### Event Tracking
```dart
// Basic event
amplitude.track('Button Clicked');

// Event with properties
amplitude.track('Button Clicked', 
  eventProperties: {'buttonColor': 'red', 'buttonText': 'Subscribe'});

// Using BaseEvent (SDK 4.0)
final event = BaseEvent(eventType: 'Button Clicked')
  ..eventProperties = {'buttonColor': 'red'};
amplitude.track(event);
```

### User Properties
```dart
final identify = Identify()
  ..set('email', 'user@example.com')
  ..set('name', 'John Doe')
  ..setOnce('signUpDate', '2021-01-01');
amplitude.identify(identify);
```

### Revenue Tracking
```dart
final revenue = Revenue()
  ..setProductId('product_1')
  ..setPrice(3.99)
  ..setQuantity(2);
amplitude.logRevenue(revenue);
```

### Session Management
```dart
amplitude.setSessionTimeoutMillis(30 * 60 * 1000); // 30 minutes
```

### User Groups
```dart
// Add user to groups
amplitude.setGroup('orgId', ['org_1', 'org_2']);

// Group identify
final groupIdentify = Identify()
  ..set('plan', 'enterprise');
amplitude.groupIdentify('orgId', 'org_1', groupIdentify);
```

### Event Flushing
```dart
amplitude.flush();
```