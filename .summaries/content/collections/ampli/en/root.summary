# Ampli: Type-Safe Analytics Instrumentation for Amplitude Data

Ampli is a comprehensive analytics instrumentation solution that bridges the gap between tracking plan definitions in Amplitude Data and actual code implementation. It provides developers with type-safe, validated analytics tracking capabilities that reduce errors and improve code quality when implementing analytics in applications.

## Key Features and Concepts

- **Type-safe analytics tracking**: Generates strongly-typed code that matches tracking plan definitions
- **Instrumentation verification**: Validates that implemented tracking code matches the tracking plan
- **Source control integration**: Coordinates tracking plan changes across development teams
- **CI/CD validation**: Ensures analytics implementation correctness in continuous integration pipelines
- **Progressive migration path**: Allows gradual transition from standard Amplitude SDK to Ampli

## Product Components

### Ampli CLI

The Ampli CLI is a command-line tool that serves as the primary interface for developers to interact with Amplitude Data tracking plans. Key capabilities include:

- **Tracking plan synchronization**: `ampli pull` fetches the latest tracking plan from Amplitude Data
- **Implementation verification**: `ampli status` checks if code implementation matches the tracking plan
- **Configuration management**: `ampli configure` sets up project settings stored in `ampli.json`
- **Branch coordination**: Supports working with different branches in tracking plans and source code

### Ampli Wrapper

The Ampli Wrapper is a code-generated SDK that provides:

- **Strongly-typed API**: Matches tracking plan definitions with proper type checking
- **Autocompletion support**: Helps developers use the correct event properties
- **Runtime validation**: Verifies events against the tracking plan at runtime
- **Code generation**: Creates type-safe interfaces based on tracking plan definitions

## Key Nomenclature and Definitions

- **Tracking Plan**: A schema that defines events, properties, and their types in Amplitude Data
- **ampli.json**: Configuration file that stores project settings and tracking plan information
- **Instrumentation**: The implementation of analytics tracking code in an application
- **Type-safe**: Ensuring that events and properties conform to defined types at compile time
- **Branch coordination**: Aligning branches in source control with branches in Amplitude Data

## Integration with Amplitude Ecosystem

Ampli fits into the broader Amplitude ecosystem by:

1. **Connecting with Amplitude Data**: Pulls tracking plans defined by product/analytics teams
2. **Complementing Amplitude SDKs**: Works alongside or as a replacement for standard Amplitude SDKs
3. **Supporting the analytics lifecycle**: Bridges planning (in Amplitude Data) with implementation (in code)
4. **Enabling data quality**: Ensures that collected data matches expected schemas

## API and Command Line Usage

### Key CLI Commands

```bash
# Configure Ampli for a project
ampli configure --api-key <API_KEY> --org <ORG_NAME> --workspace <WORKSPACE_NAME>

# Pull the latest tracking plan
ampli pull

# Check implementation status
ampli status [--update]

# Branch-specific operations
ampli pull --branch <BRANCH_NAME>
ampli status --is-merged --is-latest
```

### CI Integration Examples

For GitHub Actions:
```yaml
steps:
  - uses: actions/checkout@v2
  - name: Verify analytics implementation
    run: |
      docker run --rm \
        -v $(pwd):/app \
        -w /app \
        -e AMPLI_TOKEN=${{ secrets.AMPLI_TOKEN }} \
        amplitudeinc/ampli status
```

For Bitbucket Pipelines:
```yaml
pipelines:
  default:
    - step:
        script:
          - docker run --rm -v $(pwd):/app -w /app -e AMPLI_TOKEN=$AMPLI_TOKEN amplitudeinc/ampli status
```

### Migration Pattern

When migrating from standard Amplitude SDK:

```javascript
// Before: Standard Amplitude SDK
amplitude.getInstance().logEvent("Item Purchased", {
  price: 10.99,
  item_name: "Widget"
});

// After: Ampli Wrapper
ampli.itemPurchased({
  price: 10.99,
  itemName: "Widget"
});
```

Ampli provides a comprehensive solution for ensuring analytics implementation quality through type safety, validation, and integration with development workflows.