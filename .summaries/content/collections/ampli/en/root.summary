## Ampli: Type-Safe Analytics Instrumentation Platform

Ampli is Amplitude's type-safe analytics instrumentation solution that generates strongly-typed tracking libraries from Amplitude Data tracking plans. The platform eliminates manual JSON object creation for event tracking by providing autocomplete-enabled method calls and compile-time validation, ensuring analytics implementations match defined tracking specifications.

## Product Architecture and Feature Relationships

The Ampli ecosystem consists of three interconnected components that work together to provide end-to-end type-safe analytics:

**Ampli CLI** serves as the central orchestration tool that connects Amplitude Data tracking plans with local development environments. It generates platform-specific tracking libraries (Browser, Node.js, iOS, Android) and provides validation capabilities through commands like `ampli pull`, `ampli status`, and `ampli checkout`.

**Ampli Wrapper** is the generated strongly-typed API layer that replaces manual event tracking with method-based calls. Instead of constructing JSON objects, developers use generated methods like `ampli.songPlayed()` or `ampli.productViewed()` that correspond directly to tracking plan definitions.

**Migration and Integration Framework** enables progressive adoption from existing Amplitude SDK implementations through three phases: SDK-only, hybrid SDK+Ampli using `ampli.load({ client: { instance: amplitude }})`, and full Ampli-only implementation.

## Key Nomenclature and Definitions

**Tracking Plan**: The source-of-truth schema definition in Amplitude Data that specifies event structures, properties, and validation rules

**Ampli Wrapper**: The generated strongly-typed API that provides method-based event tracking with compile-time validation

**Data Branch**: Version control branches within Amplitude Data tracking plans that parallel Git branches for coordinated development workflows

**ampli.json**: Configuration file that defines source directories, API keys, instance names, and tracking plan references for CLI operations

**Source Code Instrumentation**: The process of validating that implemented analytics code matches the defined tracking plan specifications

**Instance Name**: Parameter for supporting multiple Ampli configurations within monorepo or multi-environment setups

## Broader Product Ecosystem Integration

Ampli integrates deeply with Amplitude's data governance and analytics platform ecosystem:

**Amplitude Data Integration**: Ampli serves as the implementation layer for Amplitude Data's tracking plan governance, ensuring that defined schemas are correctly implemented in production code.

**CI/CD Pipeline Integration**: Through Docker containers (`amplitudeinc/ampli`, `amplitudeinc/ampli-all`) and environment variable configuration (`AMPLI_TOKEN`), Ampli validates analytics implementations in GitHub Actions, Bitbucket Pipelines, and other CI systems.

**Multi-Platform SDK Generation**: Ampli generates platform-specific implementations that integrate with underlying Amplitude SDKs (`@amplitude/analytics-browser`, mobile SDKs) while providing the type-safe abstraction layer.

**Version Control Coordination**: The source control workflow enables parallel development of tracking plan changes and code implementation through branch coordination commands like `ampli status --is-merged` and `ampli status --is-latest`.

## API Endpoints and Command Line Interface

### Core CLI Commands

**Installation and Setup**:
- `npm install -g @amplitude/ampli` or Homebrew installation
- `ampli pull` - Downloads and generates tracking library from Amplitude Data
- `ampli configure` - Sets up authentication and workspace configuration

**Development Workflow**:
- `ampli status` - Verifies source code against tracking plan definitions
- `ampli checkout <branch>` - Switches to different tracking plan branch
- `ampli init` - Initializes new Ampli configuration

**CI/CD Integration**:
- `ampli status --is-merged` - Validates branch merge status for CI checks
- `ampli status --is-latest` - Confirms implementation uses latest tracking plan version

### Configuration Parameters

**CLI Flags**:
- `--update` - Forces regeneration of tracking library
- `--omit-api-keys` / `--include-api-keys` - Controls API key inclusion in generated code
- `sourceDir` - Specifies source code directory for validation
- `instanceName` - Enables multiple Ampli configurations per project

### Generated API Methods

**Event Tracking**:
- `ampli.track(new EventName())` - Type-safe event tracking with validation
- `ampli.eventName()` - Direct method calls for defined events
- `ampli.load()` - Initialization with optional existing Amplitude client integration

The platform supports both standalone implementation and hybrid integration with existing Amplitude SDK installations, enabling teams to adopt type-safe analytics incrementally while maintaining existing instrumentation.