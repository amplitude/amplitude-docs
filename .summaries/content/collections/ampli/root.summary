# Ampli: Type-Safe Analytics Code Generation Platform

Ampli is Amplitude Data's code generation platform that creates strongly-typed analytics libraries from tracking plans, eliminating manual JSON object creation and providing compile-time validation for event tracking implementations. The platform centers around the Ampli CLI tool and generated wrapper libraries that ensure analytics instrumentation matches defined tracking plan specifications.

## Product Architecture and Feature Relationships

The Ampli ecosystem consists of three core components working in concert:

**Ampli CLI** serves as the primary interface for developers, providing commands for initialization (`ampli init`), configuration (`ampli configure`), code generation (`ampli pull`), and validation (`ampli status`). The CLI connects to Amplitude Data's tracking plans and generates platform-specific wrapper code.

**Ampli Wrapper** represents the generated strongly-typed API layer that replaces manual Amplitude SDK calls. Generated via `ampli pull`, these wrappers provide type-safe methods like `ampli.songPlayed()` instead of generic `track()` calls with JSON objects, ensuring compile-time validation against tracking plan definitions.

**Source Control Integration** enables branch-based development workflows where tracking plan branches align with Git branches. Commands like `ampli checkout` and status flags (`--is-merged`, `--is-latest`) coordinate tracking plan versions with code branches, supporting parallel development and CI/CD validation.

## Key Nomenclature and Definitions

**Tracking Plan**: The source-of-truth schema defining events, properties, and validation rules in Amplitude Data that serves as the blueprint for code generation.

**ampli.json**: Configuration file specifying project settings, source/branch mappings, and generation parameters for the Ampli CLI.

**Ampli Wrapper/Generated Library**: Platform-specific code generated by `ampli pull` that provides strongly-typed methods corresponding to tracking plan events.

**Implementation Status**: Validation state indicating whether source code instrumentation matches tracking plan definitions, verified through `ampli status` linting.

**Branch Coordination**: Workflow pattern where Amplitude Data tracking plan branches correspond to Git feature branches, enabling parallel analytics development.

## Ecosystem Integration

Ampli operates as a bridge between Amplitude Data's tracking plan management and application codebases. It integrates with existing Amplitude SDKs through progressive migration patterns, supporting hybrid implementations where Ampli wrappers and traditional SDK calls coexist via shared client instances.

The platform supports monorepo architectures and integrates with CI/CD pipelines through Docker containers (`amplitudeinc/ampli`, `amplitudeinc/ampli-all`) and environment variable configuration (`AMPLI_TOKEN`). This enables automated validation of analytics implementations against tracking plans during build processes.

## API Endpoints and CLI Commands

**Core CLI Commands:**
- `ampli init` - Initialize new Ampli project
- `ampli configure` - Configure project settings
- `ampli pull` - Generate wrapper code from tracking plan
- `ampli status` - Validate implementation against tracking plan
- `ampli checkout` - Switch tracking plan branches

**Status Validation Flags:**
- `ampli status --is-merged` - Verify branch merge status
- `ampli status --is-latest` - Check for latest tracking plan version
- `--skip-update-on-default-branch` - CI optimization flag
- `--is-latest-if-not-on-default-branch` - Conditional update logic

**Installation Methods:**
- npm: `@amplitude/ampli` package
- Homebrew: Direct CLI installation
- Docker: `amplitudeinc/ampli` and `amplitudeinc/ampli-all` containers

The platform supports GitHub Actions and Bitbucket Pipelines integration through containerized workflows, enabling automated tracking plan validation and implementation verification as part of standard development processes.