# Ampli: Type-Safe Analytics Instrumentation for Amplitude Data

## Overview

Ampli is a comprehensive analytics instrumentation solution that bridges the gap between tracking plan definitions in Amplitude Data and code implementation. It provides developers with type-safe, validated analytics tracking capabilities that reduce errors and improve code quality when implementing analytics in applications.

## Key Features

- **Type-safe analytics tracking**: Generates strongly-typed code that matches tracking plan definitions
- **Instrumentation verification**: Validates that implemented tracking code matches the tracking plan
- **Source control integration**: Coordinates tracking plan changes across development teams
- **CI/CD validation**: Ensures analytics implementation correctness in continuous integration pipelines
- **Progressive migration path**: Allows gradual transition from standard Amplitude SDK to Ampli

## Product Components and Relationships

Ampli consists of two main components that work together:

1. **Ampli CLI**: A command-line tool that serves as the primary interface for developers to interact with Amplitude Data tracking plans.
2. **Ampli Wrapper**: A code-generated SDK that provides strongly-typed APIs matching tracking plan definitions.

The relationship between these components is sequential:
- First, developers use the Ampli CLI to pull tracking plans from Amplitude Data
- Then, the CLI generates the Ampli Wrapper code based on the tracking plan
- Finally, developers use the generated Ampli Wrapper in their application code to implement analytics tracking

This workflow ensures that the implementation in code always matches the tracking plan defined in Amplitude Data.

## Key Nomenclature and Definitions

- **Tracking Plan**: A schema that defines events, properties, and their types in Amplitude Data
- **ampli.json**: Configuration file that stores project settings and tracking plan information
- **Instrumentation**: The implementation of analytics tracking code in an application
- **Type-safe**: Ensuring that events and properties conform to defined types at compile time
- **Branch coordination**: Aligning branches in source control with branches in Amplitude Data
- **Runtime validation**: Verification of events against the tracking plan during application execution
- **Implementation verification**: Checking if code implementation matches the tracking plan specifications

## Integration with Amplitude Ecosystem

Ampli is positioned as a bridge between planning and implementation in the Amplitude product ecosystem:

1. **Amplitude Data**: Where product/analytics teams define tracking plans and event schemas
2. **Ampli**: Pulls these tracking plans and generates type-safe code for developers
3. **Amplitude Analytics**: Receives the properly formatted events tracked through Ampli
4. **Amplitude Visualization Tools**: Display analytics data that is consistent with the tracking plan

This integration ensures data quality throughout the analytics lifecycle, from planning to implementation to analysis.

## API and Command Line Usage

### Ampli CLI Commands

```bash
# Configure Ampli for a project
ampli configure --api-key <API_KEY> --org <ORG_NAME> --workspace <WORKSPACE_NAME>

# Pull the latest tracking plan
ampli pull

# Check implementation status
ampli status [--update]

# Branch-specific operations
ampli pull --branch <BRANCH_NAME>
ampli status --is-merged --is-latest
```

### CI Integration Examples

For GitHub Actions:
```yaml
steps:
  - uses: actions/checkout@v2
  - name: Verify analytics implementation
    run: |
      docker run --rm \
        -v $(pwd):/app \
        -w /app \
        -e AMPLI_TOKEN=${{ secrets.AMPLI_TOKEN }} \
        amplitudeinc/ampli status
```

For Bitbucket Pipelines:
```yaml
pipelines:
  default:
    - step:
        script:
          - docker run --rm -v $(pwd):/app -w /app -e AMPLI_TOKEN=$AMPLI_TOKEN amplitudeinc/ampli status
```

### Code Implementation Pattern

When using the Ampli Wrapper instead of the standard Amplitude SDK:

```javascript
// Before: Standard Amplitude SDK
amplitude.getInstance().logEvent("Item Purchased", {
  price: 10.99,
  item_name: "Widget"
});

// After: Ampli Wrapper
ampli.itemPurchased({
  price: 10.99,
  itemName: "Widget"
});
```

The Ampli Wrapper provides type checking, autocompletion, and validation that the standard SDK cannot offer, ensuring that analytics implementation matches the tracking plan specifications.