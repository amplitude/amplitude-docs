# Amplitude Session Replay

## Product Overview

Amplitude Session Replay is a visual analytics tool that captures and recreates user interactions with web and mobile applications as video-like recordings. It enables product teams to directly observe user behavior, identify usability issues, and understand navigation patterns. The solution supports web applications through Browser SDK, as well as iOS, Android, and React Native platforms, with integration options for analytics providers including Segment, Rudderstack, and Google Tag Manager.

Key features include:
- Video-like session recordings of user interactions
- Heatmaps showing click patterns, scroll depth, and element interactions
- Configurable privacy controls with multiple masking levels
- Session sampling to manage data volume
- Integration with existing analytics implementations
- Support for WebViews and MapViews in mobile applications
- Implementation monitoring tools

## Product Relationships and Features

Amplitude Session Replay offers multiple implementation approaches:

1. **SDK Plugins/Middleware** for applications using Amplitude Analytics:
   - Browser SDK Plugin
   - iOS SDK Plugin/Middleware
   - Android SDK Plugin/Middleware
   - React Native SDK Plugin

2. **Standalone SDKs** for applications using third-party analytics:
   - Browser Standalone SDK
   - iOS Standalone SDK
   - Android Standalone SDK

3. **Integration Wrappers** for specific analytics platforms:
   - Segment Wrapper
   - Rudderstack Integration
   - Google Tag Manager Implementation

The core technology captures DOM changes (web) or view tree changes (mobile) to create video-like replays. These recordings synchronize with analytics events by matching device IDs and session IDs between systems.

## Key Nomenclature and Definitions

- **Session Replay**: Video-like recordings of user interactions with applications
- **Heatmaps**: Visual representations of user engagement including:
  - **Click maps**: Visualization of click frequency across interface elements
  - **Selectors view**: Interaction data for specific UI elements
  - **Scrollmaps**: Visualization of scroll depth patterns
  - **Average fold**: Typical scroll position where content becomes visible

- **Masking Levels**: Privacy settings controlling data capture:
  - **Conservative**: Highest privacy level, masks most elements
  - **Light**: Moderate masking
  - **Medium**: Less restrictive masking
  - **Custom**: User-defined masking via CSS selectors

- **sampleRate**: Configuration parameter (0-1) determining percentage of sessions to record
- **deviceId**: Unique identifier for a user's device
- **sessionId**: Unique identifier for a specific user session
- **Ingestion Monitor**: Tool for tracking implementation status and debugging

## Product Ecosystem Integration

Amplitude Session Replay is an addon to Amplitude's analytics platform, available for Growth and Enterprise plans. It integrates with:

1. **Amplitude Analytics**: Direct integration via SDK plugins/middleware
2. **Third-party Analytics**: Through standalone SDKs or integration wrappers
3. **Data Management Platforms**:
   - Segment (via wrapper or middleware)
   - Rudderstack (via custom integration)
   - Google Tag Manager (via Amplitude template)

The product supports EU data residency requirements and includes DSAR API integration for data subject access requests. Session Replay data is subject to retention policies and storage quotas.

## API Endpoints and Implementation Methods

### Web Implementation

**Browser SDK Plugin:**
```javascript
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/session-replay-browser';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

**Standalone SDK:**
```javascript
import { SessionReplay } from '@amplitude/session-replay-browser';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});
```

### Mobile Implementation

**iOS Plugin:**
```swift
let sessionReplayPlugin = AmplitudeSessionReplayPlugin(options: SessionReplayOptions(
    sampleRate: 1.0,
    maskingLevel: .light
))
amplitude.add(plugin: sessionReplayPlugin)
```

**Android Plugin:**
```kotlin
val sessionReplayPlugin = SessionReplayPlugin.getInstance(
    SessionReplayOptions(
        sampleRate = 1.0,
        maskingLevel = MaskingLevel.LIGHT
    )
)
amplitude.add(plugin = sessionReplayPlugin)
```

**React Native Plugin:**
```javascript
import { sessionReplayPlugin } from '@amplitude/session-replay-react-native';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

### Key Methods

- `getSessionReplayProperties()`: Returns properties for linking analytics events with recordings
- `startRecording()`/`stopRecording()`: Runtime recording control
- `maskView()`/`unmaskView()`: Privacy masking control for specific mobile views
- `flush()`: Force upload of pending session replay data

Configuration options include EU data residency (`serverZone: 'EU'`) and remote configuration management (`enableRemoteConfig: true`).