# Amplitude Session Replay

## Product Overview

Amplitude Session Replay is a visual analytics tool that captures and recreates user interactions with web and mobile applications. It records DOM changes, view tree modifications, and user interactions to create video-like replays of user sessions, providing context beyond traditional analytics data.

Key features include:
- Session recording across web, iOS, Android, and React Native platforms
- Heatmaps for visualizing user engagement patterns
- Privacy controls with configurable data masking levels
- Integration options with various analytics providers
- Implementation monitoring tools
- Sampling capabilities to manage data volume

Primary use cases include debugging user experience issues, understanding user behavior patterns, validating design changes, and identifying conversion obstacles.

## Product Relationships

Amplitude Session Replay is available as an addon for Growth and Enterprise plans and integrates with the broader Amplitude ecosystem through:

1. **SDK Integration Methods**:
   - SDK Plugins/Middleware for web, iOS, Android, and React Native
   - Standalone SDKs for web, iOS, and Android
   - Third-party integration wrappers (Google Tag Manager, Segment, RudderStack)

2. **Analytics Integration**:
   - Complements Amplitude Analytics by providing visual context to quantitative data
   - Uses shared device ID and session ID system to connect visual session data with event data
   - Can be integrated with third-party analytics providers

3. **Organization Settings**:
   - Privacy configurations managed at the organization level
   - Supports remote configuration through Amplitude's configuration system
   - Offers EU data residency options for compliance requirements

## Key Nomenclature and Definitions

- **Session Replay**: Core functionality recording and recreating user interactions
- **Device ID**: Unique identifier linking Session Replay data with analytics events
- **Session ID**: Identifier connecting replay recordings with analytics session data
- **Sample Rate**: Parameter (0-100) determining percentage of sessions to record
- **Mask Level**: Privacy setting controlling how sensitive data is obscured:
  - **Conservative**: Highest privacy level, masks most text and images
  - **Light**: Masks only potentially sensitive data
  - **Medium**: Balanced approach between visibility and privacy
- **Heatmaps**: Visual representations of user engagement:
  - **Click Maps**: Shows frequent click locations
  - **Selectors View**: Displays interaction data for specific UI elements
  - **Scrollmaps**: Visualizes scroll patterns
- **Average Fold**: Typical scroll position where content becomes visible
- **Ingestion Monitor**: Tool tracking implementation status and debugging issues

## Product Ecosystem Integration

Session Replay integrates into the Amplitude ecosystem by:

1. Providing visual context to quantitative analytics data
2. Using shared identity systems (device ID and session ID)
3. Supporting organization-level privacy settings
4. Enabling remote configuration
5. Offering data residency options for compliance requirements

The product works alongside Amplitude Analytics or third-party analytics providers, capturing visual session data and linking it to corresponding analytics events through shared identifiers.

## Implementation Details

### Web Implementation

**Browser SDK Plugin:**
```javascript
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/session-replay-browser';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

**Standalone SDK:**
```javascript
import { SessionReplay } from '@amplitude/session-replay-browser';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});
```

### iOS Implementation

```swift
import AmplitudeSwift
import AmplitudeSessionReplay

let sessionReplayPlugin = SessionReplayPlugin()
let amplitude = Amplitude(
    configuration: Configuration(
        apiKey: "API_KEY",
        plugins: [sessionReplayPlugin]
    )
)
```

### Android Implementation

```kotlin
import com.amplitude.android.Amplitude
import com.amplitude.android.plugins.sessionreplay.SessionReplayPlugin

val sessionReplayPlugin = SessionReplayPlugin()
val amplitude = Amplitude(
    Configuration(
        apiKey = "API_KEY",
        context = applicationContext,
        plugins = listOf(sessionReplayPlugin)
    )
)
```

### React Native Implementation

```javascript
import { SessionReplayPlugin } from '@amplitude/session-replay-react-native';

const sessionReplayPlugin = new SessionReplayPlugin();
const amplitude = createInstance();
amplitude.add(sessionReplayPlugin);
```

### Common Configuration Options

All implementations support:
- `sampleRate`: Controls percentage of sessions to record (0-100)
- `maskLevel`: Sets privacy masking level (CONSERVATIVE, LIGHT, MEDIUM)
- `optOut`: Enables user opt-out functionality
- `euDataResidency`: Enables EU data storage for compliance

### Third-Party Analytics Integration

```javascript
const sessionReplayProps = sessionReplay.getSessionReplayProperties();
thirdPartyAnalytics.track('Event Name', {
  ...eventProperties,
  ...sessionReplayProps
});
```

Platform-specific considerations include Shadow DOM support for web, iOS 13+ requirements, WebView and MapView support across platforms, and storage/performance implications that vary by platform.