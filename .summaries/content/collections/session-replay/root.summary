## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics solution that captures and reconstructs user interactions across web, mobile (iOS/Android), and React Native applications. The product provides visual insights through session recordings, heatmaps, and behavioral analysis while maintaining strict privacy controls and compliance with data protection regulations like GDPR.

## Core Features and Capabilities

**Session Recording & Playback**: Captures DOM interactions, user clicks, scrolls, and form inputs through diff-based replay construction that reconstructs user sessions without storing full page snapshots. The system uses view tree capture for mobile platforms and DOM capture for web applications.

**Heatmaps Analytics**: Provides three visualization types - click maps showing user interaction hotspots, selector maps ranking interactive elements by engagement, and scroll maps displaying average page fold and scroll depth patterns. Available exclusively for web-based applications through Microscope analysis.

**Privacy & Masking Controls**: Implements three masking levels (Conservative, Light, Medium) with CSS selector-based overrides, custom AmpMaskView components, and UGC filter rules using glob patterns to sanitize sensitive content in URLs and user-generated data.

**Multi-Platform SDK Architecture**: Supports Browser SDK Plugin, Android Plugin/Middleware, iOS Plugin/Middleware, React Native Plugin, and Standalone SDKs for third-party analytics integration.

## Product Relationships and Integration Patterns

**Primary Integration Path**: Session Replay functions as a plugin/middleware layer that extends existing Amplitude Analytics SDKs (Browser SDK 2, Android-Kotlin SDK, iOS Swift SDK) through `amplitude.add()` methods and event middleware registration.

**Third-Party Analytics Support**: Standalone SDKs enable integration with non-Amplitude providers (Segment, Rudderstack) through wrapper implementations that synchronize session/device IDs and inject Session Replay properties via `getSessionReplayProperties()` methods.

**Tag Management Integration**: Google Tag Manager support through GTM Web Templates and Segment integration via Analytics-Swift library with Amplitude Actions destination mode.

**Remote Configuration**: Centralized privacy settings management through Amplitude's organizational settings with precedence rules where remote configuration overrides local SDK settings.

## Key Nomenclature and Definitions

**Session Replay ID**: Unique identifier (`[Amplitude] Session Replay ID`) automatically injected into analytics events to correlate session recordings with behavioral data.

**Sample Rate**: Percentage-based configuration (`sampleRate`) controlling what portion of user sessions are recorded, supporting fractional values for precise sampling control.

**Masking Levels**: 
- Conservative: Masks all text inputs and form fields
- Light: Masks only sensitive form fields (passwords, payment info)  
- Medium: Balanced approach masking PII while preserving general text content

**Device/Session ID Synchronization**: Critical requirement for third-party integrations where `setSessionId()` and `setDeviceId()` methods maintain consistency between analytics providers and session replay data.

**UGC Filter Rules**: URL sanitization system using glob patterns with `selector` (pattern matching) and `replacement` (sanitized output) properties to anonymize user-generated content.

## Broader Product Ecosystem Integration

**Amplitude Analytics Platform**: Session Replay data integrates with Amplitude's behavioral cohorts, user segmentation, and funnel analysis through shared session identifiers and event properties.

**Data Residency & Compliance**: Supports EU data residency through `serverZone` configuration and integrates with Amplitude's DSAR API for data subject access requests and User Privacy API for deletion compliance.

**Ingestion & Monitoring**: Session Replay Ingestion Monitor tracks HTTP status codes (200 success, 429 throttling, 402 quota exceeded) and invalid session IDs for implementation debugging and health monitoring.

**Enterprise Features**: Heatmaps functionality requires Growth or Enterprise plans, with organizational-level privacy settings management and remote configuration capabilities.

## Technical Implementation Details

**API Endpoints & Methods**:
- `sessionReplay.init()` - Standalone SDK initialization
- `amplitude.add(sessionReplayPlugin)` - Plugin registration
- `amplitude.addEventMiddleware()` - Middleware integration
- `getSessionReplayProperties()` - Event property injection
- `start()/stop()` - Recording control methods

**Storage & Performance**: Uses IndexedDB for browser-based storage with configurable `storeType`, supports WebWorker processing through `experimental.useWebWorker`, and implements idle compression via `performanceConfig` settings.

**Installation Methods**: Available through npm/yarn package managers, CDN script tags, Swift Package Manager, CocoaPods, and Maven Central depending on platform requirements.