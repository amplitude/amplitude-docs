## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics solution that captures and reconstructs user interactions across web, mobile (iOS/Android), and React Native applications. The product provides visual insights through session recordings, heatmaps, and behavioral analytics while maintaining robust privacy controls and compliance features for GDPR and other data protection regulations.

## Product Architecture and Integration Patterns

Session Replay operates through multiple integration patterns designed to accommodate different analytics architectures:

**Native Amplitude Integrations:**
- **Browser SDK Plugin** (`@amplitude/plugin-session-replay-browser`) - Primary integration for web applications using Amplitude Browser SDK 2
- **Mobile SDK Plugins** - iOS and Android plugins that integrate with Amplitude's native mobile SDKs
- **React Native SDK Plugin** - Dedicated plugin for React Native applications

**Standalone SDKs:**
- **Browser Standalone SDK** (`@amplitude/session-replay-browser`) - For applications using third-party analytics providers
- **Mobile Standalone SDKs** - iOS and Android standalone implementations requiring manual session/device ID management

**Third-Party Analytics Integrations:**
- **Segment Integration** - Multiple modes including Amplitude Actions, Classic Device-mode, and Cloud-mode
- **Google Tag Manager (GTM)** - Web template for GTM-based implementations  
- **Rudderstack Integration** - Wrapper for Rudderstack analytics platforms

**Legacy SDK Support:**
- **Middleware Components** - For applications using maintenance versions of Amplitude Android SDK (2.40.1+) and iOS SDK (8.21.0+)

## Core Features and Capabilities

**Session Recording:**
Session Replay captures DOM interactions through view tree capture and diff-based replay construction. The system records user interactions, page navigation, form submissions, and UI state changes, storing data in IndexedDB with webworker compression for performance optimization.

**Heatmaps:**
Available for Growth/Enterprise plans, heatmaps provide visual representations of user engagement through:
- **Click Maps** - Visual representation of user click patterns
- **Selector Maps** - Element-specific interaction tracking
- **Scroll Maps** - Viewport scroll depth and average page fold analysis

**Privacy and Data Masking:**
The system implements three masking levels:
- **Conservative** - Maximum data protection with extensive PII masking
- **Light** - Minimal masking for basic privacy compliance
- **Medium** - Balanced approach between functionality and privacy

Additional privacy features include CSS selector-based masking overrides, AmpMaskView components for React Native, and UGC (User-Generated Content) filter rules using glob patterns for URL sanitization.

## Key Technical Nomenclature

**Session Management:**
- **Session ID** - Unique identifier linking replay data to analytics events
- **Device ID** - Cross-session user identifier for correlation
- **Sample Rate** - Percentage of sessions to record (0.0 to 1.0)
- **Session Replay ID** - Event property `[Amplitude] Session Replay ID` added to analytics events

**Configuration Objects:**
- **SessionReplayConfig** - Primary configuration interface for mobile SDKs
- **privacyConfig** - Browser SDK privacy and masking configuration
- **interactionConfig** - Advanced interaction tracking and UGC filtering settings

**API Methods:**
- `getSessionReplayProperties()` - Returns session replay metadata for event correlation
- `setSessionId()` / `setDeviceId()` - Manual ID management for standalone implementations
- `start()` / `stop()` - Session recording control methods
- `flush()` - Force data transmission to Amplitude servers

**Privacy Controls:**
- **optOut** - User consent management
- **enableRemoteConfig** - Server-side configuration management
- **maskLevel** - Privacy masking intensity setting
- **ugcFilterRules** - URL pattern-based content sanitization

## Ecosystem Integration

Session Replay integrates deeply with Amplitude's broader analytics ecosystem:

**Data Pipeline Integration:**
Session replay data flows through Amplitude's ingestion pipeline with HTTP status monitoring (200, 429, 402) via the Ingestion Monitor tool. The system supports EU data residency through serverZone configuration and integrates with Amplitude's DSAR API for data subject access requests.

**Analytics Correlation:**
All session recordings are correlated with Amplitude events through the Session Replay ID property, enabling behavioral cohort analysis and user journey reconstruction. The system maintains device identifier consistency across sessions for comprehensive user behavior tracking.

**Privacy and Compliance:**
Integration with Consent Management Platforms (CMPs) enables GDPR compliance through cookie banner controls and first-party cookie management. The system supports organizational privacy settings with remote configuration precedence over local SDK settings.

**Performance and Monitoring:**
The Session Replay Ingestion Monitor provides real-time visibility into replay data processing, tracking successful ingestions, throttling events, and quota exceeded scenarios. The system uses requestIdleCallback for performance optimization and supports multiple Amplitude instances with device ID and API key matching.

**Third-Party Ecosystem:**
Extensive integration capabilities with major analytics platforms including Segment (Analytics-Swift, Analytics-Next), Google Tag Manager, and Rudderstack, enabling organizations to add session replay capabilities to existing analytics implementations without major architectural changes.