## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics platform that captures and reconstructs user interactions across web, mobile (iOS/Android), and React Native applications. The solution provides visual insights through session recordings, heatmaps, and behavioral analytics to help teams understand user engagement patterns and optimize digital experiences.

## Product Architecture and Integration Ecosystem

Session Replay operates through multiple SDK implementations designed for different technical architectures:

**Core SDK Types:**
- **Plugin Architecture**: Integrates with existing Amplitude Analytics SDKs (Browser SDK 2, iOS Swift SDK, Android-Kotlin SDK)
- **Middleware Integration**: Works with maintenance/legacy Amplitude SDKs (iOS SDK 8.21.0+, Android SDK 2.40.1+)
- **Standalone SDKs**: Independent implementation for third-party analytics providers (non-Amplitude)
- **Third-Party Wrappers**: Specialized integrations for Segment, Rudderstack, and Google Tag Manager

**Platform Coverage:**
- **Web**: Browser SDK Plugin, Standalone SDK, GTM integration
- **iOS/iPadOS**: Swift SDK Plugin, iOS Middleware, Standalone SDK
- **Android**: Kotlin SDK Plugin, Android Middleware, Standalone SDK  
- **React Native**: SDK Plugin, Standalone SDK, Segment integration
- **Analytics Platforms**: Segment (Actions/Classic), Rudderstack, GTM

## Key Features and Capabilities

**Session Recording Technology:**
- DOM capture and diff-based replay construction for web applications
- View tree capture for mobile applications with diff processing
- Real-time session reconstruction with visual playback
- Support for Shadow DOM, WebViews (limited), and complex UI frameworks

**Heatmaps and Visual Analytics:**
- Click maps showing user interaction hotspots
- Selector maps for element-specific engagement analysis
- Scroll maps indicating content consumption patterns
- Microscope feature for detailed behavioral analysis
- Integration with Behavioral Cohorts for segmented analysis

**Privacy and Compliance Framework:**
- Three-tier masking system: Conservative, Light, and Medium levels
- CSS selector-based masking overrides (mask/unmask/exclude)
- Specialized masking components (AmpMaskView for React Native, .amp-block class)
- GDPR compliance tools and consent management integration
- Configurable data retention and opt-out mechanisms
- UGC Filter Rules for URL sanitization using glob patterns

## Technical Implementation and Configuration

**Core Configuration Parameters:**
- `sampleRate`: Controls recording frequency (0.0-1.0)
- `maskLevel`: Privacy masking intensity (Conservative/Light/Medium)
- `deviceId`/`sessionId`: Identity management for session correlation
- `serverZone`: Data residency control (EU compliance)
- `enableRemoteConfig`: Dynamic configuration management
- `optOut`: User privacy controls

**Key API Methods:**
- `sessionReplay.init()`: SDK initialization
- `sessionReplay.setSessionId()`/`sessionReplay.setDeviceId()`: Identity synchronization
- `getSessionReplayProperties()`: Event property injection for third-party analytics
- `sessionReplay.flush()`: Manual data transmission
- `start()`/`stop()`: Recording control
- `amplitude.add()`/`amplitude.remove()`: Plugin management

**Storage and Performance:**
- IndexedDB storage for web applications (`storeType` configuration)
- Compression via experimental webworker support
- `requestIdleCallback` optimization for performance
- Configurable retry mechanisms (`flushMaxRetries`)

## Key Nomenclature and Definitions

**Session Management:**
- **Session ID**: Unique identifier linking replay data to user sessions
- **Device ID**: Persistent identifier for cross-session user tracking
- **Sample Rate**: Percentage of sessions recorded (0.0-1.0 range)
- **Flush**: Process of transmitting captured data to Amplitude servers

**Privacy Controls:**
- **Masking Levels**: Conservative (maximum privacy), Light (minimal masking), Medium (balanced approach)
- **CSS Selectors**: Target-specific elements for masking overrides
- **UGC Filter Rules**: URL sanitization using glob pattern matching
- **CMP Integration**: Consent Management Platform compatibility

**Technical Components:**
- **DOM Diff**: Incremental change capture for efficient web replay
- **View Tree**: Mobile UI hierarchy capture mechanism
- **Plugin Architecture**: Modular integration with existing Amplitude SDKs
- **Middleware**: Legacy SDK compatibility layer
- **Remote Config**: Server-side configuration management

## Data Management and Monitoring

**Ingestion Monitoring:**
The Session Replay Ingestion Monitor provides real-time tracking of data ingestion health through HTTP status code monitoring:
- Status 200: Successful ingestion
- Status 429: Rate limiting/throttling
- Status 402: Quota exceeded
- Invalid session ID tracking for debugging

**Privacy and Data Governance:**
- First-party cookie categorization for CMP integration
- Analytics cookie classification for consent frameworks
- DSAR API compliance for data subject requests
- User Privacy API for consent management
- Configurable data retention periods

**Third-Party Analytics Integration:**
Session Replay seamlessly integrates with external analytics platforms through property injection and session synchronization:
- Segment integration supports Actions and Classic destinations (Device-mode/Cloud-mode)
- Rudderstack Cloud-mode integration with Anonymous ID mapping
- Manual session management for standalone implementations
- Automatic Session Replay ID injection into track/page events

## Broader Product Ecosystem Integration

Session Replay functions as a core component within Amplitude's behavioral analytics ecosystem, integrating with:

**Amplitude Analytics Platform:**
- Behavioral Cohorts for user segmentation
- Event tracking and user journey analysis
- Cross-platform identity resolution
- Real-time and batch data processing

**Privacy and Compliance Infrastructure:**
- Amplitude's consent management framework
- Data residency controls (serverZone configuration)
- GDPR/CCPA compliance tooling
- Enterprise data governance policies

**Third-Party Ecosystem:**
- Customer Data Platforms (Segment, Rudderstack)
- Tag Management Systems (Google Tag Manager)
- Consent Management Platforms
- Analytics and marketing technology stacks

The platform's modular architecture enables flexible deployment across diverse technical stacks while maintaining consistent privacy controls and data governance standards. Remote configuration capabilities allow dynamic adjustment of sampling rates, masking levels, and feature toggles without requiring application updates.