## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics platform that captures, reconstructs, and visualizes user interactions across web, mobile, and React Native applications. The product enables teams to understand user engagement patterns through session recordings, heatmaps, and behavioral analytics to optimize digital experiences and identify friction points in user journeys.

## Core Product Architecture

**Multi-Modal Analytics Engine**: Session Replay operates through three primary visualization modes - session recordings that capture DOM interactions and user navigation patterns through view tree capture and diff-based replay construction, click/selector heatmaps showing interaction hotspots and element engagement rankings, and scroll maps displaying viewport depth patterns. Sessions utilize configurable retention periods with filtering capabilities across device identifiers, behavioral cohorts, and URL patterns.

**Privacy-First Data Collection**: The platform implements a three-tier masking system (Conservative, Light, Medium) with granular override controls through CSS selectors, data attributes (data-amp-mask, data-amp-unmask), and .amp-block class exclusions. GDPR compliance is maintained through consent management platform integration and user opt-out mechanisms, with DSAR API integration for data subject rights management.

**Cross-Platform SDK Ecosystem**: Session Replay supports flexible integration patterns including Plugin Architecture for existing Amplitude SDK implementations (Browser SDK 2, Android-Kotlin, iOS Swift), Middleware Integration for maintenance SDKs (Android SDK 2.40.1+, iOS SDK 8.21.0+), and Standalone Implementation for third-party analytics environments requiring manual session/device ID synchronization.

## Integration and Data Flow

**Third-Party Analytics Compatibility**: The platform provides wrapper SDKs and plugins for Segment (Analytics-Swift, AnalyticsBrowser), Rudderstack, and Google Tag Manager, enabling session replay functionality without analytics platform migration. Data synchronization maintains session continuity through sessionId and deviceId management with automatic Session Replay ID injection via getSessionReplayProperties() method.

**Configuration Management**: Core parameters include sampleRate for recording percentage control (0.0-1.0), privacyConfig/maskLevel for data masking strictness, serverZone for EU data residency compliance, enableRemoteConfig for server-side configuration management, and optOut for user consent controls.

**Storage and Performance Optimization**: Browser implementations utilize IndexedDB storage (storeType) with configurable flush policies and retry mechanisms. Performance optimization includes WebWorker support (experimental.useWebWorker) and idle compression through performanceConfig settings.

## Key Technical Interfaces

**Primary API Methods**:
- `amplitude.add(sessionReplayPlugin())` - Plugin installation and initialization
- `sessionReplay.start()`/`sessionReplay.stop()` - Recording lifecycle control
- `sessionReplay.setSessionId()`/`sessionReplay.setDeviceId()` - Identity management
- `getSessionReplayProperties()` - Session metadata and replay URL retrieval
- `addEventMiddleware()`/`removeEventMiddleware()` - Middleware pipeline management

**Monitoring and Diagnostics**: The Ingestion Monitor provides real-time session replay ingestion tracking with HTTP status code monitoring (200 success, 429 throttling, 402 quota exceeded) and invalid session ID detection for implementation troubleshooting and data quality assurance.

## Platform Constraints and Enterprise Features

**Technical Limitations**: Browser implementations face Canvas/WebGL content capture limitations, Shadow DOM support requirements, CSS stylesheet inlining dependencies, and multiple Amplitude instance handling complexities. Mobile platforms encounter WebView tracking constraints on React Native, Jetpack Compose support limitations on Android, and view tree capture restrictions on iOS/iPadOS.

**Enterprise Capabilities**: Advanced features include remote configuration management for centralized control, EU data residency options for regulatory compliance, bot filtering for data quality, and configurable retention periods for organizational governance requirements. The platform integrates with User Privacy API for comprehensive data protection regulation compliance.