## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics tool that captures and reconstructs user interactions across web, mobile, and React Native applications. The product provides visual insights through session recordings, heatmaps, and behavioral analytics to help teams understand user engagement patterns and optimize digital experiences.

## Core Features and Capabilities

**Session Recording**: Captures DOM interactions, user clicks, scrolls, and navigation patterns through view tree capture and diff-based replay construction. The system uses IndexedDB storage with webworker compression for performance optimization.

**Heatmaps**: Provides three visualization types - click maps, selector maps, and scroll maps - showing user engagement patterns through visual heat overlays. Includes viewport scroll depth analysis and interactive element ranking.

**Privacy Controls**: Implements three masking levels (Conservative, Light, Medium) with CSS selector-based overrides, data attributes (data-amp-mask, data-amp-unmask), and .amp-block class support for PII protection.

**Ingestion Monitoring**: Real-time tracking of session replay ingestion status with HTTP status code monitoring (200, 429, 402) and invalid session ID detection for implementation debugging.

## Platform Integration Architecture

### Browser/Web Implementations
- **Browser SDK Plugin** (@amplitude/plugin-session-replay-browser): Primary integration for sites using Amplitude Browser SDK 2
- **Standalone SDK** (@amplitude/session-replay-browser): For applications using third-party analytics providers
- **Google Tag Manager Integration**: GTM Web Template for client-side browser implementations

### Mobile Platform Support
**Android**:
- **Android Plugin**: SessionReplayPlugin for Android-Kotlin SDK and SessionReplayMiddleware for maintenance Android SDK
- **Android Middleware**: SessionReplayMiddleware for apps using maintenance Amplitude Android SDK (version 2.40.1+)
- **Android Standalone**: Manual session/device ID management for third-party analytics integration

**iOS**:
- **iOS Plugin**: AmplitudeSwiftSessionReplayPlugin for iOS Swift SDK and AmplitudeiOSSessionReplayMiddleware for legacy iOS SDK
- **iOS Middleware**: AmplitudeiOSSessionReplayMiddleware for maintenance Amplitude iOS SDK (version 8.21.0+)
- **iOS Standalone**: Manual session/device ID management for non-Amplitude analytics providers

### Cross-Platform
- **React Native SDK Plugin** (@amplitude/plugin-session-replay-react-native): SessionReplayPlugin with AmpMaskView masking and WebView tracking

### Third-Party Analytics Integrations
- **Segment Integration**: Three destination modes (Amplitude Actions, Classic Device-mode, Classic Cloud-mode) with Source Middleware
- **Segment Wrapper Plugin** (@amplitude/segment-session-replay-plugin): One-line integration with createSegmentActionsPlugin
- **Rudderstack Integration**: Cloud-mode integration with deviceId/sessionId mapping from Rudderstack Anonymous ID and Session ID

## Key Nomenclature and Definitions

**Session Replay ID**: Unique identifier property ([Amplitude] Session Replay ID) attached to analytics events for linking sessions to replay data

**Sample Rate**: Configuration parameter (sampleRate) controlling the percentage of sessions recorded, supporting remote configuration and quota management

**Masking Levels**: Privacy protection tiers (Conservative, Light, Medium) with CSS selector overrides taking precedence over SDK settings

**Device ID/Session ID Synchronization**: Critical requirement for third-party integrations using setSessionId(), setDeviceId(), and getSessionReplayProperties() methods

**DOM Capture and Diff Processing**: Core technology capturing view tree changes and constructing replay data through differential analysis

**Remote Configuration**: Server-side control of sampling rates and feature enablement through enableRemoteConfig parameter

## API Endpoints and Methods

### Core Session Management
- `sessionReplay.init()`: Initialize standalone SDK
- `sessionReplay.setSessionId()`: Manual session ID management
- `sessionReplay.getSessionReplayProperties()`: Retrieve session replay metadata
- `amplitude.add(plugin)` / `amplitude.remove(plugin)`: Plugin lifecycle management

### Recording Controls
- `startRecording()` / `stopRecording()`: Manual recording control
- `start()` / `stop()`: React Native recording methods
- `flush()`: Force data transmission

### Privacy and Configuration
- `addEventMiddleware()` / `removeEventMiddleware()`: Middleware management
- `optOut`: User consent management
- `serverZone`: EU data residency configuration
- `forceSessionTracking`: Override default session behavior

## Product Ecosystem Integration

Session Replay integrates deeply with Amplitude's broader analytics platform through Device ID matching, Session Start/Session End event correlation, and Behavioral Cohorts creation. The system supports DSAR API for session replay metadata retrieval and User Privacy API for data deletion compliance.

The product requires Growth/Enterprise plans for full feature access and maintains compatibility across Amplitude's SDK ecosystem while supporting extensive third-party analytics provider integrations through wrapper plugins and standalone implementations. Remote configuration enables centralized control of sampling rates and feature enablement across all platform implementations.