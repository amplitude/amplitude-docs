# Amplitude Session Replay

## Overview

Amplitude Session Replay is a user behavior analytics tool that captures and recreates user sessions on web and mobile applications as video-like replays. The product enables teams to visually observe how users interact with their applications, providing contextual insights beyond traditional analytics metrics. Session Replay works by capturing DOM changes (web) or view tree changes (mobile) to create detailed reconstructions of user sessions.

Key features include:
- Video-like session replays of user interactions
- Heatmaps (click maps, selector maps, scroll maps)
- Privacy controls with configurable masking levels
- Cross-platform support (Web, iOS, Android, React Native)
- Integration capabilities with third-party analytics platforms

Primary use cases include debugging user experience issues, understanding behavior patterns, identifying UI/UX improvement opportunities, validating product hypotheses, and troubleshooting conversion funnel drop-offs.

## Product Relationships

Session Replay can be implemented in three primary ways within the product ecosystem:

1. **As a Plugin/Middleware**: For customers already using Amplitude analytics SDKs, Session Replay functions as a plugin for current SDKs or middleware for maintenance SDKs.

2. **As a Standalone SDK**: For customers using third-party analytics providers, Session Replay offers independent SDKs that can integrate with other analytics platforms.

3. **Through Integrations**: Session Replay supports specific third-party integrations with:
   - Google Tag Manager
   - Segment (via Actions, Device-mode, or Cloud-mode)
   - RudderStack

The architecture varies by platform:
- **Web**: Captures DOM changes
- **iOS/Android**: Captures view tree changes
- **React Native**: Provides cross-platform mobile implementation

Session Replay data is stored separately from regular analytics events but can be linked through session and device IDs, allowing teams to move from metrics to visual session context.

## Key Nomenclature and Definitions

- **Session Replay**: Video-like recreation of user interactions with an application
- **Heatmaps**: Visual representations of user engagement including:
  - **Click Map**: Shows most clicked areas by coordinates
  - **Selector Map**: Highlights most interacted elements with rankings
  - **Scroll Map**: Displays aggregate scroll activity and average page fold
- **Device ID**: Unique identifier for a user's device
- **Session ID**: Unique identifier for a specific user session
- **Sample Rate**: Percentage of sessions that are recorded (0.0-1.0)
- **Mask Level**: Privacy setting that determines how sensitive data is handled:
  - **Conservative**: Highest privacy level, masks most elements
  - **Light**: Moderate privacy level
  - **Medium**: Lower privacy level, masks fewer elements
- **Ingestion Monitor**: Tool that tracks implementation status and debugging metrics

## Product Ecosystem Integration

Session Replay integrates with the broader Amplitude ecosystem through:

1. **Analytics Connection**: Session replays link to analytics events via shared session and device IDs
2. **Behavioral Cohorts**: Users can be grouped based on specific behaviors for session analysis
3. **Remote Configuration**: Settings can be managed through Amplitude's configuration system
4. **Privacy Controls**: Aligns with Amplitude's privacy framework for compliance
5. **Cross-Platform Support**: Consistent with Amplitude's multi-platform approach

## Implementation Methods and API References

### Web Implementation

**Browser SDK Plugin:**
```javascript
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/session-replay-browser';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

**Standalone SDK:**
```javascript
import { SessionReplay } from '@amplitude/session-replay-browser';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});
```

### iOS Implementation

**Swift SDK Plugin:**
```swift
import AmplitudeSwift
import AmplitudeSessionReplay

let sessionReplayPlugin = SessionReplayPlugin()
let amplitude = Amplitude(
    configuration: Configuration(
        apiKey: "API_KEY",
        plugins: [sessionReplayPlugin]
    )
)
```

**Standalone SDK:**
```swift
import AmplitudeSessionReplay

let sessionReplay = SessionReplay(
    configuration: SessionReplayConfiguration(
        apiKey: "API_KEY",
        deviceId: "DEVICE_ID",
        sessionId: "SESSION_ID"
    )
)
```

### Android Implementation

**Android SDK Plugin:**
```kotlin
import com.amplitude.android.Amplitude
import com.amplitude.android.plugins.sessionreplay.SessionReplayPlugin

val sessionReplayPlugin = SessionReplayPlugin()
val amplitude = Amplitude(
    Configuration(
        apiKey = "API_KEY",
        context = applicationContext,
        plugins = listOf(sessionReplayPlugin)
    )
)
```

**Standalone SDK:**
```kotlin
import com.amplitude.sessionreplay.SessionReplay

val sessionReplay = SessionReplay(
    SessionReplayConfiguration(
        apiKey = "API_KEY",
        context = applicationContext,
        deviceId = "DEVICE_ID",
        sessionId = "SESSION_ID"
    )
)
```

### React Native Implementation

```javascript
import { SessionReplayPlugin } from '@amplitude/session-replay-react-native';

const sessionReplayPlugin = new SessionReplayPlugin();
const amplitude = createInstance();
amplitude.add(sessionReplayPlugin);
amplitude.init(API_KEY);
```

### Key API Methods

- `getSessionReplayProperties()`: Returns properties needed to link analytics events with session replays
- `startRecording()`: Begins session recording
- `stopRecording()`: Stops session recording
- `flush()`: Forces sending of recorded session data

### Configuration Options

- `sampleRate`: Controls percentage of sessions recorded (0.0-1.0)
- `maskLevel`: Sets privacy level (Conservative, Light, Medium)
- `euDataResidency`: Enables EU data storage compliance
- `optOut`: Controls user opt-out status
- `autoStart`: Determines if recording starts automatically

The product is available to Growth and Enterprise plans with the Session Replay add-on.