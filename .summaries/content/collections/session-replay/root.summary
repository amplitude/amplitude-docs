# Amplitude Session Replay

## Product Overview

Amplitude Session Replay is a visual analytics tool that captures and recreates user interactions with web and mobile applications in a video-like format. It provides qualitative context to quantitative analytics data, allowing product teams, developers, and analysts to visually observe real user behavior, navigation patterns, and potential issues within applications.

Session Replay works by capturing DOM changes (for web) or view tree changes (for mobile) to create detailed reconstructions of user sessions. This visual layer complements Amplitude's core analytics capabilities by showing the "how" behind user interactions rather than just the "what" represented in traditional analytics events.

## Product Relationships and Features

Session Replay functions as an add-on to Amplitude's core analytics platform, available to Growth and Enterprise plan customers. It offers three primary visualization capabilities:

1. **Session Recordings**: Video-like playback of individual user sessions showing exact interactions, navigation paths, and potential friction points.

2. **Heatmaps**: Aggregate visualizations of user behavior including:
   - Click maps: Showing most-clicked areas by coordinates
   - Selector maps: Highlighting most-interacted elements with rankings
   - Scroll maps: Displaying scroll activity and average page fold locations

3. **Privacy Controls**: Configurable masking options to protect sensitive user data:
   - Conservative masking: Masks all text content and images
   - Light masking: Masks only input fields and images
   - Medium masking: Masks only input fields
   - Custom CSS selector overrides for fine-grained control

Session Replay integrates with Amplitude Analytics through a plugin/middleware architecture, allowing session recordings to be linked directly to analytics events via session IDs and device IDs. This enables the "Microscope" feature, where users can navigate from analytics events directly to associated session replays for deeper context.

## Key Nomenclature and Definitions

- **Session ID**: Unique identifier for a user session that links analytics events to session replay data.
- **Device ID**: Unique identifier for a user's device that helps associate sessions with specific users.
- **Sample Rate**: Configuration parameter (0.0-1.0) that determines what percentage of sessions are recorded.
- **Masking Levels**: Privacy protection settings that control what content is visible in replays:
  - **Conservative**: Masks all text content and images
  - **Light**: Masks only input fields and images
  - **Medium**: Masks only input fields
- **CSS Selector Overrides**: Custom rules to mask, unmask, or exclude specific elements from recording.
- **View Tree/DOM Capture**: The technical process of recording UI changes for later playback.
- **Page Fold**: The portion of a webpage visible without scrolling, visualized in scroll maps.
- **Ingestion Monitor**: Tool to track implementation status and troubleshoot issues with session replay availability.

## Product Ecosystem Integration

Session Replay integrates with the broader Amplitude ecosystem in several ways:

1. **Analytics Integration**: Session replay data is linked to analytics events, allowing users to move seamlessly between quantitative metrics and qualitative session observations.

2. **Behavioral Cohorts**: Users can create cohorts based on specific behaviors in Amplitude Analytics and then watch session replays from those cohorts.

3. **Cross-Platform Support**: Available for web (Browser SDK), iOS, Android, and React Native applications.

4. **Third-Party Analytics Integration**: Can be implemented alongside non-Amplitude analytics through standalone SDKs and integrations with platforms like Segment, Rudderstack, and Google Tag Manager.

5. **Remote Configuration**: Session Replay settings can be managed centrally through Amplitude's organization settings.

6. **Data Residency**: Supports EU data residency requirements for organizations that need to keep data in European data centers.

## Implementation Methods and API Details

Session Replay can be implemented in several ways:

### 1. Browser SDK Plugin (for Amplitude Analytics users)
```javascript
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/plugin-session-replay-browser';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin({
    sampleRate: 1.0,
    maskAllText: false,
    maskAllInputs: true,
    maskAllImages: false
  })]
});
```

### 2. iOS SDK Plugin/Middleware
```swift
import AmplitudeSwift
import AmplitudeSessionReplay

let sessionReplayPlugin = SessionReplayPlugin()
let amplitude = Amplitude(
    configuration: Configuration(
        apiKey: "API_KEY",
        plugins: [sessionReplayPlugin]
    )
)
```

### 3. Android SDK Plugin/Middleware
```kotlin
val sessionReplayPlugin = SessionReplayPlugin()
val amplitude = Amplitude(
    Configuration(
        apiKey = "API_KEY",
        context = applicationContext,
        plugins = listOf(sessionReplayPlugin)
    )
)
```

### 4. Standalone SDK (for third-party analytics users)
```javascript
import { SessionReplay } from '@amplitude/session-replay-browser';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});
```

### 5. Integration Wrappers
- Segment integration (Actions destination, Classic device-mode, Classic cloud-mode)
- Rudderstack integration
- Google Tag Manager implementation

### Runtime Control Methods
- `startRecording()`: Begin session recording
- `stopRecording()`: Pause session recording
- `getSessionReplayProperties()`: Get properties to link analytics events with session replay data
- `flush()`: Force send recorded data to Amplitude servers

The implementation includes configuration options for privacy controls, sampling rates, and data residency, allowing organizations to customize Session Replay to meet their specific requirements and compliance needs.