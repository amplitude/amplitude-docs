# Amplitude Session Replay

## Product Overview

Amplitude Session Replay is a visual analytics tool that captures and recreates user interactions with web and mobile applications in a video-like format. It provides qualitative context to quantitative analytics data, allowing product teams, developers, and analysts to visually observe how users navigate through applications, interact with elements, and encounter issues.

### Key Features

- **Session Recording and Playback**: Creates video-like replays of user sessions by capturing DOM changes (web) or view tree changes (mobile)
- **Heatmaps**: Provides visual representations of user engagement through click maps, selector maps, and scroll maps
- **Privacy Controls**: Offers multiple masking levels and custom CSS selector overrides to protect sensitive user data
- **Cross-Platform Support**: Available for web (Browser SDK), iOS, Android, and React Native applications
- **Integration Options**: Works with Amplitude Analytics and third-party analytics providers
- **Implementation Monitoring**: Includes an Ingestion Monitor tool to track implementation status and troubleshoot issues

## Product Relationships and Architecture

Session Replay functions as an add-on to Amplitude's core analytics platform, available to Growth and Enterprise plans. It can be implemented through:

1. **Plugin/Middleware Architecture** for applications already using Amplitude Analytics:
   - Browser SDK Plugin
   - iOS SDK Plugin/Middleware
   - Android SDK Plugin/Middleware
   - React Native SDK Plugin

2. **Standalone SDKs** for applications using third-party analytics:
   - Browser Standalone SDK
   - iOS Standalone SDK
   - Android Standalone SDK

3. **Integration Wrappers** for specific analytics platforms:
   - Segment Wrapper
   - Rudderstack Wrapper
   - Google Tag Manager implementation

Session Replay captures user interactions and sends this data to Amplitude's servers, where it's processed and made available for viewing in the Amplitude interface. The data is linked to analytics events through shared session and device IDs.

## Key Nomenclature and Definitions

- **Session ID**: Unique identifier that links analytics events to session replay data
- **Device ID**: Unique identifier for a user's device that correlates user identity across analytics and session replay
- **Sample Rate**: Configuration parameter (0.0-1.0) determining what percentage of sessions are recorded
- **Masking Levels**:
  - **Conservative**: Masks all text content and input fields
  - **Light**: Masks only input fields
  - **Medium**: Masks input fields and some text content based on patterns
- **CSS Selector Overrides**: Custom rules to mask, unmask, or exclude specific elements from recording
- **Heatmap Types**:
  - **Click Map**: Shows where users click most frequently
  - **Selector Map**: Shows which DOM elements users interact with most
  - **Scroll Map**: Shows how far users scroll down a page
- **Page Fold**: The portion of a webpage visible without scrolling
- **Ingestion Monitor**: Tool that tracks implementation status and errors

## Product Ecosystem Integration

Session Replay integrates with the broader Amplitude ecosystem in several ways:

1. **Amplitude Analytics**: Session Replay data is linked to analytics events, allowing users to navigate from analytics insights to visual session replays for deeper context
2. **Behavioral Cohorts**: Users can create cohorts based on specific behaviors and then view session replays for those cohorts
3. **Data Management**: Session Replay respects Amplitude's data residency options, including EU data residency
4. **Remote Configuration**: Session Replay settings can be managed remotely through Amplitude's organization settings
5. **Third-Party Analytics Integration**: Through standalone SDKs and wrappers, Session Replay can work alongside third-party analytics solutions

## API Endpoints and Implementation Details

### Web Implementation

```javascript
// Browser SDK Plugin
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/session-replay-browser';

amplitude.init('API_KEY');
amplitude.add(sessionReplayPlugin());

// Configuration options
amplitude.add(sessionReplayPlugin({
  sampleRate: 0.5,
  maskAllInputs: true,
  maskAllText: false
}));

// Standalone SDK
import { SessionReplay } from '@amplitude/session-replay-browser-standalone';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});

// Get properties to add to analytics events
const properties = sessionReplay.getSessionReplayProperties();
```

### iOS Implementation

```swift
// Swift SDK Plugin
import AmplitudeSwift
import AmplitudeSessionReplay

let amplitude = Amplitude(
    configuration: Configuration(
        apiKey: "API_KEY"
    )
)

let sessionReplayPlugin = SessionReplayPlugin()
amplitude.add(plugin: sessionReplayPlugin)

// Standalone SDK
import AmplitudeSessionReplay

let sessionReplay = SessionReplay(
    configuration: SessionReplayConfiguration(
        apiKey: "API_KEY",
        deviceId: "DEVICE_ID",
        sessionId: "SESSION_ID"
    )
)
```

### Android Implementation

```kotlin
// Kotlin SDK Plugin
import com.amplitude.android.Amplitude
import com.amplitude.android.plugins.sessionreplay.SessionReplayPlugin

val amplitude = Amplitude(
    Configuration(
        apiKey = "API_KEY"
    )
)

val sessionReplayPlugin = SessionReplayPlugin()
amplitude.add(sessionReplayPlugin)

// Standalone SDK
import com.amplitude.sessionreplay.SessionReplay

val sessionReplay = SessionReplay(
    SessionReplayConfiguration(
        apiKey = "API_KEY",
        deviceId = "DEVICE_ID",
        sessionId = "SESSION_ID"
    )
)
```

### React Native Implementation

```javascript
import { SessionReplayPlugin } from '@amplitude/session-replay-react-native';
import { Amplitude } from '@amplitude/react-native';

const amplitude = Amplitude.getInstance();
amplitude.init('API_KEY');

const sessionReplayPlugin = new SessionReplayPlugin();
amplitude.add(sessionReplayPlugin);
```

### Integration Wrappers

```javascript
// Segment Wrapper
import { setupAmpSRSegmentWrapper } from '@amplitude/segment-session-replay-wrapper';

setupAmpSRSegmentWrapper(window.analytics, {
  sampleRate: 0.5
});

// Rudderstack Wrapper
import { setupAmpSRRudderstackWrapper } from '@amplitude/rudderstack-session-replay-wrapper';

setupAmpSRRudderstackWrapper(window.rudderanalytics, {
  sampleRate: 0.5
});
```