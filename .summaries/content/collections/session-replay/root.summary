## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics solution that captures and reconstructs user interactions across web, mobile, and React Native applications. The product provides visual session recordings, heatmaps, and behavioral insights to help teams understand user engagement patterns and optimize digital experiences.

## Core Features and Capabilities

**Session Recording and Playback**: Captures DOM interactions, user clicks, scrolls, and form inputs with diff-based replay construction for efficient storage and transmission. Supports shadow DOM capture, CSS stylesheet inlining, and WebView tracking across platforms.

**Heatmaps Visualization**: Provides click maps, selector maps, and scroll maps for web-based applications, offering visual representations of user engagement patterns with viewport scroll depth analysis and interactive element ranking.

**Privacy and Compliance Controls**: Implements comprehensive masking capabilities with three levels (Conservative, Light, Medium), CSS selector-based overrides, and GDPR-compliant consent management integration with Cookie Management Platforms (CMPs).

**Cross-Platform Support**: Native SDKs and plugins for Browser, Android, iOS, React Native, with specialized integrations for third-party analytics providers including Segment and Rudderstack.

## Product Architecture and Integration Patterns

The Session Replay ecosystem follows a modular architecture with three primary integration approaches:

**Plugin Architecture**: For applications already using Amplitude SDKs, Session Replay integrates as plugins (`SessionReplayPlugin`, `AmplitudeSwiftSessionReplayPlugin`) that extend existing analytics implementations without requiring separate initialization.

**Middleware Integration**: For legacy Amplitude SDK implementations, middleware components (`SessionReplayMiddleware`, `AmplitudeiOSSessionReplayMiddleware`) provide session replay capabilities through event middleware patterns using `addEventMiddleware()` methods.

**Standalone SDK Implementation**: For applications using non-Amplitude analytics providers, standalone SDKs require manual session and device ID management with explicit synchronization through methods like `setSessionId()`, `setDeviceId()`, and `getSessionReplayProperties()`.

## Key Nomenclature and Technical Definitions

**Session Replay ID**: Unique identifier (`[Amplitude] Session Replay ID`) automatically injected as an event property to correlate analytics events with replay sessions.

**Sample Rate Configuration**: Controls recording frequency through `sampleRate` parameters, determining what percentage of user sessions are captured for replay analysis.

**Masking Levels**: Privacy protection tiers including Conservative (maximum masking), Light (minimal masking), and Medium (balanced approach) with CSS selector overrides using `data-amp-mask`, `data-amp-unmask`, and `.amp-block` class attributes.

**Device and Session ID Management**: Critical synchronization between analytics providers and Session Replay through `deviceId` and `sessionId` parameters, with automatic mapping from third-party identifiers like Segment's `anonymousId` and Rudderstack's Anonymous ID.

**Remote Configuration**: Server-side control mechanism (`enableRemoteConfig`) allowing dynamic adjustment of recording parameters without client-side code changes.

## Ecosystem Integration and Third-Party Compatibility

Session Replay integrates extensively with major analytics and tag management platforms:

**Segment Integration**: Multiple implementation paths including Amplitude Actions destination with Source Middleware, Classic Device-mode using amplitude-js SDK 5.2.2, and Cloud-mode implementations with Browser SDK shells.

**Google Tag Manager**: Dedicated GTM Web Template for client-side browser implementations with Session Replay Plugin toggle configuration and multiple SDK instantiation troubleshooting.

**Rudderstack Integration**: Wrapper implementation with Cloud-mode support, method overrides for `rudderAnalytics.track()` and `rudderAnalytics.page()` events, and automatic ID mapping from Rudderstack session management.

## API Endpoints and Technical Implementation

**Core SDK Methods**:
- `sessionReplay.init()` - Standalone SDK initialization
- `amplitude.add(plugin)` / `amplitude.remove(plugin)` - Plugin management
- `startRecording()` / `stopRecording()` - Recording control
- `getSessionReplayProperties()` - Third-party integration property extraction

**Configuration Parameters**:
- `serverZone: 'EU'` - European data residency compliance
- `storeType: 'IndexedDB'` - Browser storage mechanism selection
- `optOut` - User consent and privacy control
- `flushEventsOnClose` - Data transmission on session termination

**Privacy and Compliance APIs**:
- DSAR API integration for data subject access requests
- User Privacy API for data deletion compliance
- Consent Management Platform (CMP) integration for cookie banner management

## Monitoring and Debugging Tools

**Session Replay Ingestion Monitor**: Dedicated monitoring interface tracking ingestion status with HTTP status code analysis (200 successful, 429 throttling, 402 quota exceeded) and invalid session ID debugging capabilities accessible through the Users & Sessions tab.

The product supports Growth and Enterprise plan tiers with specific version requirements including Browser SDK Plugin 1.7.0+, Session Replay Standalone SDK 1.14.0+, and maintenance SDK versions (Android 2.40.1+, iOS 8.21.0+) for optimal functionality and feature access.