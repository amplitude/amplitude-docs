# Amplitude Session Replay

## Product Overview

Amplitude Session Replay is a visual analytics tool that captures and recreates user interactions with web and mobile applications in a video-like format. It records DOM changes (web) or view tree changes (mobile) to create detailed replays of user sessions, allowing teams to visualize exactly how users navigate through applications, interact with elements, and encounter issues.

Key features include:
- Video-like session recordings of user interactions
- Heatmaps showing click patterns, scroll depth, and element interactions
- Configurable privacy controls with multiple masking levels
- Cross-platform support (Web, iOS, Android, React Native)
- Integration with analytics providers (Amplitude, Segment, Rudderstack)
- Sampling controls to manage data volume
- Implementation monitoring tools

## Product Relationships and Features

Session Replay consists of three core components:

1. **Session Recording**
   - Records user interactions across web and mobile platforms
   - Creates video-like replays through DOM/view tree change capture
   - Offers configurable sampling rates to control data volume
   - Provides privacy masking options to protect sensitive information

2. **Heatmaps**
   - Click maps showing interaction frequency hotspots
   - Scrollmaps displaying scroll depth and the "average fold"
   - Selectors view for analyzing specific UI element interactions
   - Filtering by URL patterns and device types

3. **Ingestion Monitor**
   - Tracks implementation status and health
   - Displays metrics for successful requests, throttling errors, and quota exceeded errors
   - Helps troubleshoot unavailable session replays

The product offers platform-specific SDKs:
- **Web**: Browser SDK Plugin, Standalone SDK, Google Tag Manager, Segment/Rudderstack wrappers
- **iOS**: Swift SDK Plugin, SDK Middleware, Standalone SDK, Segment integration
- **Android**: SDK Plugin, SDK Middleware, Standalone SDK
- **React Native**: SDK Plugin

## Key Nomenclature and Definitions

- **Session ID**: Unique identifier linking analytics events to session recordings
- **Device ID**: Identifier matching recordings to specific users
- **Sample Rate**: Percentage of sessions recorded (0.0 to 1.0)
- **Masking Levels**:
  - Conservative: Highest privacy level, masks most elements
  - Medium: Balanced privacy approach
  - Light: Minimal masking
  - Custom: User-defined masking using CSS selectors

- **CSS Selector Overrides**: Custom rules to mask, unmask, or exclude specific elements
- **Heatmap Types**:
  - Click maps: Visual representation of click locations
  - Scrollmaps: Visualization of scroll depth
  - Selectors: Analysis of specific UI element interactions

- **Average Fold**: Typical scroll depth reached by users
- **Ingestion Monitor Metrics**:
  - Status 200: Successful requests
  - Status 429: Throttling errors
  - Status 402: Quota exceeded errors
  - Invalid session IDs: Session identification issues

## Product Ecosystem Integration

Session Replay is an add-on feature for Amplitude's Growth and Enterprise plans, extending core analytics capabilities with visual context. It captures interactions through SDK implementations, stores session data in Amplitude's infrastructure (with EU data residency options), and makes recordings accessible through the Amplitude interface.

The product connects recordings to analytics events, providing qualitative insights that complement the quantitative metrics from Amplitude's core analytics platform.

## API and Implementation Details

### Web Implementation

**Browser SDK Plugin:**
```javascript
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/session-replay-browser';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

**Standalone SDK:**
```javascript
import { SessionReplay } from '@amplitude/session-replay-browser-standalone';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});

// Get properties to add to analytics events
const sessionReplayProperties = sessionReplay.getSessionReplayProperties();
```

### iOS Implementation

**Swift SDK Plugin:**
```swift
import AmplitudeSwift
import AmplitudeSessionReplay

let sessionReplayPlugin = SessionReplayPlugin()
let amplitude = Amplitude(
    configuration: Configuration(
        apiKey: "API_KEY",
        plugins: [sessionReplayPlugin]
    )
)
```

**Standalone SDK:**
```swift
import AmplitudeSessionReplay

let sessionReplay = SessionReplay(
    configuration: SessionReplayConfiguration(
        apiKey: "API_KEY",
        deviceId: "DEVICE_ID",
        sessionId: "SESSION_ID"
    )
)
```

### Android Implementation

**Android SDK Plugin:**
```kotlin
import com.amplitude.android.Amplitude
import com.amplitude.android.plugins.sessionreplay.SessionReplayPlugin

val sessionReplayPlugin = SessionReplayPlugin()
val amplitude = Amplitude(
    Configuration(
        apiKey = "API_KEY",
        context = applicationContext,
        plugins = listOf(sessionReplayPlugin)
    )
)
```

**Standalone SDK:**
```kotlin
import com.amplitude.sessionreplay.SessionReplay

val sessionReplay = SessionReplay(
    SessionReplayConfiguration(
        apiKey = "API_KEY",
        context = applicationContext,
        deviceId = "DEVICE_ID",
        sessionId = "SESSION_ID"
    )
)
```

### React Native Implementation

```javascript
import { SessionReplayPlugin } from '@amplitude/session-replay-react-native';
import { Amplitude } from '@amplitude/react-native';

const sessionReplayPlugin = new SessionReplayPlugin();
const amplitude = Amplitude.getInstance();
amplitude.init('API_KEY', undefined, {
  plugins: [sessionReplayPlugin]
});
```

Common configuration options across all SDKs include sample rate, mask level, opt-out controls, and EU data residency settings. The product offers multiple privacy protection layers, with UI settings taking precedence over SDK configurations to ensure organizational privacy policies are enforced.