## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics solution that captures and reconstructs user interactions across web, mobile, and React Native applications. The product enables organizations to record, analyze, and visualize user sessions through video-like replays, heatmaps, and behavioral analytics while maintaining strict privacy compliance and data protection standards.

## Core Features and Capabilities

**Session Recording and Playback**: The platform captures DOM interactions, view tree changes, and user behaviors through diff-based replay construction, storing compressed session data for later analysis. Sessions are reconstructed using captured snapshots and incremental changes, providing detailed insights into user journeys.

**Heatmaps and Visual Analytics**: Session Replay includes three types of heatmaps - click maps, selector maps, and scroll maps - that provide visual representations of user engagement patterns. These features require Browser SDK Plugin 1.7.0+ or Standalone SDK 1.14.0+ and are available for Growth/Enterprise plans.

**Multi-Platform Support**: The product supports web browsers, Android (native and Kotlin), iOS/iPadOS (Swift and legacy), and React Native applications through dedicated SDKs, plugins, and middleware implementations.

**Privacy and Compliance Framework**: Comprehensive privacy controls include three masking levels (Conservative, Light, Medium), CSS selector-based masking overrides, user consent management, and GDPR compliance features with configurable data retention and opt-out mechanisms.

## Product Architecture and Integration Patterns

**SDK Implementation Models**: Session Replay offers multiple integration approaches:
- **Plugin Architecture**: For applications already using Amplitude Analytics SDKs
- **Middleware Integration**: For legacy/maintenance SDK implementations  
- **Standalone SDKs**: For applications using third-party analytics providers
- **Third-Party Wrappers**: Pre-built integrations for Segment, Rudderstack, and Google Tag Manager

**Session and Device ID Management**: The system requires synchronized session IDs and device IDs between Session Replay and analytics events. Standalone implementations require manual session management using `setSessionId()` and `setDeviceId()` methods, while plugin implementations automatically inherit these identifiers.

**Data Flow and Storage**: Session data is captured locally using IndexedDB (web) or native storage, then transmitted to Amplitude servers with configurable flush intervals, retry mechanisms, and compression options including experimental web worker support.

## Key Nomenclature and Definitions

**Session Replay ID**: Unique identifier (`[Amplitude] Session Replay ID`) automatically injected into analytics events to correlate session recordings with behavioral data.

**Masking Levels**: 
- **Conservative**: Maximum privacy protection with extensive data masking
- **Light**: Minimal masking for basic privacy compliance
- **Medium**: Balanced approach between usability and privacy

**Sample Rate**: Percentage-based configuration (`sampleRate`) controlling what portion of user sessions are recorded, supporting both local and remote configuration management.

**Privacy Configuration**: CSS selector-based system using classes like `.amp-block`, `amp-mask`, `amp-unmask` for granular element-level privacy controls.

**UGC Filter Rules**: Glob pattern-based system (`ugcFilterRules`) for detecting and sanitizing sensitive user-generated content in URLs during recording.

## Ecosystem Integration and Data Residency

**Analytics Platform Integration**: Session Replay integrates with Amplitude's broader analytics ecosystem, supporting behavioral cohorts, user segmentation, and cross-platform user journey analysis. The system maintains compatibility with both current and maintenance SDK versions.

**Third-Party Analytics Support**: Comprehensive integration capabilities with Segment (Actions, Classic Device-mode, Classic Cloud-mode), Rudderstack, and other analytics providers through wrapper plugins and standalone implementations.

**Data Residency and Compliance**: Configurable server zones (US/EU) through `serverZone` parameter, supporting regional data residency requirements and GDPR compliance with built-in data subject access request (DSAR) and User Privacy API integration.

**Remote Configuration**: Enterprise-grade remote configuration system (`enableRemoteConfig`) allowing dynamic adjustment of sampling rates, privacy settings, and feature toggles without code deployment.

## Technical Implementation Details

**API Endpoints and Configuration**:
- `configServerUrl` and `trackServerUrl` for custom endpoint configuration
- `getSessionReplayProperties()` method for extracting session metadata
- `flush()` method for manual data transmission
- `start()`/`stop()` methods for programmatic recording control

**Platform-Specific Components**:
- **Android**: `SessionReplayPlugin`, `SessionReplayMiddleware` classes with Maven Central distribution
- **iOS**: `AmplitudeSwiftSessionReplayPlugin`, `AmplitudeiOSSessionReplayMiddleware` with SPM/CocoaPods support  
- **React Native**: `AmpMaskView` components for element-level masking
- **Web**: `@amplitude/plugin-session-replay-browser` with Shadow DOM support and performance optimizations

**Monitoring and Debugging**: Session Replay Ingestion Monitor provides real-time tracking of ingestion status with HTTP status code monitoring (200, 429, 402) and invalid session ID detection for implementation troubleshooting.

The product represents a comprehensive session analytics solution designed for enterprise-scale implementations with extensive customization, privacy compliance, and cross-platform compatibility requirements.