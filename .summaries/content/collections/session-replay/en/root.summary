## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user experience analytics solution that captures and reconstructs user interactions on web, mobile, and React Native applications. The product enables organizations to visualize user behavior through recorded sessions, heatmaps, and detailed interaction tracking while maintaining strict privacy compliance and data protection standards.

## Product Architecture and Integration Ecosystem

Session Replay operates as a modular system with multiple implementation pathways designed to integrate with existing analytics infrastructures:

**Core Implementation Modes:**
- **Plugin Architecture**: Integrates with existing Amplitude SDKs (Browser SDK 2, iOS Swift SDK, Android-Kotlin SDK)
- **Middleware Integration**: Works with maintenance/legacy Amplitude SDKs (iOS SDK 8.21.0+, Android SDK 2.40.1+)
- **Standalone SDKs**: Independent implementation for third-party analytics providers
- **Third-Party Wrappers**: Specialized integrations for Segment, Rudderstack, and Google Tag Manager

**Platform Coverage:**
- Web browsers via Browser SDK Plugin and Standalone SDK
- iOS/iPadOS applications through Swift plugins and middleware
- Android applications via Kotlin plugins and middleware  
- React Native cross-platform applications
- Integration with analytics platforms (Segment, Rudderstack, GTM)

## Key Features and Capabilities

**Session Recording and Replay:**
- DOM capture with diff-based replay construction for web applications
- View tree capture for mobile applications (iOS/Android)
- Real-time session reconstruction with microscope-level detail
- WebView tracking support across platforms
- Shadow DOM support for complex web applications

**Heatmaps and Behavioral Analytics:**
- Click maps showing user interaction hotspots
- Selector maps for element-specific engagement analysis
- Scroll maps tracking viewport depth and scroll behavior
- Behavioral cohorts integration for user segmentation
- Interactive elements ranking and engagement metrics

**Privacy and Compliance Framework:**
- Three-tier masking system (Conservative, Light, Medium levels)
- CSS selector-based masking overrides with `.amp-block` exclusion
- GDPR and privacy regulation compliance tools
- Consent Management Platform (CMP) integration
- First-party cookie management with user opt-out mechanisms
- Custom privacy policy disclosure templates

## Technical Implementation and Configuration

**Core Configuration Parameters:**
- `sampleRate`: Controls percentage of sessions recorded (0.0-1.0)
- `maskLevel`: Sets privacy masking intensity (Conservative/Light/Medium)
- `deviceId`/`sessionId`: User and session identification management
- `serverZone`: EU data residency compliance configuration
- `optOut`: User consent and privacy control mechanisms

**Key API Methods and Endpoints:**
- `amplitude.add(sessionReplayPlugin)`: Plugin installation
- `sessionReplay.init()`: Standalone SDK initialization
- `getSessionReplayProperties()`: Session metadata retrieval
- `setSessionId()`/`setDeviceId()`: Manual ID management
- `start()`/`stop()`: Recording control methods
- `addEventMiddleware()`/`removeEventMiddleware()`: Middleware management

**Storage and Performance:**
- IndexedDB storage (`storeType`) for browser implementations
- Idle compression via `performanceConfig` optimization
- Experimental WebWorker support for performance enhancement
- Remote configuration with `enableRemoteConfig` for dynamic updates

## Data Management and Monitoring

**Ingestion and Quality Control:**
- Session Replay Ingestion Monitor for status tracking
- HTTP status code monitoring (200/429/402) for debugging
- Invalid session ID detection and troubleshooting
- Quota management and throttling controls

**Privacy and Data Subject Rights:**
- DSAR (Data Subject Access Request) API integration
- User Privacy API for data deletion requests
- Session replay metadata management
- Data retention configuration controls

## Integration Nomenclature and Key Definitions

**Session Replay ID**: Unique identifier (`[Amplitude] Session Replay ID`) automatically injected into events for correlation between analytics data and replay sessions

**Masking Levels**: 
- Conservative: Maximum privacy protection with extensive PII masking
- Light: Minimal masking for basic privacy compliance
- Medium: Balanced approach between usability and privacy

**Remote Configuration**: Server-side configuration management that takes precedence over SDK settings, enabling dynamic privacy and sampling adjustments

**Middleware vs Plugin**: Middleware integrates with legacy/maintenance SDKs, while plugins work with current-generation SDKs

The Session Replay ecosystem supports complex enterprise deployments with multiple analytics providers while maintaining unified session tracking, comprehensive privacy controls, and seamless integration with existing Amplitude Analytics infrastructure.