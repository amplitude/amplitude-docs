## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics solution that captures and reconstructs user interactions across web, mobile, and React Native applications. The platform provides visual insights through session recordings, heatmaps, and behavioral analytics while maintaining robust privacy controls and compliance capabilities.

## Product Architecture and Integration Ecosystem

Session Replay operates through multiple SDK implementations designed for different development environments and analytics configurations:

**Core SDK Types:**
- **Plugin Architecture**: Integrates with existing Amplitude Analytics SDKs (Browser SDK 2, Android-Kotlin SDK, iOS Swift SDK)
- **Middleware Integration**: Works with maintenance/legacy Amplitude SDKs (Android SDK 2.40.1+, iOS SDK 8.21.0+)
- **Standalone SDKs**: Independent implementation for third-party analytics providers
- **Third-Party Integrations**: Specialized wrappers for Segment, Rudderstack, and Google Tag Manager

**Platform Coverage:**
- Web browsers via Browser SDK Plugin and Standalone SDK
- Android applications through Plugin, Middleware, and Standalone implementations
- iOS/iPadOS through Plugin, Middleware, and Standalone SDKs
- React Native cross-platform applications
- Google Tag Manager web implementations

## Key Features and Capabilities

**Session Recording Technology:**
- DOM capture and diff-based replay construction for web applications
- View tree capture for native mobile applications
- Real-time session reconstruction with visual playback
- IndexedDB storage with configurable retention periods
- WebWorker compression for performance optimization

**Heatmaps and Visual Analytics:**
- Click maps showing user interaction hotspots
- Selector maps for element-specific engagement analysis
- Scroll maps indicating content consumption patterns
- Microscope feature for detailed interaction analysis
- URL pattern matching for targeted analysis

**Privacy and Compliance Framework:**
- Three-tier masking system (Conservative, Light, Medium)
- CSS selector-based masking overrides with `.amp-block` class
- AmpMaskView components for React Native privacy controls
- Configurable data retention and opt-out mechanisms
- GDPR compliance with Consent Management Platform (CMP) integration
- UGC Filter Rules using glob patterns for URL sanitization

## Technical Implementation and Configuration

**Core Configuration Parameters:**
- `sampleRate`: Controls percentage of sessions recorded (0.0-1.0)
- `maskLevel`/`privacyConfig`: Defines data masking intensity
- `deviceId`/`sessionId`: Identity management for session correlation
- `serverZone`: EU data residency compliance
- `enableRemoteConfig`: Dynamic configuration management
- `optOut`: User consent and privacy controls

**Key Methods and APIs:**
- `sessionReplay.init()`: SDK initialization
- `sessionReplay.setSessionId()`/`sessionReplay.setDeviceId()`: Identity synchronization
- `getSessionReplayProperties()`: Event property injection for third-party analytics
- `start()`/`stop()`: Recording control
- `flush()`: Manual data transmission
- `amplitude.add()`/`amplitude.remove()`: Plugin lifecycle management

**Integration Patterns:**
- **Plugin Integration**: `amplitude.add(sessionReplayPlugin)` for existing Amplitude implementations
- **Middleware Integration**: `addEventMiddleware(SessionReplayMiddleware)` for legacy SDKs
- **Standalone Integration**: Manual session/device ID synchronization with third-party analytics
- **Segment Integration**: Automatic session ID extraction via AmplitudeSession plugin
- **GTM Integration**: Template-based configuration through Google Tag Manager

## Data Management and Monitoring

**Ingestion Monitoring:**
- Session Replay Ingestion Monitor tracks HTTP status codes (200, 429, 402)
- Invalid session ID detection and debugging
- Real-time ingestion health monitoring

**Privacy Controls:**
- Element-level masking with `amp-mask`/`amp-unmask`/`amp-block` attributes
- Form field and text input automatic masking
- CSS selector-based privacy overrides
- Remote configuration for dynamic privacy settings
- Conflict resolution between SDK and UI privacy settings

**Data Retention and Compliance:**
- Configurable session replay retention periods
- DSAR API compliance for data subject requests
- User Privacy API for consent management
- First-party cookie categorization for analytics compliance

The Session Replay ecosystem integrates seamlessly with Amplitude's broader analytics platform while providing flexible deployment options for organizations using third-party analytics providers, ensuring comprehensive user behavior insights regardless of existing technical infrastructure.