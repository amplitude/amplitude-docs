## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics platform that captures, processes, and visualizes user interactions across web, mobile, and React Native applications. The platform provides detailed session recordings, heatmaps, and behavioral analytics to help organizations understand user engagement patterns and optimize their digital experiences.

## Core Features and Capabilities

**Session Recording and Playback**: Captures complete user sessions through DOM-based recording for web applications and view tree capture for mobile platforms, using diff-based replay construction for efficient storage and transmission.

**Heatmaps and Visual Analytics**: Provides click maps, selector maps, and scroll maps that visualize user engagement patterns, interactive element rankings, and viewport scroll depth analysis exclusively for web-based applications.

**Multi-Platform Support**: Comprehensive SDK coverage including Browser SDK plugins, Android/iOS native SDKs, React Native plugins, and standalone implementations for third-party analytics integration.

**Privacy and Compliance**: Configurable masking levels (Conservative, Light, Medium) with CSS selector-based overrides, data anonymization capabilities, DSAR API support, and EU data residency options.

## Product Architecture and Integration Patterns

### SDK Integration Models

**Plugin Architecture**: For applications already using Amplitude Analytics SDKs, Session Replay integrates as plugins (`SessionReplayPlugin`, `AmplitudeSwiftSessionReplayPlugin`) or middleware (`SessionReplayMiddleware`, `AmplitudeiOSSessionReplayMiddleware`) that extend existing instrumentation.

**Standalone Implementation**: Independent SDKs (`@amplitude/session-replay-browser`, Session Replay Android Standalone) for organizations using third-party analytics providers like Segment, Rudderstack, or custom analytics solutions.

**Third-Party Integrations**: Specialized wrappers and plugins for analytics platforms including Segment Analytics (`@amplitude/segment-session-replay-plugin`), Rudderstack integration, and Google Tag Manager implementations.

### Data Flow and Session Management

Session Replay operates through synchronized session and device ID management across analytics providers. The system captures user interactions, processes them through configurable sampling rates (`sampleRate`), applies privacy masking rules, and stores data in IndexedDB (web) or native storage (mobile) before transmission to Amplitude's ingestion endpoints.

## Key Nomenclature and Technical Concepts

**Session Replay ID**: Unique identifier (`[Amplitude] Session Replay ID`) automatically injected into analytics events to correlate session recordings with behavioral data.

**Sampling Configuration**: `sampleRate` parameter controls the percentage of sessions recorded, supporting both local configuration and remote configuration (`enableRemoteConfig`) for dynamic adjustment.

**Masking Levels**: Privacy protection through Conservative (maximum masking), Light (minimal masking), and Medium (balanced) configurations, with CSS selector overrides (`data-amp-mask`, `data-amp-unmask`, `.amp-block`) taking precedence over SDK settings.

**Device and Session Synchronization**: Critical requirement for standalone implementations to manually manage `deviceId` and `sessionId` alignment between Session Replay and primary analytics providers through methods like `setSessionId()` and `setDeviceId()`.

## Platform-Specific Implementation Details

### Web Platform
- **Browser SDK Plugin**: `@amplitude/plugin-session-replay-browser` for Amplitude Browser SDK 2.0+
- **Standalone SDK**: `@amplitude/session-replay-browser` for non-Amplitude analytics
- **GTM Integration**: Google Tag Manager Web Template for tag management systems
- **Storage**: IndexedDB with configurable `storeType` options
- **Limitations**: Canvas/WebGL content not captured, Shadow DOM support available

### Android Platform
- **Plugin**: `SessionReplayPlugin` for Android-Kotlin SDK
- **Middleware**: `SessionReplayMiddleware` for maintenance Android SDK 2.40.1+
- **Standalone**: Independent SDK for third-party analytics integration
- **Capture Method**: View tree capture with diff-based replay construction
- **Limitations**: WebView content not supported, Jetpack Compose compatibility varies

### iOS Platform
- **Plugin**: `AmplitudeSwiftSessionReplayPlugin` for iOS Swift SDK
- **Middleware**: `AmplitudeiOSSessionReplayMiddleware` for maintenance iOS SDK 8.21.0+
- **Segment Integration**: `AmplitudeSegmentSessionReplayPlugin` for Analytics-Swift library
- **Standalone**: Independent implementation for non-Amplitude analytics

### React Native
- **Plugin**: `@amplitude/plugin-session-replay-react-native`
- **Masking**: `AmpMaskView` component with `amp-mask`/`amp-unmask` properties
- **WebView Support**: Tracking capabilities for embedded web content

## API Endpoints and Key Methods

### Core Session Management
- `sessionReplay.init()` - Initialize standalone SDK
- `sessionReplay.setSessionId()` - Manual session ID synchronization
- `sessionReplay.setDeviceId()` - Device ID alignment
- `getSessionReplayProperties()` - Retrieve session metadata for third-party analytics
- `amplitude.add(plugin)` / `amplitude.remove(plugin)` - Plugin lifecycle management

### Recording Control
- `startRecording()` / `stopRecording()` - Manual recording control
- `start()` / `stop()` - React Native recording methods
- `flush()` - Force data transmission
- `optOut` - User consent management

### Privacy and Configuration
- `privacyConfig` - Web masking configuration
- `maskLevel` - Mobile privacy settings
- `serverZone` - EU data residency configuration
- `enableRemoteConfig` - Dynamic configuration enablement

## Monitoring and Debugging

**Session Replay Ingestion Monitor**: Dedicated monitoring tool tracking ingestion health through HTTP status codes (200 success, 429 throttling, 402 quota exceeded) and invalid session ID detection, accessible through the Users & Sessions tab for implementation troubleshooting.

**Data Retention and Compliance**: Configurable retention periods, bot filtering, DSAR API support for data subject requests, and User Privacy API for data deletion compliance.

The platform integrates seamlessly with Amplitude's broader analytics ecosystem, supporting Behavioral Cohorts creation, device identifier correlation, and comprehensive user journey analysis across the entire product experience.