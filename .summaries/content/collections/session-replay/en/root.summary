## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics feature that captures and reconstructs user interactions on web, mobile, and React Native applications. The product provides visual insights through session recordings, heatmaps, and behavioral analysis to help teams understand user experience and optimize their applications.

## Core Features and Capabilities

**Session Recording**: Captures DOM interactions, user clicks, scrolls, and navigation patterns through view tree capture and diff-based replay construction. The system supports real-time session reconstruction with visual playback capabilities.

**Heatmaps**: Provides three visualization types - click maps, selector maps, and scroll maps - that display aggregated user engagement patterns across web applications. Available through the Microscope feature for Growth/Enterprise plans.

**Privacy and Masking**: Implements three masking levels (Conservative, Light, Medium) with CSS selector-based overrides and custom data attribute controls. Supports GDPR compliance through consent management integration and privacy policy templates.

**Multi-Platform Support**: Native SDKs and plugins for Browser, Android, iOS, React Native, with specialized integrations for third-party analytics providers including Segment, Rudderstack, and Google Tag Manager.

## Product Architecture and Integration Patterns

**SDK Integration Models**:
- **Plugin Architecture**: For applications already using Amplitude SDKs (Browser SDK 2, Android-Kotlin SDK, iOS Swift SDK)
- **Middleware Pattern**: For legacy maintenance SDKs (Android SDK 2.40.1+, iOS SDK 8.21.0+)  
- **Standalone SDKs**: For applications using third-party analytics providers requiring manual session/device ID management
- **Wrapper Integrations**: Pre-built connectors for Segment and Rudderstack with automatic property injection

**Data Flow**: Session replay data flows through configurable sampling rates, privacy masking, and storage mechanisms (IndexedDB for browser, native storage for mobile) before transmission to Amplitude's ingestion endpoints.

## Key Nomenclature and Definitions

**Session Management**:
- `sessionId`: Unique identifier linking replay data to analytics sessions
- `deviceId`: Device-level identifier for cross-session user tracking
- `sampleRate`: Percentage-based recording probability (0.0-1.0)

**Privacy Controls**:
- `maskLevel`: Predefined privacy settings (Conservative/Light/Medium)
- `privacyConfig`: Custom CSS selector-based masking rules
- `amp-mask`/`amp-unmask`: Data attributes for element-level privacy control
- `optOut`: User consent mechanism for replay collection

**Configuration Parameters**:
- `enableRemoteConfig`: Server-side configuration management
- `serverZone`: EU data residency compliance (`ServerZone.EU`)
- `flushEventsOnClose`: Data transmission on application termination
- `storeType`: Local storage mechanism selection

## API Endpoints and Methods

**Core SDK Methods**:
- `sessionReplay.init()`: Initialize standalone SDK
- `amplitude.add(plugin)`: Plugin registration
- `getSessionReplayProperties()`: Retrieve session metadata for third-party integration
- `setSessionId()`/`setDeviceId()`: Manual ID synchronization
- `start()`/`stop()`: Recording control methods

**Integration Endpoints**:
- Session Replay Ingestion Monitor: HTTP status tracking (200/429/402)
- DSAR API: Data subject access request handling
- User Privacy API: Data deletion compliance

**Third-Party Integration Methods**:
- `addEventMiddleware()`/`removeEventMiddleware()`: Middleware pattern implementation
- `createSegmentActionsPlugin()`: Segment wrapper initialization
- `rudderAnalytics.track()`/`rudderAnalytics.page()`: Rudderstack method overrides

## Ecosystem Integration

Session Replay integrates with Amplitude's broader analytics platform through automatic event property injection (`[Amplitude] Session Replay ID`), behavioral cohort creation, and unified user journey analysis. The product supports enterprise data governance through consent management platform (CMP) integration, organizational privacy settings, and configurable data retention policies.

The ingestion monitoring system provides operational visibility through status code tracking and session ID validation, while remote configuration enables dynamic privacy and sampling adjustments without code deployment.