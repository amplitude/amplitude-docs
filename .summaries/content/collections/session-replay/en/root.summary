## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics tool that captures and reconstructs user interactions across web, mobile, and React Native applications. The product enables organizations to record, analyze, and visualize user sessions through DOM capture, view tree recording, and behavioral heatmaps to understand user engagement patterns and optimize user experiences.

## Product Architecture and Integration Ecosystem

Session Replay operates as a modular system with multiple implementation approaches across different platforms and analytics configurations:

**Core Implementation Patterns:**
- **Plugin Architecture**: Integrates with existing Amplitude Analytics SDKs through plugins (Browser SDK 2, iOS Swift SDK, Android-Kotlin SDK)
- **Middleware Integration**: Works with maintenance SDKs through middleware components (iOS SDK 8.21.0+, Android SDK 2.40.1+)
- **Standalone SDKs**: Independent implementations for organizations using third-party analytics providers
- **Third-Party Wrappers**: Specialized integrations for Segment, Rudderstack, and Google Tag Manager

**Platform Coverage:**
- **Web/Browser**: Browser SDK Plugin, Standalone SDK, GTM integration
- **iOS/iPadOS**: Plugin, Middleware, and Standalone implementations with Swift Package Manager/CocoaPods support
- **Android**: Plugin, Middleware, and Standalone with Maven Central distribution
- **React Native**: Plugin and Standalone SDKs with WebView tracking capabilities

## Key Features and Capabilities

**Session Recording and Replay:**
- DOM capture with diff-based processing for web applications
- View tree capture and reconstruction for mobile platforms
- Real-time session reconstruction with microscope feature for detailed analysis
- WebView tracking support across React Native implementations

**Heatmaps and Behavioral Analytics:**
- Click maps, selector maps, and scroll maps for web-based applications
- Viewport scroll depth analysis and average page fold metrics
- Behavioral cohort analysis with device identifier correlation
- URL pattern matching for targeted analysis

**Privacy and Data Management:**
- Three-tier masking system (Conservative, Light, Medium) for PII protection
- CSS selector-based masking overrides with conflict resolution
- Custom masking components (AmpMaskView, amp-mask/amp-unmask properties)
- UGC filter rules using glob patterns for URL sanitization
- GDPR compliance tools with consent management platform integration

**Performance and Storage:**
- IndexedDB storage with configurable storeType options
- RequestIdleCallback optimization for performance
- WebWorker compression for efficient data processing
- Configurable sample rates for resource management

## Technical Nomenclature and Definitions

**Core Configuration Objects:**
- `SessionReplayConfig`: Primary configuration interface across all platforms
- `privacyConfig`: Privacy settings and masking configuration
- `interactionConfig`: User interaction tracking and UGC filtering settings
- `ugcFilterRules`: URL pattern matching rules for content sanitization

**Key Methods and Properties:**
- `getSessionReplayProperties()`: Retrieves session replay metadata for event correlation
- `setSessionId()` / `setDeviceId()`: Manual session and device identifier management
- `start()` / `stop()`: Session recording lifecycle control
- `sampleRate`: Probabilistic sampling configuration (0.0-1.0)
- `enableRemoteConfig`: Server-side configuration management

**Privacy and Masking:**
- `MaskLevel`: Enumerated privacy levels (Conservative, Light, Medium)
- `.amp-block`: CSS class for content exclusion
- `shouldInlineStylesheet`: CSS asset handling configuration
- `optOut`: User consent and privacy control

**Platform-Specific Components:**
- `SessionReplayPlugin` / `SessionReplayMiddleware`: Integration patterns
- `AmplitudeSwiftSessionReplayPlugin`: iOS Swift SDK integration
- `AmplitudeSegmentSessionReplayPlugin`: Segment-specific implementations
- `AmpMaskView`: React Native masking component

## API Endpoints and Integration Points

**SDK Installation Endpoints:**
- NPM: `@amplitude/plugin-session-replay-browser`, `@amplitude/session-replay-browser`
- Maven Central: `plugin-session-replay-android`, `session-replay-android`
- Swift Package Manager: `AmplitudeSessionReplay-iOS`
- CDN: Script tag integration for standalone implementations

**Configuration Methods:**
- `amplitude.add(sessionReplayPlugin)`: Plugin registration
- `amplitude.remove(sessionReplayPlugin)`: Plugin deregistration
- `sessionReplay.init(config)`: Standalone SDK initialization
- `addEventMiddleware()` / `removeEventMiddleware()`: Middleware management

**Data Transmission:**
- `flush()`: Manual data transmission trigger
- `uploadEvents()`: Event batching and transmission
- HTTP status monitoring (200, 429, 402) through Ingestion Monitor
- EU data residency support via `serverZone` configuration

## Monitoring and Debugging Tools

**Session Replay Ingestion Monitor:**
- Real-time ingestion status tracking with HTTP status code visualization
- Invalid session ID detection and debugging
- Throttling (429) and quota exceeded (402) error monitoring
- Users & Sessions tab for implementation troubleshooting

**Privacy and Compliance Tools:**
- Cookie banner integration with Consent Management Platforms
- First-party cookie categorization for analytics compliance
- Privacy policy disclosure templates and implementation guidance
- Data retention configuration and opt-out mechanism management

The Session Replay ecosystem provides comprehensive user behavior analytics with flexible implementation options, robust privacy controls, and extensive platform coverage, enabling organizations to capture and analyze user interactions while maintaining compliance with privacy regulations and performance requirements.