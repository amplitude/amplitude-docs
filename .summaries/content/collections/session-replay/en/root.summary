## Amplitude Session Replay

Amplitude Session Replay is a comprehensive user behavior analytics tool that captures and reconstructs user interactions across web, mobile, and React Native applications. The product provides visual insights through session recordings, heatmaps, and behavioral analytics to help teams understand user engagement patterns and optimize user experiences.

## Product Architecture and Integration Ecosystem

Session Replay operates through multiple SDK implementations designed to integrate with existing analytics infrastructure:

**Core SDK Types:**
- **Plugin Architecture**: Extends existing Amplitude SDKs (Browser SDK 2, Android-Kotlin SDK, iOS Swift SDK) through plugin systems
- **Middleware Integration**: Works with maintenance/legacy Amplitude SDKs through middleware layers
- **Standalone SDKs**: Independent implementations for teams using third-party analytics providers
- **Third-Party Wrappers**: Specialized integrations for Segment, Rudderstack, and Google Tag Manager

**Platform Coverage:**
- Web browsers via Browser SDK Plugin and Standalone SDK
- Android applications through Plugin and Middleware approaches
- iOS/iPadOS through Plugin and Middleware implementations
- React Native cross-platform support
- Google Tag Manager web template integration

## Key Features and Capabilities

**Session Recording**: Captures DOM interactions, view tree changes, and user behaviors through diff-based replay construction. The system uses techniques like DOM capture, view tree diffing, and compressed storage in IndexedDB for web applications.

**Heatmaps**: Provides visual engagement analytics through click maps, selector maps, and scroll maps, showing user interaction patterns, viewport scroll depth, and average page fold metrics. Available for Growth/Enterprise plans with Browser SDK Plugin 1.7.0+ or Standalone SDK 1.14.0+.

**Privacy and Masking**: Implements three masking levels (Conservative, Light, Medium) with CSS selector-based overrides, PII masking compliance, and form field protection. Includes AmpMaskView components for React Native and .amp-block class exclusions.

**User Consent Management**: Comprehensive GDPR compliance through cookie banner integration, Consent Management Platform (CMP) support, privacy policy disclosure templates, and SDK consent controls with opt-out mechanisms.

## Technical Implementation

**Configuration Parameters:**
- `sampleRate`: Controls recording frequency and data volume
- `enableRemoteConfig`: Enables server-side configuration management
- `privacyConfig`/`maskLevel`: Configures data masking and privacy settings
- `serverZone`: Supports EU data residency requirements
- `optOut`: Provides user consent controls

**Key Methods and APIs:**
- `amplitude.add(plugin)` / `amplitude.remove(plugin)`: Plugin management
- `sessionReplay.init()`: Standalone SDK initialization
- `getSessionReplayProperties()`: Retrieves session metadata for event tagging
- `setSessionId()` / `setDeviceId()`: Manual ID management for third-party integrations
- `start()` / `stop()`: Recording control methods

**Data Management:**
- Session Replay ID property injection into analytics events
- Device ID and Session ID synchronization across platforms
- IndexedDB storage for web applications with compression
- UGC Filter Rules using glob patterns for URL sanitization

## Monitoring and Debugging

**Ingestion Monitor**: Tracks session replay ingestion status with HTTP status code monitoring (200, 429, 402), invalid session ID detection, and implementation troubleshooting tools.

**Privacy Controls**: Remote configuration precedence over local settings, organizational privacy settings management, and conflict resolution between SDK and UI configurations.

## Third-Party Integrations

**Segment Integration**: Multiple destination modes including Amplitude Actions (using analytics_session_id cookie), Amplitude Classic Device-mode, and Cloud-mode implementations with Source Middleware support.

**Rudderstack Integration**: Cloud-mode configuration with deviceId/sessionId mapping from Rudderstack Anonymous ID and Session ID, including method overrides for track/page events.

**Google Tag Manager**: GTM Web Template with Session Replay plugin enablement and troubleshooting for multiple SDK instantiation scenarios.

The product emphasizes privacy compliance, flexible deployment options, and seamless integration with existing analytics infrastructure while providing comprehensive user behavior insights through session recordings and heatmap analytics.