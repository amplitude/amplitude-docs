# Amplitude Session Replay

## Product Overview

Amplitude Session Replay is a visual analytics tool that captures and recreates user interactions with web and mobile applications as video-like recordings. It allows developers and product teams to observe actual user behavior, identify usability issues, and understand how users navigate through applications. The product supports web applications (via Browser SDK), iOS, Android, and React Native platforms, with integration options for various analytics providers including Segment, Rudderstack, and Google Tag Manager.

Key features include:
- Video-like session recordings of user interactions
- Heatmaps showing click patterns, scroll depth, and element interactions
- Privacy controls with configurable masking levels for sensitive data
- Sampling capabilities to manage data volume
- Integration with existing analytics implementations
- Support for WebViews and MapViews in mobile applications
- Implementation monitoring tools

## Product Relationships and Architecture

Amplitude Session Replay is structured as a modular system with several implementation options:

1. **SDK Plugins/Middleware**: For applications already using Amplitude Analytics
   - Browser SDK Plugin
   - iOS SDK Plugin/Middleware
   - Android SDK Plugin/Middleware
   - React Native SDK Plugin

2. **Standalone SDKs**: For applications using third-party analytics providers
   - Browser Standalone SDK
   - iOS Standalone SDK
   - Android Standalone SDK

3. **Integration Wrappers**: For specific third-party analytics platforms
   - Segment Wrapper
   - Rudderstack Integration
   - Google Tag Manager Implementation

The Session Replay functionality works by capturing DOM changes (web) or view tree changes (mobile) to create video-like replays of user sessions. These recordings are synchronized with analytics events by matching device IDs and session IDs between systems.

## Key Nomenclature and Definitions

- **Session Replay**: The core functionality that captures and recreates user interactions as video-like recordings
- **Heatmaps**: Visual representations of user engagement including:
  - **Click maps**: Show where users click most frequently
  - **Selectors view**: Displays interaction data for specific UI elements
  - **Scrollmaps**: Visualize how far users scroll down pages
  - **Average fold**: The typical scroll position where content becomes visible

- **Masking Levels**: Privacy settings that control what data is captured:
  - **Conservative**: Highest privacy level, masks most elements
  - **Light**: Moderate masking
  - **Medium**: Less restrictive masking
  - **Custom**: User-defined masking via CSS selectors

- **sampleRate**: Configuration parameter (0-1) determining what percentage of sessions to record
- **deviceId**: Unique identifier for a user's device
- **sessionId**: Unique identifier for a specific user session
- **Ingestion Monitor**: Tool for tracking implementation status and debugging issues

## Product Ecosystem Integration

Amplitude Session Replay is an addon to Amplitude's core analytics platform, available for Growth and Enterprise plans. It integrates with:

1. **Amplitude Analytics**: Direct integration via SDK plugins/middleware
2. **Third-party Analytics**: Through standalone SDKs or specific integration wrappers
3. **Data Management Platforms**:
   - Segment (via wrapper or middleware)
   - Rudderstack (via custom integration)
   - Google Tag Manager (via Amplitude template)

The product supports EU data residency requirements and includes DSAR API integration for data subject access requests. Session Replay data is subject to retention policies and storage quotas.

## API Endpoints and Implementation Methods

### Web Implementation

**Browser SDK Plugin:**
```javascript
import * as amplitude from '@amplitude/analytics-browser';
import { sessionReplayPlugin } from '@amplitude/session-replay-browser';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

**Standalone SDK:**
```javascript
import { SessionReplay } from '@amplitude/session-replay-browser';

const sessionReplay = new SessionReplay({
  apiKey: 'API_KEY',
  deviceId: 'DEVICE_ID',
  sessionId: 'SESSION_ID'
});
```

### Mobile Implementation

**iOS Plugin:**
```swift
let sessionReplayPlugin = AmplitudeSessionReplayPlugin(options: SessionReplayOptions(
    sampleRate: 1.0,
    maskingLevel: .light
))
amplitude.add(plugin: sessionReplayPlugin)
```

**Android Plugin:**
```kotlin
val sessionReplayPlugin = SessionReplayPlugin.getInstance(
    SessionReplayOptions(
        sampleRate = 1.0,
        maskingLevel = MaskingLevel.LIGHT
    )
)
amplitude.add(plugin = sessionReplayPlugin)
```

**React Native Plugin:**
```javascript
import { sessionReplayPlugin } from '@amplitude/session-replay-react-native';

amplitude.init('API_KEY', {
  plugins: [sessionReplayPlugin()]
});
```

### Key Methods

- `getSessionReplayProperties()`: Returns properties needed to link analytics events with session recordings
- `startRecording()`/`stopRecording()`: Control recording during runtime
- `maskView()`/`unmaskView()`: Control privacy masking for specific views in mobile apps
- `flush()`: Force upload of pending session replay data

The product also provides configuration options for EU data residency (`serverZone: 'EU'`) and remote configuration management (`enableRemoteConfig: true`).