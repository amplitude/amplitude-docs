# Amplitude Experiment Troubleshooting Guide

## Product Overview

Amplitude Experiment is an experimentation platform for creating, deploying, and analyzing A/B tests and feature flags. It enables product teams to make data-driven decisions by testing hypotheses about product changes and measuring their impact on user behavior. The platform provides robust tools for variant allocation, user targeting, experiment diagnostics, and seamless integration with Amplitude's analytics ecosystem.

## Key Features and Concepts

### Experiment Management
- **Experiment Runs**: Configurable test iterations that can be restarted with different parameters
- **Variant Assignment**: The process of allocating users to specific test variations
- **Sticky Bucketing**: Ensures users consistently see the same variant across sessions
- **Rule-based Targeting**: Conditions that determine which users are included in an experiment
- **Mutually Exclusive Experiments**: Experiments configured so users can only participate in one

### Tracking and Monitoring
- **Exposure Events**: Track when users encounter an experiment variant
- **Assignment Events**: Record which variant a user is assigned to
- **Sample Ratio Mismatch (SRM)**: Detects when observed variant distributions differ from expected allocations
- **Variant Jumping**: Identifies issues where users see multiple variants in a single experiment
- **Diagnostic Charts**: Visual tools for identifying and troubleshooting experiment issues

## Product Relationships and Architecture

Amplitude Experiment operates within the Amplitude ecosystem with these key relationships:

1. **Amplitude Analytics**: Core integration for tracking user behavior and analyzing experiment results
2. **Amplitude SDKs**: Client-side libraries handling variant assignment and exposure tracking
3. **Experiment Dashboard**: Central interface for monitoring experiment health and results

The platform uses a client-server architecture where:
- Server-side logic manages user targeting and variant allocation
- Client-side SDKs handle variant assignment, exposure tracking, and fallback handling
- Analytics backend processes and analyzes experiment data

## Key Nomenclature and Definitions

- **Experiment Key**: Unique identifier for an experiment
- **Bucketing Salt**: Parameter that influences random variant assignment
- **Fallback Variant**: Default variant shown when targeting or assignment fails
- **Inclusion List**: Predefined list of users targeted for specific variants
- **Bucketing Key**: Identifier used to consistently assign users to variants
- **Analysis Window**: Time period used for evaluating experiment results
- **Individual Allocation**: Specific variant assignment for a particular user

## Troubleshooting Features

### Sample Ratio Mismatch (SRM) Detection
- Identifies statistically significant deviations in variant distributions
- Analyzes potential causes including:
  - Variant distribution changes
  - Misaligned analysis windows
  - Instrumentation issues

### Exposures without Assignments Diagnostic
- Tracks users who received experiment exposures without proper assignment events
- Identifies identity mismatches, account switching issues, or improper tracking

### Variant Jumping Analysis
- Detects when users see multiple variants in a single experiment
- Distinguishes between normal causes (targeting changes, identity merging) and abnormal causes (identity mismatches)

### New Experiment Run Creation
- Process for restarting experiments after fixing data quality issues
- Requires specific SDK versions and configuration changes

## API and Implementation Details

### SDK Methods
- `fetch()`: Retrieves variant assignments from the server
- `variant()`: Returns the assigned variant for a user

### Required SDK Versions
- Client-side JavaScript SDK v1.9.0+ for new experiment runs
- Server-side Node.js SDK v1.7.0+ for new experiment runs

### Implementation Requirements
- Proper identity management between assignment and exposure events
- Consistent bucketing key usage across the user journey
- Correct configuration of experiment keys when creating new runs

## Product Ecosystem Integration

Amplitude Experiment integrates with the broader Amplitude product suite to provide a complete experimentation workflow:
- Uses Amplitude Analytics for user behavior tracking and results analysis
- Connects with Amplitude's user identity management system
- Provides data that can be used in Amplitude dashboards and reports
- Enables experiment-driven product development within the Amplitude platform

The troubleshooting guide specifically helps users maintain data quality and integrity throughout the experimentation process, ensuring reliable results for making product decisions.