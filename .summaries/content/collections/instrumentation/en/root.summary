# Amplitude Instrumentation Suite

## Product Overview

Amplitude is a comprehensive analytics platform that provides tools for tracking, analyzing, and optimizing user behavior across digital products. The instrumentation suite consists of various SDKs, tools, and utilities designed to collect and process analytics data from different platforms and environments.

Key features of Amplitude's instrumentation suite include:
- Cross-platform analytics SDKs for client-side and server-side implementations
- Type-safe event tracking through the Ampli wrapper
- Dynamic configuration for optimal server routing
- SDK plugins and middleware for extending functionality
- Experiment SDKs for A/B testing and feature flagging
- Comprehensive debugging and troubleshooting tools

The primary use cases include tracking user behavior, analyzing product usage patterns, implementing A/B tests, and making data-driven product decisions.

## Product Relationships and Architecture

Amplitude's instrumentation suite consists of several interconnected components:

1. **Analytics SDKs**: The core component available for multiple platforms (Browser, Node.js, Android, iOS, React Native, Flutter, Go, Unity, Unreal). These SDKs handle event tracking, user identification, and data transmission to Amplitude servers.

2. **Ampli Wrapper**: A code generation tool that creates type-safe wrappers around Amplitude SDKs based on tracking plans defined in Amplitude Data. This ensures consistent event tracking across implementations.

3. **SDK Plugins**: Extend SDK functionality through:
   - Enrichment plugins: Modify event properties or filter events
   - Destination plugins: Route events to third-party services (Segment, Hotjar, Google Analytics, FullStory)

4. **SDK Middleware** (Legacy): Similar to plugins but only available in Maintenance SDKs, allowing custom code execution on every event for enrichment, transformation, filtering, and routing.

5. **Experiment SDKs**: Specialized SDKs for implementing A/B tests and feature flags across different platforms.

The architecture follows a modular approach where the core SDKs handle basic analytics functionality, while plugins, middleware, and the Ampli wrapper provide extensibility and type safety.

## Key Nomenclature and Definitions

- **Client-side Sources**: Code running on user devices (mobile apps, web browsers) that directly captures user interactions.
- **Server-side Sources**: Code running on servers that captures events from backend systems or processes.
- **Ampli Wrapper**: A type-safe wrapper generated from a tracking plan that enforces correct event names and properties.
- **Dynamic Configuration**: Feature that automatically selects optimal server URLs based on user location.
- **SDK Plugins**: Components that extend SDK functionality through standardized interfaces.
- **SDK Middleware**: Legacy system for extending SDK functionality with custom code.
- **SDK Lifecycle Phases**: Four phases defining support status - Developer Preview, General Availability, Maintenance, End-of-Support.
- **MiddlewarePayload**: Object containing event data passed to middleware functions.
- **MiddlewareNext**: Function called by middleware to pass control to the next middleware in the chain.

## Product Ecosystem Integration

Amplitude's instrumentation suite integrates with the broader Amplitude ecosystem in several ways:

1. **Amplitude Data**: The Ampli wrapper connects with tracking plans defined in Amplitude Data to ensure type-safe event tracking.

2. **Amplitude Analytics**: All SDKs send data to Amplitude's analytics platform for processing and visualization.

3. **Amplitude Experiment**: Experiment SDKs integrate with Amplitude's experimentation platform for A/B testing and feature flagging.

4. **Third-party Integrations**: Through destination plugins, Amplitude can forward data to other analytics and marketing platforms like Segment, Google Analytics, Hotjar, and FullStory.

5. **Regional Data Centers**: Dynamic Configuration feature supports routing data to appropriate regional endpoints, including special handling for users in Mainland China.

## API Endpoints and Commands

### Ampli CLI Commands
- `ampli status`: Check the status of the tracking plan implementation
- `ampli pull`: Pull the latest tracking plan from Amplitude
- `ampli generate`: Generate the Ampli wrapper code

### SDK Initialization
```javascript
// Browser SDK example
amplitude.init('YOUR_API_KEY', {
  serverUrl: 'https://api.eu.amplitude.com', // For EU data residency
  useDynamicConfig: true // Enable dynamic configuration
});
```

### Event Tracking
```javascript
// Standard event tracking
amplitude.track('Button Clicked', {
  buttonColor: 'blue',
  buttonText: 'Submit'
});

// With Ampli wrapper (type-safe)
ampli.track('Button Clicked', {
  buttonColor: 'blue',
  buttonText: 'Submit'
});
```

### User Identification
```javascript
amplitude.identify(new amplitude.Identify()
  .set('userType', 'premium')
  .set('age', 30));
```

### Plugin Registration
```javascript
amplitude.add(new MyCustomPlugin());
```

The instrumentation suite supports both HTTP V2 API for server-side implementations and specialized SDKs for client-side implementations, with comprehensive options for configuration, event batching, and error handling across all supported platforms.