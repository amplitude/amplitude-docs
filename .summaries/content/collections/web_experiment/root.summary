## Amplitude Web Experimentation

Amplitude Web Experimentation is a client-side A/B testing and experimentation platform that enables teams to run experiments on websites without requiring code changes. The platform provides a Visual Editor for creating experiments, sophisticated targeting capabilities, and comprehensive tracking of user interactions with experiment variants.

### Core Features and Use Cases

The platform supports multiple experiment types including A/B tests and multi-armed bandit experiments. Key capabilities include:

- **Visual Editor**: No-code experiment creation through DOM manipulation, allowing element changes (display, visibility, text, background, positioning)
- **Custom Code Actions**: JavaScript, CSS, and HTML injection for advanced modifications
- **URL Redirects**: Client-side redirects with query parameter retention and session history evaluation
- **Page Targeting**: Sophisticated URL matching with operators like URL Matches, URL Contains, URL Starts With, URL Ends With, and regex patterns
- **Audience Targeting**: Browser property evaluation (local) and user property targeting (remote) with support for behavioral cohorts

### Product Architecture and Relationships

The Web Experimentation system operates through several interconnected components:

**Script Implementation**: The core functionality is delivered via a standalone JavaScript script (79KB base + ~1KB per flag) served from CDN endpoints (cdn.amplitude.com for US, cdn.eu.amplitude.com for EU). The script supports both synchronous and asynchronous loading with anti-flicker snippets to prevent visual flickering during experiment evaluation.

**Pages and Targeting**: Web Experiment Pages control where experiments run through URL targeting rules, while the targeting system evaluates both page conditions and audience criteria. The system uses a two-phase evaluation: local browser properties are evaluated immediately, while user properties require remote resolution through Amplitude ID lookup.

**Actions and Variants**: Experiment variants are defined through Actions that specify how to modify the website. These include Visual Editor changes, custom code execution, and URL redirects. Actions are applied after successful bucketing and targeting evaluation.

**Tracking and Analytics**: The system automatically tracks impression events, transforming internal `$impression` events to `[Experiment] Impression` events with flag_key and variant properties. User properties are set for experiment analysis queries.

### Key Nomenclature and Definitions

**Flag Key**: Unique identifier for each experiment used in tracking and variant assignment

**Variant**: Different versions of an experiment (control, treatment variations)

**Bucketing**: Algorithm that assigns users to experiment variants based on Device ID

**Anti-flicker Overlay**: Mechanism to prevent visual flickering during experiment evaluation and variant application

**Page Targeting Rules**: URL matching conditions that determine where experiments run:
- URL Matches Exactly: Precise URL matching
- URL Matches Pattern: Wildcard-based matching
- URL Contains: Substring matching
- URL Starts With/Ends With: Prefix/suffix matching
- URL Matches Regex: Regular expression matching

**Rollout Percentage**: Controls what percentage of targeted users are included in the experiment

**IntegrationPlugin**: Interface for third-party integrations with CDPs like Segment and Tealium

**Impression Volume**: Calculated as MTU × number of experiments × average page views per user

### Broader Product Ecosystem Integration

Web Experimentation integrates with the broader Amplitude ecosystem and third-party tools:

**Amplitude Integration**: Connects with Amplitude's Browser SDK for user identification and event tracking. Uses Amplitude ID for user property resolution and behavioral cohort targeting.

**Third-party CDP Integration**: Supports integration with Customer Data Platforms through:
- Segment integration via query parameters
- Tealium iQ and AudienceStream support
- Custom IntegrationPlugin interface for other CDPs

**CMS and Tag Manager Support**: 
- WordPress and Shopify plugins for easy implementation
- Google Tag Manager integration through custom HTML tags
- Content Security Policy considerations for script-src directives

**Performance Optimization**: Two-layer caching (CDN and browser) with 60-second max-age and stale-while-revalidate headers. Synchronous local evaluation completes in <1ms.

### Technical Implementation Details

**Script Loading**: Available as synchronous or asynchronous implementation with anti-flicker snippets. Requires Cross-Origin-Opener-Policy: unsafe-none for proper functionality.

**Utility Functions**: 
- `waitForElement()`: Waits for DOM elements to be available
- `utils.remove()`: Cleanup function for single-page applications

**Performance Characteristics**: Dynamic script sizing scales with active experiments. Ad blockers may impact user assignment tracking but don't prevent experiment functionality.

**Post-Experiment Workflow**: Recommended practice involves migrating winning variants to production code rather than running experiments at 100% traffic allocation, followed by experiment deactivation to reduce technical debt and improve performance.

The platform is available on Growth and Enterprise plans, with comprehensive documentation for implementation across various technical environments and use cases.