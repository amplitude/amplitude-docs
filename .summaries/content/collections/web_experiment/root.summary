# Amplitude Web Experiment Product Overview

## High-Level Overview

Amplitude Web Experiment is a visual A/B testing solution that enables non-technical users to create and run experiments on websites without coding knowledge. Users can visually modify website elements, create variants, target specific pages and audiences, and analyze results through Amplitude's analytics platform.

Key features include:
- Visual Editor for creating website variants without code
- Element manipulation (display, visibility, text, background, positioning)
- URL redirects for testing different page versions
- Custom code injection (JavaScript, HTML, CSS)
- Page and audience targeting capabilities
- Performance optimization with minimal impact on site speed
- Integration with Amplitude's analytics for experiment analysis

Primary use cases:
- A/B testing website designs and content
- Testing UI/UX changes without developer resources
- Validating hypotheses about user behavior
- Optimizing conversion rates and user engagement

## Product Relationships and Features

Web Experiment consists of several interconnected components:

1. **Implementation Layer**: A lightweight JavaScript script (`experiment.js`) added to the website's `<head>` element that handles variant assignment and rendering.

2. **Visual Editor**: A WYSIWYG interface for creating variants by modifying website elements without coding.

3. **Targeting System**: Determines which users see which variants based on page URLs and user properties.

4. **Action System**: Defines how variants modify the website (element changes, redirects, custom code).

5. **Tracking System**: Captures impression events to measure experiment performance.

6. **Post-Experiment Workflow**: Process for concluding experiments and implementing winning variants.

The product integrates with:
- Amplitude Analytics for experiment analysis
- Third-party CDPs like Segment and Tealium
- Content management systems like WordPress and Shopify
- Google Tag Manager

## Key Nomenclature and Definitions

- **Web Experiment**: A client-side A/B testing solution for websites.
- **Variant**: A modified version of a webpage being tested against the original.
- **Visual Editor**: Interface for creating variants without code.
- **Actions**: Modifications applied to create variants (element changes, redirects, custom code).
- **Page Targeting**: Rules that determine which pages an experiment runs on.
- **Audience Targeting**: Rules that determine which users participate in an experiment.
- **Impression Event**: Tracking event (`[Experiment] Impression`) sent when a user sees an experiment variant.
- **Anti-flicker Snippet**: Code that prevents flickering during experiment loading.
- **Bucketing**: Process of assigning users to specific variants based on distribution settings.
- **waitForElement Utility**: Function that waits for DOM elements to appear before applying changes.

## Product Ecosystem Integration

Web Experiment is part of Amplitude's broader experimentation and analytics ecosystem:

1. **Relationship with Amplitude Analytics**: Web Experiment sends impression events to Amplitude Analytics, which are used for analysis and reporting. These events set user properties upon ingestion for cohort analysis.

2. **Integration with Feature Flags**: Experiments can be implemented as feature flags, allowing for gradual rollout and targeted testing.

3. **CDP Integration**: Works with third-party Customer Data Platforms like Segment and Tealium through custom IntegrationPlugins.

4. **CMS Integration**: Specific implementation methods for WordPress (via plugin) and Shopify (via theme.liquid).

5. **Post-Experiment Workflow**: After reaching statistical significance, winning variants should be migrated to production code rather than keeping experiments running at 100% allocation.

## Technical Implementation

### Script Implementation

```html
<!-- Synchronous implementation -->
<script src="https://cdn.amplitude.com/libs/experiment-js-client/1.0.0/experiment.js"></script>
<script>
  const experiment = new AmplitudeExperiment({
    apiKey: "YOUR-API-KEY",
    // Optional configuration
  });
</script>
```

```html
<!-- Asynchronous implementation with anti-flicker -->
<script>
  // Anti-flicker snippet
  (function(a,s,y,n,c,h,i,d,e){
    s.className+=' '+y;
    h.start=1*new Date;
    h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
    (a[n]=a[n]||[]).hide=h;
    setTimeout(function(){i();h.end=null},c);
    h.timeout=c;
  })(window,document.documentElement,'async-hide','dataLayer',4000,{'GTM-XXXXXX':true});
</script>
<script>
  (function() {
    var script = document.createElement('script');
    script.src = 'https://cdn.amplitude.com/libs/experiment-js-client/1.0.0/experiment.js';
    script.async = true;
    script.onload = function() {
      const experiment = new AmplitudeExperiment({
        apiKey: "YOUR-API-KEY",
        // Optional configuration
      });
    };
    document.head.appendChild(script);
  })();
</script>
```

### Custom Code Examples

```javascript
// Example of custom JavaScript action
function addBanner() {
  const banner = document.createElement('div');
  banner.innerHTML = 'Limited time offer: 20% off all products!';
  banner.style.backgroundColor = 'red';
  banner.style.color = 'white';
  banner.style.padding = '10px';
  banner.style.textAlign = 'center';
  document.body.prepend(banner);
}
addBanner();
```

```javascript
// Using waitForElement utility
experiment.utils.waitForElement('.product-price').then((element) => {
  element.style.color = 'red';
  element.style.fontWeight = 'bold';
});
```

### Tracking Events

Web Experiment automatically tracks impression events in the format:

```json
{
  "event_type": "[Experiment] Impression",
  "event_properties": {
    "flag_key": "my-experiment",
    "variant": "treatment"
  }
}
```

These events are transformed from their original format (`$impression`) to Amplitude's standardized format during processing.

### Performance Considerations

- Base script size: 20KB compressed
- Additional size per flag: ~100B
- Evaluation time: <1ms for local evaluation
- Caching: Two-layer caching (CDN and browser)
- Potential limitations with ad blockers