## Amplitude Web Experimentation Platform

Amplitude Web Experimentation is a comprehensive client-side A/B testing and experimentation platform that enables teams to run experiments directly on web properties without requiring code deployments. The platform centers around a Visual Editor that allows non-technical users to create and modify experiments through a point-and-click interface, while also supporting advanced custom code implementations for complex use cases.

## Product Architecture and Feature Relationships

The Web Experimentation platform operates through several interconnected components:

**Core Script and Delivery**: The foundation is a dynamically-sized JavaScript script (79KB base + ~1KB per active flag) delivered via CDN with two-layer caching (CDN and browser) using 60-second max-age headers. The script supports both synchronous and asynchronous loading patterns, with anti-flicker snippets to prevent visual inconsistencies during experiment evaluation.

**Visual Editor and Actions System**: The Visual Editor serves as the primary interface for creating experiments, enabling users to perform element changes (display, visibility, text, background, positioning), URL redirects with query parameter retention, and custom code injection (JavaScript, CSS, HTML). The actions system includes utility functions like `waitForElement` and `utils.remove` for DOM manipulation and cleanup in single-page applications.

**Targeting and Evaluation Engine**: The platform implements a sophisticated targeting system with page-level URL matching operators (URL Matches, URL Matches Exactly, URL Matches Pattern with wildcards) and audience targeting using both browser properties (local evaluation) and user properties (remote evaluation with anti-flicker overlay). Bucketing occurs at the Device ID level with configurable variant distribution and rollout percentages.

**Tracking and Analytics Integration**: Impression events are automatically tracked and transformed from `$impression` to `[Experiment] Impression` events with flag_key and variant properties. The system integrates with third-party Customer Data Platforms through plugins for Segment, Tealium, and custom IntegrationPlugin interfaces.

## Key Nomenclature and Definitions

**Flag/Flag Key**: Unique identifier for each experiment, used in tracking events and variant assignment

**Variant**: Different versions of an experiment (control, treatment variations) that users are bucketed into

**Variant Actions**: Specific modifications applied when a variant is served (element changes, redirects, custom code)

**Bucketing**: Process of assigning users to experiment variants based on Device ID and rollout percentages

**Anti-flicker Snippet**: Code that prevents visual inconsistencies during experiment loading and evaluation

**Local vs Remote Evaluation**: Local evaluation uses browser properties for immediate targeting decisions, while remote evaluation requires server calls for user property-based targeting

**Impression Events**: Tracking events fired when users are exposed to experiment variants

**IntegrationPlugin**: Interface for connecting Web Experimentation with third-party analytics and CDP platforms

**Multi-armed Bandit**: Advanced experiment type that dynamically allocates traffic to better-performing variants

## Ecosystem Integration and Implementation

The Web Experimentation platform integrates into the broader Amplitude ecosystem through multiple channels:

**Analytics Integration**: Seamless connection with Amplitude Analytics for experiment analysis, with automatic user property setting and impression event tracking. Monthly impression volume can be estimated using the formula: MTU × active experiments × average page views per session.

**Content Management Systems**: Native integrations available for WordPress (plugin), Shopify (App theme.liquid modification), and Google Tag Manager (custom HTML tag implementation).

**Customer Data Platforms**: Extensible integration framework supporting Segment (via query parameters), Tealium iQ AudienceStream, and custom CDP connections through the IntegrationPlugin interface.

**Development Workflow**: The platform supports both no-code Visual Editor workflows and advanced custom code implementations, with specific consideration for Content Security Policy requirements and ad blocker impact on tracking.

## API Endpoints and Technical Implementation

**CDN Endpoints**: 
- US Data Center: `https://cdn.amplitude.com/script/[API_KEY]/web-experiment.js`
- EU Data Center: `https://cdn.eu.amplitude.com/script/[API_KEY]/web-experiment.js`

**Integration Variables**:
- `window.experimentIntegration`: Global variable for third-party CDP integration setup
- Segment integration via `?segment=true` query parameter

**Utility Functions**:
- `waitForElement()`: Asynchronous DOM element detection
- `utils.remove()`: Cleanup function for single-page application experiment removal
- MutationObserver integration for dynamic content handling

## Post-Experiment Workflow

The platform emphasizes a migration-based post-experiment approach where winning variants are implemented directly in production code rather than running experiments at 100% traffic allocation. This workflow includes statistical analysis, production implementation, experiment deactivation, and removal of experiment logic to reduce technical debt and improve performance. The recommended approach prioritizes long-term maintainability over short-term convenience, reducing client-side overhead and page load execution time.