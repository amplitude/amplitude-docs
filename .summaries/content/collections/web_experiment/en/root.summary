## Amplitude Web Experimentation

Amplitude Web Experimentation is a comprehensive A/B testing and experimentation platform that enables teams to run client-side experiments without requiring code changes. The platform centers around a Visual Editor that allows users to create and modify website elements, implement URL redirects, and inject custom code to test different variants against user segments.

## Product Architecture and Feature Relationships

The Web Experimentation platform operates through several interconnected components:

**Core Script and Implementation**: The foundation is a dynamically-sized JavaScript script (79KB base + ~1KB per flag) that can be implemented synchronously or asynchronously. The script includes anti-flicker snippets to prevent visual inconsistencies during experiment loading and supports both US (cdn.amplitude.com) and EU (cdn.eu.amplitude.com) data centers with two-layer CDN/browser caching.

**Visual Editor and Actions**: The Visual Editor serves as the primary interface for creating experiments, enabling element modifications (display, visibility, text, background, positioning), URL redirects with query parameter retention, and custom code injection (JavaScript, CSS, HTML). Actions include utility functions like `waitForElement` and `utils.remove` for DOM manipulation and cleanup, particularly important for single-page applications.

**Pages and Targeting System**: The Pages functionality controls experiment scope through URL targeting rules (URL Matches Exactly, Contains, Regex, Starts With, Ends With) and integrates with the Visual Editor for URL preview. The targeting system evaluates both page-level and audience-level criteria, supporting browser properties (local evaluation) and user properties (remote evaluation) with anti-flicker overlay protection during the 1-second timeout for remote property resolution.

**Performance and Tracking**: The platform provides synchronous local evaluation (<1ms) with comprehensive impression event tracking that transforms `$impression` events to `[Experiment] Impression` events containing flag_key and variant properties. Monthly impression estimation follows the formula M * E * P (Monthly Tracked Users * Experiments * Participation rate).

## Key Nomenclature and Definitions

**Variants**: Different versions of website elements or experiences being tested within an experiment, which can be scoped to specific pages and contain various types of actions.

**Actions**: Modifications applied by variants, including element changes, URL redirects, and custom code injection with associated utility functions for DOM manipulation.

**Pages**: URL targeting configurations that determine where experiments run, using various matching operators and rules to control experiment scope.

**Bucketing**: The process of assigning users to experiment variants based on rollout percentages and distribution settings, maintaining consistency through Device ID and Amplitude ID resolution.

**Anti-flicker**: Protection mechanism that prevents visual inconsistencies during experiment loading, particularly important for synchronous script implementation and remote property evaluation.

**Impression Events**: Tracking events fired when users are exposed to experiment variants, transformed from internal `$impression` events to `[Experiment] Impression` events for analysis.

**IntegrationPlugin**: Interface for third-party CDP integrations (Segment, Tealium) that enables custom user identification and property passing.

## Ecosystem Integration

Web Experimentation integrates extensively with the broader Amplitude ecosystem and third-party platforms:

**Amplitude Analytics Integration**: Native integration with Amplitude's analytics platform for user identification, behavioral cohorts, IP geolocation, and user enrichment. The Browser SDK can be used alongside the standalone Web Experimentation script.

**Third-party CDP Integration**: Supports integration with Segment (via query parameters), Tealium iQ/AudienceStream, and custom CDPs through the IntegrationPlugin interface, enabling user property synchronization and event forwarding.

**CMS and Tag Manager Support**: Provides plugins and implementation guides for WordPress, Shopify, Google Tag Manager, and other content management systems, with specific considerations for theme.liquid file modifications.

**Feature Flags Relationship**: While sharing some infrastructure with Amplitude's Feature Flags product, Web Experiments have distinct limitations and capabilities, particularly around Pages functionality which is restricted in Feature Flags implementations.

## API Endpoints and Technical Implementation

**CDN Endpoints**: 
- US: `cdn.amplitude.com`
- EU: `cdn.eu.amplitude.com`

**Key JavaScript Functions**:
- `waitForElement()`: Utility for DOM element detection
- `utils.remove()`: Cleanup function for experiment artifacts
- `experimentIntegration`: Window variable for third-party integrations

**Implementation Methods**:
- Synchronous script loading with anti-flicker protection
- Asynchronous script loading for performance optimization
- Custom HTML tag implementation in Google Tag Manager
- Direct theme file integration for e-commerce platforms

**Post-Experiment Workflow**: The platform includes comprehensive post-experiment procedures for winner analysis, production code migration, experiment deactivation, and technical debt cleanup to avoid ongoing clientside overhead and impression volume costs. This workflow emphasizes migrating winning variants to production codebases rather than maintaining them as perpetual experiments.