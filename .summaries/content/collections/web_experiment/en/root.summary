## Amplitude Web Experimentation Platform

Amplitude Web Experimentation is a client-side A/B testing and multi-armed bandit experimentation platform that enables teams to run experiments on web applications without requiring code changes. The platform centers around a Visual Editor that allows users to create and modify experiments through a point-and-click interface, making experimentation accessible to non-technical team members while providing advanced customization options for developers.

## Product Architecture and Feature Relationships

The Web Experimentation platform operates through several interconnected components:

**Core Implementation Layer**: The foundation consists of a standalone JavaScript script served from Amplitude's CDN (`cdn.amplitude.com`) with regional endpoints for US and EU data centers. The script implements dynamic sizing (79KB base + ~1KB per experiment flag) and includes anti-flicker functionality to prevent visual artifacts during experiment loading.

**Visual Editor and Actions System**: The Visual Editor serves as the primary interface for experiment creation, enabling users to define variant actions including element modifications (display, visibility, text, background, positioning), URL redirects with query parameter retention, and custom code injection (JavaScript, CSS, HTML). The system provides utility functions like `waitForElement` and `utils.remove` for DOM manipulation and cleanup in single-page applications.

**Targeting and Evaluation Engine**: The platform implements a two-tier targeting system combining page targeting (URL matching with operators like URL Matches, URL Matches Exactly, URL Matches Pattern) and audience targeting. Browser properties enable local evaluation for immediate variant assignment, while user properties require remote evaluation with anti-flicker overlay protection.

**Integration and Data Pipeline**: The system integrates with third-party Customer Data Platforms through plugins (Segment, Tealium, custom IntegrationPlugin interface) and supports various implementation methods including WordPress plugins, Shopify apps, and Google Tag Manager custom HTML tags.

## Key Nomenclature and Definitions

**Variant Actions**: Specific modifications applied to web pages when users are assigned to experiment variants, including visual changes and behavioral modifications.

**Anti-Flicker Snippet**: Code that prevents visual artifacts by hiding page content until experiment evaluation completes, essential for maintaining user experience during synchronous script loading.

**Bucketing**: The process of distributing users across experiment variants based on Device ID, with configurable rollout percentages controlling overall experiment exposure.

**Impression Events**: Tracking events fired when users are exposed to experiments, transformed from internal `$impression` events to `[Experiment] Impression` events with flag_key and variant properties for analysis.

**Local vs Remote Evaluation**: Local evaluation uses browser properties for immediate variant assignment, while remote evaluation requires server communication for user property-based targeting, introducing potential display delays.

**IntegrationPlugin**: Interface enabling custom third-party integrations for passing user properties and receiving experiment data in non-Amplitude analytics environments.

## Ecosystem Integration

Web Experimentation integrates deeply with the broader Amplitude ecosystem while maintaining flexibility for external analytics platforms. The platform connects with Amplitude's Browser SDK for seamless user identification and event tracking, while supporting third-party CDPs through standardized integration patterns. Content Management System integrations (WordPress, Shopify) and tag management solutions (Google Tag Manager) enable deployment across diverse technical environments.

The experimentation workflow emphasizes integration with production development cycles through post-experiment migration recommendations, where winning variants are implemented directly in production code rather than maintained as permanent experiment configurations.

## API Endpoints and Technical Implementation

**CDN Endpoints**:
- US: `https://cdn.amplitude.com/libs/experiment-js-client-{version}.script.js`
- EU: `https://cdn.eu.amplitude.com/libs/experiment-js-client-{version}.script.js`

**Key JavaScript APIs**:
- `waitForElement()`: Utility for DOM element detection in dynamic applications
- `utils.remove()`: Cleanup function for single-page application experiment removal
- `window.experimentIntegration`: Global variable for third-party integration configuration

**Performance Characteristics**:
- Synchronous local evaluation: <1ms response time
- CDN caching: 60-second max-age with stale-while-revalidate
- Dynamic script sizing scales linearly with active experiment count

**Content Security Policy Requirements**:
- `script-src` allowlist for CDN domains
- `Cross-Origin-Opener-Policy: unsafe-none` for proper functionality

The platform emphasizes performance optimization through intelligent caching, minimal payload sizing, and synchronous evaluation capabilities, while providing comprehensive tracking through impression volume estimation formulas (MTU × experiments × page views) for capacity planning and cost management.