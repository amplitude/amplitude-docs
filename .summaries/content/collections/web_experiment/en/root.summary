## Amplitude Web Experimentation

Amplitude Web Experimentation is a client-side A/B testing and experimentation platform that enables teams to run experiments on websites without requiring code changes. The platform provides a Visual Editor for creating variants, sophisticated targeting capabilities, and comprehensive tracking of experiment performance.

## Product Architecture and Feature Relationships

The Web Experimentation platform consists of several interconnected components:

**Core Implementation Layer**: The foundation is a standalone JavaScript script (79KB base + ~1KB per flag) that can be implemented synchronously or asynchronously with anti-flicker snippets. The script integrates with Amplitude's CDN infrastructure supporting both US and EU data centers, and includes Content Security Policy and Cross-Origin-Opener-Policy header support.

**Experiment Configuration**: Experiments are built using three primary components that work together:
- **Pages**: Define URL targeting rules and variant scoping using operators like URL Matches, URL Contains, URL Starts With, and regex patterns
- **Actions**: Specify how variants modify websites through element changes, URL redirects, or custom code injection
- **Targeting**: Control audience selection through page targeting evaluation and audience targeting with browser/user properties

**Visual Editor**: A no-code interface for creating experiment variants by directly manipulating DOM elements, modifying CSS properties, editing HTML content, and configuring selectors without requiring development resources.

**Integration Ecosystem**: The platform supports multiple integration pathways including third-party CDPs (Segment, Tealium), CMS platforms (WordPress, Shopify plugins), tag managers (Google Tag Manager), and custom IntegrationPlugin interfaces.

## Key Nomenclature and Definitions

**Flag Key**: Unique identifier for each experiment used in impression event tracking and variant assignment

**Variant Actions**: The specific modifications applied to websites, including element changes (display, visibility, text, background, move), URL redirects with query parameter retention, and custom code actions (JavaScript, CSS, HTML)

**Page Targeting Rules**: URL matching conditions that determine where experiments run, using operators like URL Matches Exactly, URL Matches Pattern, URL Contains, URL Starts With, URL Ends With, and URL Matches Regex

**Anti-flicker Overlay**: A mechanism that prevents visual flickering during experiment loading by temporarily hiding page content until variant actions are applied

**Bucketing Algorithm**: The logic that assigns users to experiment variants based on Device ID, with rollout percentage controls for traffic allocation

**Impression Events**: Tracking events that fire when users are exposed to experiment variants, transformed from `$impression` to `[Experiment] Impression` format with flag_key and variant properties

**Visual Editor URL**: The specific page URL where Visual Editor variants are configured and applied

**IntegrationPlugin Interface**: A standardized interface for connecting Web Experimentation with third-party analytics and customer data platforms

## Broader Product Ecosystem Integration

Web Experimentation integrates deeply with Amplitude's broader analytics and experimentation ecosystem:

**Analytics Integration**: Impression events automatically flow into Amplitude Analytics for experiment analysis, with user properties set for cohort analysis and behavioral tracking. The platform supports third-party CDP integrations through Segment and Tealium for organizations using external analytics stacks.

**Performance Optimization**: The system uses a two-layer CDN/browser caching architecture with 60-second max-age and stale-while-revalidate headers for optimal performance. Local evaluation occurs synchronously in <1ms for minimal page load impact.

**Enterprise Capabilities**: Advanced features like custom code actions and modal banner examples are available on Growth and Enterprise plans, with sophisticated audience targeting using behavioral cohorts and user enrichment.

**Post-Experiment Workflow**: The platform emphasizes migration of winning variants to production codebases rather than running experiments at 100% traffic allocation, reducing technical debt and improving performance.

## API Endpoints and Technical Implementation

**CDN Endpoints**: `cdn.amplitude.com` serves the Web Experimentation script with regional support for US/EU data centers

**Utility Functions**: 
- `waitForElement()`: Waits for DOM elements to be available before applying actions
- `utils.remove()`: Provides cleanup functionality for single-page applications

**Integration Parameters**: Segment integration uses query parameters, while Tealium requires AudienceStream configuration

**Tag Manager Implementation**: Google Tag Manager integration uses custom HTML tags for script deployment

**Impression Volume Calculation**: Monthly impression volume estimated using formula: MTU × number of experiments × average page views per user

The platform supports various targeting properties including session storage, local storage, URL query parameters, UTM parameters, user agent, cookies, and geolocation data, with property canonicalization for consistent evaluation.