# Amplitude Data Sources and Instrumentation

## Overview

Amplitude is an analytics platform that allows businesses to track and analyze user behavior across digital products. The platform enables the collection of data from various sources, tracking of user sessions, revenue, and unique users, and provides tools for data export and analysis.

Key features include:
- Data source integration with third-party platforms
- User identification and tracking across devices
- Session tracking and customization
- Revenue tracking for in-app and non-app purchases
- Data export capabilities

## Product Relationships and Architecture

### Data Sources and Integration

Amplitude Data allows connection to third-party platforms through the Sources interface, which consists of:

1. **Sources List**: Displays all connected data sources with metrics on event volume and throttled users
2. **Ingestion Debugger**: Helps troubleshoot data ingestion issues

New data sources can be added through the Catalog, which provides a step-by-step setup process for each integration.

### Data Collection and Instrumentation

Amplitude collects data through several instrumentation methods:

1. **User Identification System**: Uses three key identifiers:
   - Device ID: Identifies unique devices
   - User ID: Custom identifier for logged-in users
   - Amplitude ID: Internal identifier that links Device IDs and User IDs

2. **Session Tracking**: Defines user engagement periods with configurable parameters:
   - Mobile sessions: Based on app foreground/background status
   - Web sessions: Based on time intervals between events
   - Custom session definitions: Can be based on properties, events, or timeout intervals

3. **Revenue Tracking**: Captures monetary transactions with specific properties:
   - $revenue: Total revenue amount
   - $price: Unit price
   - $quantity: Number of items
   - Additional properties for transaction details

### Data Export and Analysis

Amplitude provides data export capabilities through Export API, with some differences compared to the analytics platform:
- Timezone differences: Amplitude uses project timezone while Export API uses UTC
- Query time definitions: Export API uses server_upload_time
- These differences can cause discrepancies when comparing data across platforms

## Key Nomenclature and Definitions

### User Identification Terms
- **Device ID**: Unique identifier for a device or browser
- **User ID**: Custom identifier assigned to logged-in users
- **Amplitude ID**: Internal identifier that links multiple Device IDs to a User ID
- **User Merging**: Process of combining multiple Amplitude IDs when they're determined to belong to the same user

### Session Terminology
- **Session ID**: Unique identifier for a user session
- **client_event_time**: Timestamp when an event occurs on the client device
- **Session Length**: Calculated as the difference between maximum and minimum client_event_time within a session
- **Out-of-session Events**: Events that occur outside the defined session boundaries

### Revenue Properties
- **$revenue**: Total revenue amount from a transaction
- **$price**: Unit price of the item
- **$quantity**: Number of items purchased
- **logRevenueV2**: Method for tracking revenue events in Amplitude SDKs

## Product Ecosystem Integration

Amplitude integrates with various data platforms and services:

1. **Data Sources**: Third-party platforms that send data to Amplitude
2. **Export Destinations**: Services like Snowflake and Redshift where Amplitude data can be exported
3. **Mobile and Web SDKs**: Libraries for instrumenting applications to send data to Amplitude
4. **HTTP API**: Direct API for sending events to Amplitude

## API and Implementation Details

### User Identification Implementation
- Set Device ID and User ID through SDK methods or HTTP API
- Cross-domain tracking requires additional configuration
- User merging happens automatically when Amplitude detects the same User ID across different Device IDs

### Session Tracking Implementation
- Configure through SDK initialization or HTTP API
- Start/End Session events can be manually triggered
- Session timeout intervals are configurable (default: 30 minutes for web)
- Session ID generation follows specific patterns based on platform

### Revenue Tracking Implementation
- Use `logRevenueV2()` method in SDKs
- Include required properties ($revenue, $price, $quantity)
- For IAPs, implement receipt validation
- Revenue events appear in Revenue LTV charts

### Export API Usage
- Data exported via API will be in UTC timezone
- Use server_upload_time for query time definitions
- Account for timezone differences when comparing with Amplitude analytics platform data

## Troubleshooting and Verification

- **Ingestion Debugger**: Tool for troubleshooting data source issues
- **Revenue Verification**: Methods to verify in-app purchases
- **Session Calculation**: Understanding how session length is calculated and which events are excluded
- **Data Discrepancies**: Explanations for differences between Amplitude charts and exported data