# Amplitude Data Sources and Instrumentation

## High-Level Overview

Amplitude is an analytics platform that enables businesses to track and analyze user behavior across digital products. The platform collects data from various sources, tracks user sessions, revenue, and unique users, and provides tools for data export and analysis.

Key features include:
- Integration with third-party data sources
- Cross-device user identification and tracking
- Configurable session tracking
- Revenue tracking for in-app and non-app purchases
- Data export capabilities

## Product Relationships and Features

### Data Sources Integration

Amplitude's Sources interface allows connection to third-party platforms through:

1. **Sources List**: A dashboard displaying all connected data sources with metrics on event volume and throttled users
2. **Ingestion Debugger**: A troubleshooting tool for data ingestion issues
3. **Catalog**: A directory of available integrations with step-by-step setup processes

### Data Collection Methods

Amplitude collects data through multiple instrumentation approaches:

1. **User Identification System**: Uses three key identifiers:
   - Device ID: For unique device identification
   - User ID: Custom identifier for logged-in users
   - Amplitude ID: Internal identifier linking Device IDs and User IDs

2. **Session Tracking**: Defines engagement periods with configurable parameters:
   - Mobile sessions: Based on app foreground/background status
   - Web sessions: Based on time intervals between events
   - Custom session definitions: Can be configured based on properties, events, or timeout intervals

3. **Revenue Tracking**: Captures monetary transactions with specific properties:
   - $revenue: Total revenue amount
   - $price: Unit price
   - $quantity: Number of items
   - Additional properties for transaction details

### Data Export

Amplitude provides data export functionality through its Export API, with some important differences from the analytics platform:
- Timezone handling: Amplitude uses project timezone while Export API uses UTC
- Query time definitions: Export API uses server_upload_time
- These differences can cause discrepancies when comparing data across platforms

## Key Nomenclature and Definitions

### User Identification Terms
- **Device ID**: Unique identifier for a device or browser
- **User ID**: Custom identifier assigned to logged-in users
- **Amplitude ID**: Internal identifier that links multiple Device IDs to a User ID
- **User Merging**: Process of combining multiple Amplitude IDs when they belong to the same user

### Session Terminology
- **Session ID**: Unique identifier for a user session
- **client_event_time**: Timestamp when an event occurs on the client device
- **Session Length**: Calculated as the difference between maximum and minimum client_event_time within a session
- **Out-of-session Events**: Events occurring outside defined session boundaries

### Revenue Properties
- **$revenue**: Total revenue amount from a transaction
- **$price**: Unit price of the item
- **$quantity**: Number of items purchased
- **logRevenueV2**: Method for tracking revenue events in Amplitude SDKs

## Product Ecosystem Integration

Amplitude integrates with various data platforms and services:

1. **Data Sources**: Third-party platforms that send data to Amplitude
2. **Export Destinations**: Services like Snowflake and Redshift where Amplitude data can be exported
3. **Mobile and Web SDKs**: Libraries for instrumenting applications to send data to Amplitude
4. **HTTP API**: Direct API for sending events to Amplitude

## API Endpoints and Implementation Details

### User Identification Implementation
- Set Device ID and User ID through SDK methods or HTTP API
- Cross-domain tracking requires additional configuration
- User merging happens automatically when Amplitude detects the same User ID across different Device IDs

### Session Tracking Implementation
- Configure through SDK initialization or HTTP API
- Start/End Session events can be manually triggered
- Session timeout intervals are configurable (default: 30 minutes for web)
- Session ID generation follows specific patterns based on platform

### Revenue Tracking Implementation
- Use `logRevenueV2()` method in SDKs
- Include required properties ($revenue, $price, $quantity)
- For in-app purchases, implement receipt validation
- Revenue events appear in Revenue LTV charts

### Export API Usage
- Data exported via API will be in UTC timezone
- Use server_upload_time for query time definitions
- Account for timezone differences when comparing with Amplitude analytics platform data

### Troubleshooting Tools
- **Ingestion Debugger**: Tool for troubleshooting data source issues
- **Revenue Verification**: Methods to verify in-app purchases
- **Session Calculation**: Tools to understand how session length is calculated
- **Data Discrepancies**: Explanations for differences between Amplitude charts and exported data