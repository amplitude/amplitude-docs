# Amplitude React Native SDK

## Overview
The Amplitude React Native SDK is a client-side analytics solution for tracking user events, managing user properties, and analyzing user behavior in React Native applications. It provides type-safe event tracking, supports JavaScript and TypeScript, and offers flexible configuration options for various analytics requirements.

Key features:
- Event tracking with custom properties
- User identification and property management
- Revenue tracking
- Session management
- Plugin architecture for extensibility
- Batch event processing
- EU data residency support
- COPPA compliance controls
- Strongly-typed tracking via Ampli Wrapper

## Product Relationships and Architecture

The React Native SDK ecosystem consists of:

1. **Core SDK Package**: `@amplitude/analytics-react-native` - The latest version with modern plugin architecture
2. **Maintenance SDK Package**: `@amplitude/react-native` - Legacy version that's maintained but not actively developed
3. **Ampli Wrapper**: Code-generated layer providing type-safe event tracking based on Amplitude Data tracking plans

The SDK integrates with Amplitude's analytics backend, sending tracked events for processing and visualization. The plugin architecture enables extensibility and integration with other services.

## Key Nomenclature and Definitions

- **Event**: A user action tracked in your application
- **User Properties**: Persistent attributes associated with a user across sessions
- **Identify**: API for setting/modifying user properties without sending an event
- **Group**: Collection of users with their own set of properties
- **Session**: Period of user engagement, typically ending after inactivity
- **Device ID**: Unique device identifier for tracking users across sessions
- **User ID**: Custom identifier assigned to users, typically after authentication
- **Tracking Plan**: Schema defining the expected structure of events and properties
- **Ampli Wrapper**: Code-generated SDK wrapper enforcing tracking plan schema
- **Plugin**: Extension point for modifying or enhancing SDK functionality

## Integration with Amplitude Ecosystem

The React Native SDK integrates with the broader Amplitude ecosystem:

1. **Amplitude Dashboard**: Tracked events appear in the analytics dashboard for analysis
2. **Amplitude Data**: Works with tracking plans via the Ampli Wrapper for type-safe event tracking
3. **EU Data Residency**: Supports sending data to EU servers for regulatory compliance
4. **HTTP V2 API**: Uses Amplitude's HTTP V2 API for sending events to the backend

## API and Usage

### Installation
```bash
npm install @amplitude/analytics-react-native
# or
yarn add @amplitude/analytics-react-native
```

### Initialization
```javascript
import { Amplitude } from '@amplitude/analytics-react-native';

Amplitude.init('YOUR_API_KEY', {
  logLevel: LogLevel.DEBUG,
  defaultTracking: {
    sessions: true,
    pageViews: true,
    formInteractions: true,
    fileDownloads: true
  }
});
```

### Tracking Events
```javascript
// Basic event tracking
Amplitude.track('Button Clicked');

// Event with properties
Amplitude.track('Product Purchased', {
  productId: 'abc123',
  price: 29.99,
  quantity: 1
});
```

### User Identification
```javascript
// Set user ID
Amplitude.setUserId('user@example.com');

// Set user properties
Amplitude.identify(
  new Identify()
    .set('plan', 'premium')
    .setOnce('first_login_date', '2021-01-01')
    .add('login_count', 1)
);
```

### Revenue Tracking
```javascript
Amplitude.revenue(
  new Revenue()
    .setProductId('product_1')
    .setPrice(29.99)
    .setQuantity(1)
);
```

### Session Management
```javascript
// Start a new session
Amplitude.startNewSession();

// End the current session
Amplitude.endSession();
```

### Ampli Wrapper Usage
```typescript
import { ampli } from './ampli';

// Initialize Ampli
ampli.load({
  client: {
    apiKey: 'YOUR_API_KEY'
  }
});

// Track a typed event
ampli.track('ProductPurchased', {
  productId: 'abc123',
  price: 29.99,
  quantity: 1
});

// Identify a user with typed properties
ampli.identify('user@example.com', {
  userProp1: 'value1',
  userProp2: true
});
```

### Flushing Events
```javascript
// Manually flush events to the server
await Amplitude.flush();
```

## Migration
When migrating from the maintenance SDK (`@amplitude/react-native`) to the latest SDK (`@amplitude/analytics-react-native`), developers need to update initialization, event tracking, and user identification code to match the new API patterns. The latest SDK uses a plugin architecture with different configuration options but provides equivalent functionality with improved performance and maintainability.

The migration process preserves existing device IDs and user properties, ensuring continuity in user analytics data.