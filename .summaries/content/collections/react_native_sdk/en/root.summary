# Amplitude React Native SDK

## Overview

The Amplitude React Native SDK is a client-side analytics solution that enables developers to track user events, manage user properties, and analyze user behavior in React Native applications. The SDK provides a type-safe approach to event tracking, supports both JavaScript and TypeScript, and offers flexible configuration options to meet various analytics requirements.

Key features include:
- Event tracking with custom properties
- User identification and user property management
- Revenue tracking
- Session management
- Plugin architecture for extensibility
- Batch event processing
- EU data residency support
- COPPA compliance controls
- Strongly-typed tracking via Ampli Wrapper

## Product Relationships and Architecture

The React Native SDK ecosystem consists of several interconnected components:

1. **Core SDK Package**: `@amplitude/analytics-react-native` - The latest version of the SDK with a modern plugin architecture.
2. **Maintenance SDK Package**: `@amplitude/react-native` - The legacy version that is still maintained but not actively developed.
3. **Ampli Wrapper**: A code-generated layer that provides type-safe event tracking based on your Amplitude Data tracking plan.

The SDK is designed to work within the broader Amplitude platform ecosystem, sending tracked events to Amplitude's analytics backend for processing and visualization. The plugin architecture allows for extensibility and integration with other services.

## Key Nomenclature and Definitions

- **Event**: An action that a user performs in your application that you want to track.
- **User Properties**: Attributes associated with a user that persist across sessions.
- **Identify**: The API used to set or modify user properties without sending an event.
- **Group**: A collection of users that can have their own set of properties.
- **Session**: A period of user engagement with your app, typically ending after a period of inactivity.
- **Device ID**: A unique identifier for the device, used to track users across sessions.
- **User ID**: A custom identifier you assign to users, typically after authentication.
- **Tracking Plan**: A schema that defines the expected structure of events and properties.
- **Ampli Wrapper**: A code-generated SDK wrapper that enforces your tracking plan schema.
- **Plugin**: An extension point for the SDK that can modify or enhance its functionality.

## Integration with Amplitude Ecosystem

The React Native SDK integrates with the broader Amplitude ecosystem in several ways:

1. **Amplitude Dashboard**: Events tracked via the SDK appear in the Amplitude analytics dashboard for analysis.
2. **Amplitude Data**: The SDK can be used with Amplitude Data tracking plans via the Ampli Wrapper for type-safe event tracking.
3. **EU Data Residency**: The SDK supports sending data to EU servers for compliance with European data regulations.
4. **HTTP V2 API**: The SDK uses Amplitude's HTTP V2 API for sending events to the backend.

## API and Usage

### Installation

```bash
npm install @amplitude/analytics-react-native
# or
yarn add @amplitude/analytics-react-native
```

### Initialization

```javascript
import { Amplitude } from '@amplitude/analytics-react-native';

// Initialize with API key
Amplitude.init('YOUR_API_KEY', {
  // Optional configuration
  logLevel: LogLevel.DEBUG,
  defaultTracking: {
    sessions: true,
    pageViews: true,
    formInteractions: true,
    fileDownloads: true
  }
});
```

### Tracking Events

```javascript
// Basic event tracking
Amplitude.track('Button Clicked');

// Event with properties
Amplitude.track('Product Purchased', {
  productId: 'abc123',
  price: 29.99,
  quantity: 1
});
```

### User Identification

```javascript
// Set user ID
Amplitude.setUserId('user@example.com');

// Set user properties
Amplitude.identify(
  new Identify()
    .set('plan', 'premium')
    .setOnce('first_login_date', '2021-01-01')
    .add('login_count', 1)
);
```

### Revenue Tracking

```javascript
// Track revenue
Amplitude.revenue(
  new Revenue()
    .setProductId('product_1')
    .setPrice(29.99)
    .setQuantity(1)
);
```

### Session Management

```javascript
// Start a new session
Amplitude.startNewSession();

// End the current session
Amplitude.endSession();
```

### Ampli Wrapper Usage

```typescript
import { ampli } from './ampli';

// Initialize Ampli
ampli.load({
  client: {
    apiKey: 'YOUR_API_KEY'
  }
});

// Track a typed event
ampli.track('ProductPurchased', {
  productId: 'abc123',
  price: 29.99,
  quantity: 1
});

// Identify a user with typed properties
ampli.identify('user@example.com', {
  userProp1: 'value1',
  userProp2: true
});
```

### Flushing Events

```javascript
// Manually flush events to the server
await Amplitude.flush();
```

## Migration

When migrating from the maintenance SDK (`@amplitude/react-native`) to the latest SDK (`@amplitude/analytics-react-native`), developers need to update their initialization, event tracking, and user identification code to match the new API patterns. The latest SDK uses a plugin architecture and has different configuration options, but provides equivalent functionality with improved performance and maintainability.

The migration process preserves existing device IDs and user properties, ensuring continuity in user analytics data.