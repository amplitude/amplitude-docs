## Amplitude Browser SDK Product Ecosystem

The Amplitude Browser SDK is a comprehensive analytics tracking solution for web applications, offering multiple SDK versions and specialized tools for event tracking, user analytics, and marketing attribution. The ecosystem centers around strongly-typed JavaScript/TypeScript SDKs that integrate with Amplitude's HTTP V2 API for robust analytics data collection.

## Product Architecture and Relationships

### Core SDK Evolution
The product ecosystem follows a clear evolutionary path with three main SDK generations:

**Legacy JavaScript SDK (amplitude-js)** - The original maintenance-mode SDK providing basic event tracking, user identification, and analytics capabilities through methods like `logEvent()`, `setUserId()`, and `Identify` objects. This SDK uses the `getInstance()` pattern and includes features like UTM parameter capture, cross-domain tracking, and sendBeacon support.

**Browser SDK 1.0 (@amplitude/analytics-browser v1)** - The first modern TypeScript/JavaScript SDK using HTTP V2 API, introducing a plugin architecture, consolidated `track()` API replacing multiple logEvent variants, and enhanced features like default event tracking for page views, sessions, form interactions, and file downloads. This version eliminated the getInstance() pattern in favor of direct SDK initialization.

**Browser SDK 2.0 (@amplitude/analytics-browser v2+)** - The current flagship SDK featuring comprehensive autocapture functionality, consolidated marketing attribution tracking, simplified configuration options, and enhanced plugin system. Key improvements include default autocapture enablement, Web Attribution V1 integration, streamlined cookie management under `cookieOptions`, and server-side user agent parsing.

### Specialized SDKs and Extensions

**Marketing Analytics Browser SDK (@amplitude/marketing-analytics-browser)** - A maintenance-mode extension providing automatic marketing attribution tracking for UTM parameters, referrers, and click IDs (gclid, fbclid, dclid) with both first-touch and multi-touch attribution capabilities. Features include page view tracking with `trackHistoryChanges` and campaign-based session management through `resetSessionOnNewCampaign`.

**Browser Unified SDK (@amplitude/unified)** - A beta integration package providing unified access to Analytics, Experiment, and Session Replay features through a single `initAll()` initialization method with shared configuration options across all three products.

### Code Generation and Type Safety

**Ampli Wrapper System** - Generates strongly-typed JavaScript/TypeScript APIs from Amplitude Data tracking plans, available for all SDK versions:
- Ampli for JavaScript SDK (amplitude-js@^8.21.0 dependency)
- Ampli for Browser SDK 1.0 (@amplitude/ampli with @amplitude/analytics-browser)
- Ampli for Browser SDK 2.0 (enhanced with setGroup() and EventOptions support)

All Ampli implementations provide CLI commands (`ampli pull`, `ampli status`), core methods (`load()`, `identify()`, `track()`, `flush()`), and CJS module packaging with JSDoc type checking.

## Key Nomenclature and Definitions

### Core Tracking Concepts
- **deviceId/userId** - Primary user identification mechanisms with cross-domain tracking support
- **sessionId** - Session management with configurable timeout and campaign-based reset options
- **track()** - Universal event tracking method replacing legacy logEvent variants
- **identify()** - User property management through Identify operations
- **flush()** - Manual queue management for immediate event transmission

### Configuration Architecture
- **flushQueueSize/flushIntervalMillis** - Batch processing controls for event transmission
- **serverZone** - Data residency configuration (EU support)
- **identityStorage** - Storage mechanism selection (cookies, localStorage, sessionStorage, none)
- **cookieOptions** - Comprehensive cookie configuration including expiration, secure flags, and sameSite settings
- **trackingOptions** - Granular control over automatic data collection

### Plugin System
- **EnrichmentPlugin** - Data enhancement plugins for adding context to events
- **DestinationPlugin** - Event routing and transmission plugins
- **Plugin Interface** - Simplified architecture with optional properties in SDK 2.0

### Autocapture Features
- **Attribution Tracking** - Automatic UTM parameter and referrer capture
- **Page View Tracking** - Automatic page navigation monitoring
- **Session Tracking** - Automatic session lifecycle management
- **Form Interactions** - Automatic form submission and interaction tracking
- **File Downloads** - Automatic download event capture
- **Element Interactions** - Click and interaction tracking on page elements
- **Network Tracking** - HTTP request monitoring and performance tracking

## Cookie and Storage Management

The SDK ecosystem uses a consistent cookie naming convention with **AMP_** prefix combined with API keys for device identification, session management, and user tracking. Marketing attribution data uses **AMP_MKTG_** prefixed cookies for UTM parameters and click ID storage.

Storage options include **identityStorage** configuration supporting cookies (default), localStorage, sessionStorage, or none, with automatic fallback mechanisms. The system supports **cross-domain tracking** through deviceId parameter passing and cookie domain configuration.

## Consent Management and Compliance

Comprehensive consent management supports **GDPR compliance** and **CNIL France exemption** requirements through deferred initialization patterns. Key methods include **deferInitialization** with **enableTracking()** for consent-based activation, **setOptOut()** for user privacy controls, and **amplitude.reset()** for complete data clearing.

The system provides **User Privacy API** and **DSAR API** integration with configurable data retention (25-month limit) and cookie expiration (13-month limit) for regulatory compliance.

## Migration Pathways and Compatibility

The ecosystem provides comprehensive migration documentation covering:
- **amplitude-js to Browser SDK 1.0** - API method mapping, configuration changes, HTTP V2 migration
- **Browser SDK 1.0 to 2.0** - Autocapture enablement, attribution consolidation, cookie restructuring
- **Marketing Analytics to Browser SDK 2.0** - Event type changes, configuration consolidation, plugin migration

## Plugin Ecosystem

Specialized plugins extend core functionality:
- **Autocapture Plugin** - Deprecated standalone plugin migrated to built-in Browser SDK 2.10.0+ functionality
- **Page URL Enrichment Plugin (@amplitude/plugin-page-url-enrichment-browser)** - Automatic page URL property addition with navigation tracking
- **User Agent Enrichment Plugin** - Server-side user agent parsing replacement for client-side detection

## API Integration and Transport

All modern SDKs utilize **HTTP V2 API** endpoints with **sendBeacon** transport support for reliable event transmission. The system supports **offline mode** with local event queuing, **remote configuration** for dynamic SDK behavior, and **Content Security Policy (CSP)** compliance for secure web environments.

Revenue tracking utilizes the **Revenue interface** for e-commerce analytics, while group analytics support **groupType/groupName** organization with **groupIdentify** operations for B2B use cases.