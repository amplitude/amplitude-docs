# Amplitude Browser SDK

Amplitude's Browser SDK is a comprehensive web analytics platform that enables event tracking, user identification, and marketing attribution for browser-based applications. The product suite encompasses multiple SDK generations, specialized tools, and integration layers designed to capture detailed user behavior analytics across web properties.

## Product Architecture and Relationships

The Browser SDK ecosystem follows an evolutionary three-generation architecture:

**Legacy JavaScript SDK (amplitude-js)** serves as the foundational maintenance-mode SDK, providing basic event tracking through the `amplitude.getInstance()` pattern with established cookie-based device identification.

**Browser SDK 1.0 (@amplitude/analytics-browser v1)** introduced TypeScript-first development with HTTP V2 API integration, plugin architecture, and modern JavaScript patterns while preserving backward compatibility.

**Browser SDK 2.0 (@amplitude/analytics-browser v2+)** represents the current flagship offering, featuring comprehensive autocapture functionality, unified marketing attribution, enhanced cookie management, and deep integration with Amplitude's product ecosystem.

**Specialized Components** extend core functionality:
- **Marketing Analytics SDK (@amplitude/marketing-analytics-browser)** - Maintenance-mode extension for advanced marketing attribution and UTM parameter tracking
- **Ampli Wrapper** - Code generation tool creating strongly-typed APIs from Amplitude Data tracking plans
- **Browser Unified SDK (@amplitude/unified)** - Beta integration layer providing unified initialization across Analytics, Experiment, and Session Replay products
- **Autocapture Plugin** - Deprecated standalone component now integrated into Browser SDK 2.0's native autocapture

## Core Nomenclature and Definitions

**Identity Management:**
- **deviceId** - Unique browser identifier persisted in cookies using AMP_{api_key} naming convention
- **sessionId** - Temporary session identifier with configurable timeout (default 30 minutes)
- **userId** - Custom user identifier enabling cross-device tracking, Base64 encoded in storage
- **instanceName** - Multi-instance deployment identifier for domain isolation

**Event Tracking:**
- **Autocapture** - Automated collection of page views, sessions, form interactions, file downloads, and element interactions
- **defaultTracking** - Configuration object controlling autocapture behavior for attribution, sessions, and user interactions
- **Revenue Interface** - Product-level revenue attribution with price, quantity, and product metadata

**Configuration Systems:**
- **cookieOptions** - Cookie management including expiration, secure flags, sameSite policies, and domain configuration
- **identityStorage** - Storage backend selection (cookies, localStorage, sessionStorage, none)
- **transportProvider** - Network transport method selection (fetch, xhr, sendBeacon)
- **serverZone** - Data residency configuration for US/EU compliance

**Plugin Architecture:**
- **EnrichmentPlugin** - Middleware for event data modification before transmission
- **DestinationPlugin** - Custom event routing and external system integrations
- **Web Attribution Plugin** - Marketing attribution and UTM parameter capture functionality

## Broader Product Ecosystem Integration

The Browser SDK functions as the foundational analytics layer within Amplitude's comprehensive digital analytics platform, integrating across multiple product dimensions:

**Data Pipeline Integration** routes events through HTTP V2 API endpoints to Amplitude's ingestion infrastructure, with native integration to Amplitude Data for schema validation and tracking plan enforcement. Multi-instance deployments support complex organizational structures through instanceName configuration.

**Marketing Attribution** provides comprehensive UTM parameter tracking (utm_source, utm_medium, utm_campaign, utm_term, utm_content) alongside click ID monitoring for major advertising platforms (gclid, fbclid, dclid, ttclid, twclid, li_fat_id). The system supports both first-touch and multi-touch attribution modeling with configurable reset behavior.

**Privacy and Compliance** features include GDPR compliance through deferred initialization and consent management workflows, CNIL France exemption support for analytics cookies, User Privacy API integration for data subject access requests (DSAR), and configurable opt-out mechanisms with DNT flag handling.

**Advanced Analytics Capabilities** encompass revenue tracking through the Revenue interface, group analytics for organizational analysis via setGroup() methods, cross-domain user journey tracking with shared deviceId persistence, and offline mode support with local event queuing and automatic retry logic.

## API Methods and CLI Commands

**Core SDK Methods:**
```javascript
amplitude.init('API_KEY', 'user@example.com', options)
amplitude.track('Event Name', properties, options)
amplitude.identify(identifyObject)
amplitude.setGroup('orgId', 'company-123')
amplitude.flush()
amplitude.revenue().setProductId('product-1').setPrice(29.99)
```

**Ampli Integration:**
```javascript
ampli.load({ client: { apiKey: 'API_KEY' }})
ampli.eventName(properties)
```

**CLI Operations:**
```bash
ampli pull [--path ./src/ampli]  # Generate typed tracking APIs
ampli status                     # Verify tracking plan synchronization
```

**HTTP Integration** utilizes primary ingestion via HTTP V2 API with automatic batching and retry logic, EU data residency support through serverZone configuration, and CORS-compliant cross-origin request handling with preflight optimization.

The Browser SDK ecosystem delivers a complete web analytics solution spanning basic event tracking to sophisticated marketing attribution and user behavior analysis, maintaining strong integration with Amplitude's broader analytics and experimentation platform while supporting enterprise-grade privacy compliance and data governance requirements.