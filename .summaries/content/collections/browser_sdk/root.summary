# Amplitude Browser SDK Product Overview

## High-Level Overview

Amplitude's Browser SDK is a JavaScript/TypeScript library for tracking user events and analytics in web applications. Browser SDK 2.0 is the current recommended version, while older versions (Browser SDK 1.0 and JavaScript SDK) are maintained but not actively developed. The SDK enables developers to track user interactions, manage identities, capture sessions, track revenue, and attribute marketing campaigns across both traditional websites and single-page applications (SPAs).

Key features include:
- Event tracking and user behavior analysis
- User identity management
- Session tracking
- Revenue tracking
- Marketing attribution
- Autocapture functionality
- Cross-domain tracking
- Offline event collection

## Product Relationships and Features

### SDK Versions

1. **Browser SDK 2.0** (@amplitude/analytics-browser)
   - Current recommended version
   - Built-in autocapture (since v2.10.0)
   - Consolidated marketing attribution
   - Simplified cookie management
   - Server-side user agent parsing
   - Streamlined plugin interface

2. **Browser SDK 1.0** (@amplitude/analytics-browser)
   - Maintenance mode
   - Introduced plugin architecture

3. **JavaScript SDK** (amplitude-js)
   - Legacy SDK in maintenance mode
   - Lacks plugin support

4. **Marketing Analytics Browser SDK**
   - Specialized for marketing attribution
   - Functionality now part of Browser SDK 2.0

5. **Ampli Wrapper**
   - Compatible with all SDK versions
   - Provides strongly typed API based on tracking plans
   - Supports TypeScript and JavaScript

### Core Features

1. **Event Tracking**
   - Basic event tracking via `track()` method
   - Revenue tracking
   - Automatic session tracking
   - Batch event processing

2. **User Management**
   - User identification via `identify()`
   - User properties management
   - User groups via `setGroup()`
   - Device ID management

3. **Autocapture**
   - Automatic tracking of element interactions
   - Configurable via `defaultTracking.elementInteractions`
   - Now built into Browser SDK 2.0

4. **Marketing Attribution**
   - UTM parameter tracking
   - Click ID tracking
   - Referrer tracking
   - First-touch and multi-touch attribution
   - Page view tracking

5. **Advanced Features**
   - Cross-domain tracking
   - Offline mode
   - Plugin architecture
   - Content Security Policy (CSP) compatibility
   - EU data residency support
   - Ad blocker mitigation

## Key Nomenclature and Definitions

- **Ampli Wrapper**: Code-generated wrapper providing type-safe event tracking based on tracking plans defined in Amplitude Data.

- **Autocapture**: Functionality that automatically tracks user interactions with webpage elements without manual instrumentation.

- **Device ID**: Unique identifier for a user's device, stored in cookies or localStorage.

- **Event**: User action or occurrence tracked in Amplitude, containing properties describing the action.

- **Identity Storage**: Configuration determining where user identity information is stored (cookies, localStorage, or none).

- **Plugin**: Modular components extending SDK functionality, following a middleware pattern.

- **SendBeacon**: Browser API for reliable event sending, especially during page unload.

- **Session**: Period of user activity, typically ending after inactivity.

- **Tracking Plan**: Schema defining events and their properties, created in Amplitude Data.

- **User Properties**: Attributes associated with a user that persist across sessions.

- **UTM Parameters**: Marketing tracking parameters (source, medium, campaign, etc.) used for attribution.

## Product Ecosystem Integration

The Browser SDK integrates with the broader Amplitude ecosystem:

1. **Amplitude Data**: Works with tracking plans defined in Amplitude Data, especially when using the Ampli Wrapper.

2. **Amplitude Analytics**: All tracked events are sent to Amplitude Analytics for analysis.

3. **Amplitude Experiment**: Can be used alongside Amplitude Experiment for A/B testing.

4. **Amplitude CDP**: Can be part of a Customer Data Platform strategy, collecting web data for unified customer profiles.

## API Endpoints and Commands

### SDK Initialization

```javascript
// Browser SDK 2.0 initialization
import { init } from '@amplitude/analytics-browser';
init('API_KEY', 'user_id', {
  // Configuration options
});
```

### Core API Methods

- `track(eventName, eventProperties)`: Track an event
- `identify(identifyObj)`: Set user properties
- `setGroup(groupType, groupName)`: Associate user with a group
- `flush()`: Force send events in the queue
- `setUserId(userId)`: Set the user ID
- `reset()`: Reset the user ID and device ID

### Ampli CLI Commands

- `ampli pull`: Pull the tracking plan from Amplitude Data
- `ampli status`: Check the status of the local tracking plan

### Plugin Interface

```javascript
// Example plugin for Browser SDK 2.0
const plugin = {
  name: 'custom-plugin',
  setup: (config) => {
    // Setup code
    return config;
  },
  execute: (context) => {
    // Execution code
    return context;
  }
};
```

### Configuration Options

```javascript
// Browser SDK 2.0 configuration example
init('API_KEY', 'user_id', {
  defaultTracking: {
    pageViews: true,
    sessions: true,
    formInteractions: false,
    fileDownloads: true,
    elementInteractions: true
  },
  identityStorage: 'localStorage',
  flushQueueSize: 30,
  flushIntervalMillis: 10000,
  trackingOptions: {
    ipAddress: true,
    language: true,
    platform: true
  }
});
```