## Amplitude Browser SDK Product Ecosystem

The Amplitude Browser SDK is a comprehensive analytics tracking solution for web applications, offering multiple SDK versions and specialized tools for event tracking, user analytics, and marketing attribution. The ecosystem centers around strongly-typed JavaScript/TypeScript SDKs that integrate with Amplitude's HTTP V2 API for robust web analytics.

## Product Architecture and Relationships

### Core SDK Evolution
The product ecosystem follows a clear evolutionary path with three main SDK generations:

**Legacy JavaScript SDK (amplitude-js)** - The original maintenance-mode SDK that established core patterns like `amplitude.getInstance()`, `logEvent()`, and cookie-based tracking with AMP_ prefixed cookies.

**Browser SDK 1.x (@amplitude/analytics-browser v1)** - The first modern TypeScript implementation introducing HTTP V2 API integration, plugin architecture, and unified `track()` methods while maintaining backward compatibility patterns.

**Browser SDK 2.x (@amplitude/analytics-browser v2+)** - The current flagship SDK featuring built-in autocapture functionality, consolidated marketing attribution, server-side user agent parsing, and streamlined configuration options.

### Specialized Extensions
**Marketing Analytics SDK (@amplitude/marketing-analytics-browser)** - A maintenance-mode extension providing automatic UTM parameter tracking, referrer attribution, click ID capture (gclid, fbclid, dclid), and campaign-based session management.

**Unified SDK (@amplitude/unified)** - A beta integration layer providing single initialization for Analytics, Experiment, and Session Replay through the `initAll()` method with shared configuration.

### Code Generation Tools
**Ampli Wrappers** - Strongly-typed API generators that create JavaScript/TypeScript tracking functions from Amplitude Data tracking plans, available for JavaScript SDK, Browser SDK 1.0, and Browser SDK 2.0 with consistent CLI commands (`ampli pull`, `ampli status`) and core methods (`ampli.load()`, `ampli.identify()`, `ampli.track()`, `ampli.flush()`).

## Key Nomenclature and Definitions

### Core Tracking Concepts
- **deviceId**: Persistent browser identifier stored in cookies/localStorage for cross-session tracking
- **sessionId**: Temporary identifier for user session boundaries and attribution windows
- **userId**: Application-specific user identifier for cross-device tracking
- **Identify**: Interface for managing user properties through operations like `set()`, `add()`, `unset()`
- **Revenue**: Specialized tracking interface for e-commerce and monetization events

### Configuration Architecture
- **defaultTracking**: Browser SDK 2.0 configuration object consolidating autocapture settings for attribution, page views, sessions, forms, file downloads, and element interactions
- **cookieOptions**: Centralized cookie configuration including expiration, domain, secure flags, and sameSite policies
- **identityStorage**: Storage backend selection (cookies, localStorage, sessionStorage, none) for user identity persistence
- **serverZone**: Data residency configuration for EU compliance and regional data centers

### Plugin System
- **EnrichmentPlugin**: Middleware for modifying events before transmission (e.g., adding page URL data, user agent parsing)
- **DestinationPlugin**: Custom endpoints for event routing and third-party integrations
- **Plugin Interface**: Extensible architecture supporting `setup()`, `execute()`, and `teardown()` lifecycle methods

### Autocapture Features
- **Attribution Tracking**: Automatic UTM parameter, referrer, and click ID capture with first-touch and multi-touch attribution models
- **Page View Tracking**: SPA-aware navigation monitoring with `trackHistoryChanges` for pushState/replaceState events
- **Form Interactions**: Automatic form submission and field interaction tracking
- **Element Interactions**: Click tracking with CSS selector allowlists and visual labeling integration
- **Network Tracking**: HTTP request monitoring for performance analytics

## API Endpoints and Integration Patterns

### Core SDK Methods
- **Initialization**: `amplitude.init(apiKey, userId, options)` or `initAll()` for unified SDK
- **Event Tracking**: `amplitude.track(eventType, eventProperties, options)`
- **User Management**: `amplitude.identify(identifyObject)`, `amplitude.setUserId(userId)`
- **Revenue Tracking**: `amplitude.revenue().setPrice(amount).setProductId(id)`
- **Group Analytics**: `amplitude.setGroup(groupType, groupName)`, `amplitude.groupIdentify()`

### Configuration Options
- **Transport**: `sendBeacon`, `fetch`, `xhr` with automatic fallback mechanisms
- **Batching**: `flushQueueSize`, `flushIntervalMillis`, `useBatch` for optimized network usage
- **Privacy**: `optOut`, `trackingOptions`, consent management with `deferInitialization`
- **Cross-Domain**: `deviceIdFromUrlParam`, URL parameter sharing for attribution continuity

### CLI Commands (Ampli)
- **Code Generation**: `ampli pull` to generate strongly-typed tracking functions from Data tracking plans
- **Validation**: `ampli status` to verify implementation compliance with schema definitions

## Ecosystem Integration

### Data Pipeline Integration
The Browser SDK ecosystem integrates with Amplitude's broader data platform through HTTP V2 API endpoints, supporting real-time event ingestion, user property management, and revenue attribution. The SDKs automatically handle retry logic, offline queuing, and batch optimization for reliable data delivery.

### Privacy and Compliance Framework
Comprehensive GDPR and CNIL compliance support through deferred initialization patterns, cookie consent management, and the User Privacy API for data subject access requests. The cookie architecture uses AMP_ prefixed naming with API key suffixes for multi-tenant applications.

### Migration and Compatibility
Structured migration paths between SDK versions with detailed breaking change documentation, configuration mapping guides, and backward compatibility considerations. The ecosystem maintains support for legacy implementations while encouraging adoption of modern TypeScript-based SDKs.

### Plugin Ecosystem
Extensible architecture supporting first-party plugins (Page URL Enrichment, User Agent Enrichment, Web Attribution) and custom plugin development for specialized tracking requirements, third-party integrations, and data enrichment workflows.